<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Perl/Tk を使った GUI プログラミング (前編)</title>
  <meta name="description" content="Perl/Tk,Perl/Tk入門,GUI,プログラミング">
  <link rel="stylesheet" type="text/css" href="../home_styles.css">
</head>
<body><!-- geoguide start --><div align=center><script language="javascript">var jps=382116062;var jpt=1550881765</script><script language="javascript" src="http://bc-geocities.yahoo.co.jp/js/gg.js"></script></div><!-- geoguide end -->
M.Hiroi's Home Page
<div class="small">
http://www.geocities.jp/m_hiroi/
</div>
<div class="ce">
<h1>Perl/Tk memo</h1>
<h2>Perl/Tk を使った GUI プログラミング (前編)</h2>
<div class="small">
<cite>
特集『GUI の組み込み機器への実装 &amp; 活用法』 Interface 2002 年 4 月号 (ＣＱ出版社)<br>
『5. Perl/Tk を使った GUI プログラミング』 (pp.86 - 90) から転載
</cite>
<br><br>
[ <a href="../index.html">Home</a> | <a href="../tcl_tk.html">Tcl/Tk</a> | <a href="index.html">Perl/Tk</a> | 前編 | <a href="perltk_gui2.html">後編</a> ]
<hr>
</div>
</div>
<section class="contents">
<h3>はじめに</h3>
<p> Perl はいまやもっとも有名なスクリプト言語の一つです。CGI 用のプログラミング言語としてだけではなく、いろいろな処理が可能な奥の深い言語です。GUI アプリケーションの作成もその一つです。標準では GUI の機能を持たない Perl ですが、そこに GUI の機能を追加したものが Perl/Tk です。
</p>

<p> GUI 用のスクリプト言語では、Tcl/Tk が有名です。Tcl は Tool Command Language の略で、もともとはアプリケーションに組み込むためのコマンド言語として設計されたのですが、GUI の基本部品を多数集めた Tk (Tool Kit) と組み合わせることで、とても簡単に GUI アプリケーションを作成することができます。
</p>

<p> Tk は機能が豊富で見た目も素晴らしく、とても使いやすい優れた GUI ツールキットです。このため、さまざまな言語に Tk を移植する試みが行われました。もちろん、Perl にも Tk が移植されています。それが Perl/Tk です。Perl/Tk というプログラミング言語があるのではなく、Perl に Tk というモジュールをロードすることで Tk を利用することができます。
</p>

<p> そして、Perl/Tk を使うことで、驚くほど簡単に GUI アプリケーションを作成することができるのです。本稿では、Perl/Tk の基本的な機能とプログラミングの方法について説明します。
</p>
<hr>
<h3 id="chapter2">入手とインストール</h3>
<p> モジュール Tk は CPAN (Comprehensive Perl Archive Network) で入手することができます。また、Windows 上で動作する ActivePerl の場合は、PPM というプログラムを使うと簡単です。DOS プロンプトで PPM を起動して install Tk を実行すれば、Tk のダウンロードとインストールが行われます。
</p>

<hr>
<h3 id="chapter3">Perl/Tk の基礎知識</h3>
<h4>●オブジェクト指向とリファレンス</h4>
<p> Perl/Tk でプログラムを作成する場合、Perl 5 で導入された機能「オブジェクト指向」と「リファレンス」の知識が必要になります。とくに、Perl/Tk では変数へのリファレンス、関数へのリファレンス、無名の配列といった機能を多用します。これらの機能を理解していないと Perl/Tk を使いこなすことは難しいのですが、誌面の都合上、説明は割愛します。
</p>

<p> オブジェクト指向とリファレンスの詳しい説明は、最後に示した参考文献を参照してください。また、筆者の Web サイトで公開している Perl 入門講座では、リファレンスとオブジェクト指向について詳しく説明しているので、参考にしてください。
</p>

<h4>●ウィジェット</h4>
<p> Tk では GUI の基本部品のことをウィジェット (widget) と呼びます。Tk に用意されているおもなウィジェットを表 1 と 図 1 ～ 図 11 に示します。
</p>

<p> Tk はこれらのウィジェットを組み合わせることで、簡単に GUI を構築することができます。このほかに Perl/Tk では、Tcl/Tk の拡張モジュール Tix のウィジェットも利用できます。
</p>

<p> Perl/Tk には Tcl/Tk の Widget Tour に相当する Perl/Tk Widget Demonstrations が用意されています。コマンド widget で起動するので、ひととおり眺めてみてください。その機能の多さに驚かれることでしょう。
</p>

<table border=1>
<caption>表 1 : おもなウィジェット</caption>
<thead>
  <tr><th>ウィジェット名</th><th>クラス名</th><th>概要</th>
</thead>
<tbody>
  <tr><td>フレーム</td><td>Frame</td><td>ウィジェットを格納する枠組みを作る</td></tr>
  <tr><td>ラベル</td><td>Label</td><td>文字列やイメージを表示する</td></tr>
  <tr><td>メッセージ</td><td>Message</td><td>複数行の文字列を表示する</td></tr>
  <tr><td>ボタン</td><td>Button</td><td>ボタンを作る</td></tr>
  <tr><td>ラジオボタン</td><td>Radiobutton</td><td>ラジオボタンを作る</td></tr>
  <tr><td>チェックボタン</td><td>Checkbutton</td><td>チェックボタンを作る</td></tr>
  <tr><td>リストボックス</td><td>Listbox</td><td>リストボックスを作る</td></tr>
  <tr><td>スクロールバー</td><td>Scrollbar</td><td>スクロールバーを作る</td></tr>
  <tr><td>スケール</td><td>Scale</td><td>スケールを作る</td></tr>
  <tr><td>エントリー</td><td>Entry</td><td>１行の文字列の入力と編集</td></tr>
  <tr><td>メニュー</td><td>Menu</td><td>メニューを作る</td></tr>
  <tr><td>メニューボタン</td><td>Menubutton</td><td>メニューボタンを作る</td></tr>
  <tr><td>イメージ</td><td>Image</td><td>イメージを作る</td></tr>
  <tr><td>ビットマップ</td><td>Bitmap</td><td>ビットマップを作る</td></tr>
  <tr><td>キャンバス</td><td>Canvas</td><td>キャンバスを作る</td></tr>
  <tr><td>テキスト</td><td>Text</td><td>テキストの入力と編集</td></tr>
</tbody>
</table>

<p><img src="img/fig01.png"> 図 1 : ボタンウィジェット
</p>
<p><img src="img/fig02.png"> 図 2 : ラベルウィジェット
</p>
<p><img src="img/fig03.png"> 図 3 : エントリーウィジェット
</p>
<p><img src="img/fig04.png"> 図 4 : チェックボタンウィジェット
</p>
<p><img src="img/fig05.png"> 図 5 : ラジオボタンウィジェット
</p>
<p><img src="img/fig06.png"> 図 6 : リストボックスウィジェットとスクロールバーウィジェット
</p>
<p><img src="img/fig07.png"> 図 7 : スケールウィジェット
</p>
<p><img src="img/fig08.png"> 図 8 : メニューウィジェット
</p>
<p><img src="img/fig09.png"> 図 9 : フレームウィジェット
</p>
<p><img src="img/fig10.png"> 図 10 : テキストウィジェット
</p>
<p><img src="img/fig11.png"> 図 11 : キャンバスウィジェット
</p>

<hr>
<h3 id="chapter4">Perl/Tk プログラムの基本構造</h3>
<p> GUI アプリケーションは、ユーザーからの入力やシステムの状態変化など、あるイベントをきっかけに処理を行うイベントドリブン型のプログラムです。このようなプログラムは、一般に次のようなメインルーチンを持っています。
</p>
<ol>
  <li>初期化
  <li>イベントを取得する 
  <li>イベントの種類に応じて処理を振り分ける
  <li>2 に戻る
</ol>
<p> 2 から 4 をイベントループと呼び、アプリケーションはユーザーからの入力などのイベントを待ちます。そして、3 の処理に対応する機能がバインディング (binding) です。バインディングは、ウィンドウでイベントが発生したときに、それに応じて実行するプログラムを設定します。このプログラムをイベントハンドラとかコールバック関数と呼びます。
</p>

<p> Perl/Tk で GUI アプリケーションを作成する場合、次の手順にしたがってプログラムを作成します。 
</p>
<ol>
  <li>メインウィンドウを作る 
  <li>ウィジェットを設定してウィンドウに配置する
  <li> イベントループを開始してイベントを処理する
</ol>
<p> そして、必要に応じてコールバック関数を作成します。
</p>
それでは実際にボタンを一つ表示してみましょう。
プログラムをリスト 1 に、画面を図 12 に示します。

<pre class="list">
リスト 1 : Button の表示

#
# List 1 : Button の表示
#
use Tk;

$top = MainWindow-&gt;new();
$button = $top-&gt;Button( -text =&gt; 'EXIT', -command =&gt; \&amp;exit ); 
$button-&gt;pack();

MainLoop();
</pre>
<p><IMG src="img/fig12.png"> 図 12 : リスト 1 の画面
</p>

<p> 最初に必要なことが、use 文でモジュール Tk をロードすることです。次に、MainWindow クラスのメソッド new を呼び出してメインウィンドウを生成します。返り値はメインウィンドウを表すオブジェクトです。そして、このウィンドウにボタンを配置します。ボタンを生成するメソッドは Button で、ボタンを表すクラスと同じ名前になっています。
</p>

<p> Tk の場合、ウィジェットを生成しただけではウィンドウに配置することはできません。ウィジェットの配置はジオメトリーマネージャ (Geometry Manager) が担当します。ここでは pack を使っています。最後に MainLoop() を呼び出してイベントループに入ります。
</p>

<p> 簡単なプログラムですが、Perl/Tk で GUI アプリケーションを作成する場合の基本的な構造を表しています。たったこれだけのプログラムですが、ボタンを表示することができ、そのボタンを押すことでプログラムを終了することができます。
</p>

<hr>
<h3 id="chapter5">ウィジェットの生成</h3>
<p> Perl/Tk の場合、ウィジェットはクラスに対応しています。ウィジェットを作ることは、そのクラスのオブジェクトを生成することと同じです。オブジェクトを生成するメソッドは、ウィジェットのクラスと同じ名前で、次の形式で呼び出します。
</p>
<pre class="item">
$widget = $parent-&gt;widgetClass(option =&gt; value, ...);
</pre>
<p> widgetClass はウィジェットのクラス名で、$parent はウィジェットを配置する親ウィジェット（通常はメインウィンドウかフレームウィジェット）を表します。メソッドの返り値はウィジェットに対応するクラスのオブジェクトです。
</p>

<h4>●オプションの設定</h4>
<p> ウィジェットには多数の設定パラメータがあります。これを Tk ではオプションといいます。オプションの値は、ユーザーが自由に設定したり変更することができます。通常、オプションは「 - 」から始まる文字列です。ほとんどのウィジェットで共通するオプションを表 2 に示します。
</p>

<table border=1>
<caption>表 2 : ウィジェットで共通するおもなオプション</caption>
<thead>
  <tr><th>オプション</th><th>説明</th></tr>
</thead>
<tbody>
  <tr><td>-foreground (-fg)   </td><td>文字や線を描くのに使用する色を指定</td></tr>
  <tr><td>-background (-bg)   </td><td>背景色の指定</td></tr>
  <tr><td>-activebackground   </td><td>アクティブになったときの背景色の指定</td></tr>
  <tr><td>-text              </td><td>ウィジェット内に表示されるテキスト</td></tr>
  <tr><td>-textvariable      </td><td>テキストを格納する変数を指定</td></tr>
  <tr><td>-image             </td><td>ウィジェット内に表示されるイメージ</td></tr>
  <tr><td>-bitmap            </td><td>ウィジェット内に表示されるビットマップ</td></tr>
  <tr><td>-borderwidth (-bd) </td><td>ウィジェットの枠の幅</td></tr>
  <tr><td>-relief            </td><td>ウィジェットの枠のスタイル</td></tr>
  <tr><td>-height            </td><td>ウィジェットの高さ</td></tr>
  <tr><td>-width             </td><td>ウィジェットの幅</td></tr>
  <tr><td>-anchor            </td><td>ウィジェットや表示されるデータの位置を指定</td></tr>
</tbody>
</table>

<p> ウィジェットの幅と高さは、テキストを表示するウィジェットでは文字数、それ以外のウィジェットはピクセル単位となります。オプションは option =&gt; value の形式で指定します。
</p>
<p> リスト 1 の Button メソッドの場合、オプションは -text と -command の二つがあります。-text はボタンの名前を設定するオプションで、値は文字列です。-command はボタンを押したときに実行するコールバック関数を設定するオプション、つまりバインディングを設定します。
</p>
<p> オプションはウィジェットを生成する時に設定することができますが、あとから configure メソッドで値を設定したり変更することができます。また、cget メソッドで値を取得することができます。
</p>

<p> ラベルなど文字列を表示するウィジェットでは、configure で表示する文字列を変更することができますが、もっと便利なオプションが用意されています。-textvariable オプションで変数を指定すると、その変数の値がウィジェットに表示されます。そして、変数の値を書き換えると、ウィジェットの表示も書き換えられます。これはとても便利な機能です。
</p>

<p> 簡単な例として、ボタンを押した回数をラベルに表示するプログラムを作りましょう。リスト 2 を見てください。
</p>

<pre class="list">
リスト 2 : -textvariable の使い方

#
# List 2 : -textvariable の使い方
#
use Tk;

$count = 0;
$buffer = "button is pressed 0 time";

sub push_button {
  $buffer = sprintf("button is pressed %d times", ++$count );
}

$top = MainWindow-&gt;new();
$top-&gt;Label( -textvariable =&gt; \$buffer )-&gt;pack();
$top-&gt;Button( -text =&gt; 'Button', -command =&gt; \&amp;push_button )-&gt;pack();

MainLoop();
</pre>

<p> ラベルを生成するときに、-textvariable オプションに変数 $buffer を指定します。変数はリファレンスで指定します。これで $buffer の値がラベルに表示されます。ボタンを押したときに実行される関数が push_button です。ここで $buffer の値を書き換えるだけで、ラベルの表示を変更することができます。ボタンを押したときの画面を図 13 に示します。
</p>

<p><img src="img/fig13.png"> 図 13 : リスト 2 の画面
</p>

<p> このほかに、ウィジェットによってはオプションの値と変数を結び付ける -variable が用意されています。これらのオプションを使えば、configure や cget を使わなくても、オプションの値を取得したり変更することができます。
</p>

<p> ウィジェットには多数のオプションとメソッドが用意されています。詳細は文献やマニュアルなどを参照してください。
</p>

<h4>●ジオメトリマネージャ</h4>
<p> Tk ではジオメトリマネージャがウィジェットの配置を担当します。標準では 3 種類のマネージャが用意されています。
</p>

<ol>
  <li>place マネージャ<br>
      指定した座標にウィジェットを配置する。
  <li>pack マネージャ<br>
    ウィンドウにウィジェットを詰め込む。
    ウィジェットの数や大きさによって、ウィンドウの大きさも変化する。
  <li>grid マネージャ<br>
    ウィジェットを格子状に配置する。
    ウィジェットの数や大きさによって、ウィンドウの大きさも変化する。
</ol>

<p> この中でいちばんよく使われるマネージャが pack です。ウィジェットを詰め込む方向は -side オプションで変更することができます。リスト 2 では、ボタンの幅がウィンドウよりも小さくなりましたが、これをいっぱいに広げるには -fill オプションを使います。方向は x, y, both で指定します。
</p>

<p> 電卓のようにボタンを格子状に配置する場合は grid マネージャが便利です。これらのマネージャとフレームウィジェットを組み合わせることで、かなり複雑な配置にも対応することができます。
</p>

<p> place マネージャはウィジェットの位置を座標で指定するため少々めんどうです。たいていの場合は pack で用が足りることと、pack と grid でウィジェットを配置すると、ウィンドウのリサイズにも簡単に対応できることから、place を使うことはあまりないでしょう。
</p>

<p> 簡単な例題を示します。リスト 3 はボタンを縦に四つ並べ (図 14)、リスト 4 はボタンを横に四つ並べます (図 15)。リスト 5 はボタンを 3 行 3 列に並べます (図 16)。リスト 6 はジオメトリマネージャとフレームの組み合わせです(図 17)。上のフレーム $up は pack でボタンを横に 3 つ並べ、下のフレーム $down は pack でボタンを縦に 3 つ並べます。
</p>

<p> このほかに、Perl/Tk では Tix の form マネージャを利用することができます。
</p>

<pre class="list">
リスト 3 : ボタンを四つ縦に並べる

#
# List 3 : ボタンを四つ縦に並べる
#
use Tk;

$top = MainWindow-&gt;new();

foreach $i (1..4){
  $top-&gt;Button( -text =&gt; "button $i" )-&gt;pack( -fill =&gt; 'x' );
}

MainLoop();
</pre>
<pre class="list">
リスト 4 : ボタンを四つ横に並べる

#
# List 4 : ボタンを四つ横に並べる
#
use Tk;

$top = MainWindow-&gt;new();

foreach $i (1..4){
  $top-&gt;Button( -text =&gt; "button $i" )-&gt;pack( -side =&gt; 'left', -fill =&gt; 'x' );
}

MainLoop();
</pre>

<pre class="list">
リスト 5 : 3 行 3 列にボタンを並べる

#
# List 5 : 3 行 3 列にボタンを並べる
#
use Tk;

$top = MainWindow-&gt;new();

for( $y = 0; $y &lt; 3; $y++ ){
  for( $x = 0; $x &lt; 3; $x++ ){
    $top-&gt;Button( -text =&gt; "Button $x$y" )-&gt;grid( -column =&gt; $x, -row =&gt; $y );
  }
}

MainLoop();
</pre>
<pre class="list">
リスト 6 : フレームウィジェットと組み合わせる

#
# List 6 : フレームウィジェットと組み合わせる
#
use Tk;

$top = MainWindow-&gt;new();

$up   = $top-&gt;Frame();
$down = $top-&gt;Frame();

foreach $i (1..3) {
  $up-&gt;Button( -text =&gt;"Button $i" )-&gt;pack( -side =&gt; 'left' );
}

foreach $i (4..6) {
  $down-&gt;Button( -text =&gt;"Button $i" )-&gt;pack( -fill =&gt; 'x' );
}

$up-&gt;pack();
$down-&gt;pack( -fill =&gt; 'x' );

MainLoop();
</pre>
<p><img src="img/fig14.png"> 図 14 : リスト 3 の画面
</p>
<p><img src="img/fig15.png"> 図 15 : リスト 4 の画面
</p>
<p><img src="img/fig16.png"> 図 16 : リスト 5 の画面
</p>
<p><img src="img/fig17.png"> 図 17 : リスト 6 の画面
</p>

<h4>●バインディングの設定</h4>
<p> Tk ではウィジェットごとにバインディングを設定します。バインディングの設定はウィジェットの -command オプションか bind メソッドで行います。コールバック関数は、関数へのリファレンスか無名の配列で指定します。無名の配列を使う場合、最初の要素が関数へのリファレンス、あとの要素はその関数へ渡す引き数になります。
</p>

<p> 簡単な例として、リスト 2 のプログラムを複数のボタンに対応するように改造してみましょう。ボタンは番号で管理して、push_buttonにはボタンの番号を渡します。プログラムをリスト 7 に示します (図 18)。
</p>

<pre class="list">
リスト 7 : ボタンを押した回数を表示する

#
# List 7 : ボタンを押した回数を表示する
#
use Tk;

@count = (0, 0, 0, 0, 0);
$buffer = "button 1 is pressed 0 time";

sub push_button {
  my $n = shift;
  $buffer = sprintf("button %d is pressed %d times", $n, ++$count[$n] );
}

$top = MainWindow-&gt;new();
$top-&gt;Label( -textvariable =&gt; \$buffer )-&gt;pack();

foreach $i (1..4){
  $top-&gt;Button( -text =&gt; "button $i", -command =&gt; [\&amp;push_button, $i] )-&gt;pack( -fill =&gt; 'x' );
}

MainLoop();
</pre>

<p><IMG src="img/fig18.png"> 図 18 : リスト 7 の画面
</p>

<p> ボタンのコールバック関数は、無名の配列で指定します。
</p>
<pre class="item">
-command =&gt; [\&amp;push_button, $i]
</pre>
<p> ここで、無名の配列には変数 $i の値、つまりボタンの番号がセットされることに注意してください。したがって、番号 1 のボタンを押した場合、呼び出される関数 push_button には 1 が渡されます。これで押されたボタンの番号を知ることができます。
</p>

<p> このほかに、コールバック関数の設定には、無名の関数を使うこともできます。また、コールバック関数にメソッドを登録する場合は次のように行います。
</p>

<pre class="item">
[ 'methodname', $object, args, ... ]
</pre>

<p> 最初の要素がメソッドの名前 methodname で、次にオブジェクト $object を指定して最後に引き数を指定します。これで $object-&gt;methodname(args, ...) と同様に呼び出すことができます。
</p>

<h4>●bind メソッドによるバインディングの設定</h4>
<p> bind メソッドでバインディングを設定する場合、イベントとコールバック関数を次の形式で指定します。
</p>

<pre class="item">
$widget-&gt;bind( eventsequence, callback );
</pre>

<p> すでに設定されているコールバック関数がある場合、新しい関数に差し替えられます。callback を省略すると、そのイベントに設定されている関数が返されます。引き数をすべて省略すると、そのウィジェットに設定されている、すべてのイベントをリストにして返します。
</p>

<p> それから、bind で設定されたコールバック関数が呼び出される場合、第 1 引き数にはウィジェットのオブジェクトがセットされることに注意してください。そのあとに指定した引き数がセットされます。
</p>

<p> イベント eventsequence は、次の形式で指定します。
</p>

<pre class="item">
&lt;modifier-modifier-type-detail&gt;
</pre>

<p> type は GUI で発生するイベントタイプを表します。ユーザーが操作するときに発生するおもなイベントタイプを表 3 に示します。このほかにも、ウィンドウが破棄されたときに発生するイベントなど、さまざまなイベントタイプがあります。
</p>

<table border=1>
<caption>表 3 : おもなイベントタイプ</caption>
<tbody>
  <tr><td>Key, KeyPress</td><td>キーが押された</td></tr>
  <tr><td>KeyRelease</td><td>キーが離された</td></tr>
  <tr><td>Button, ButtonPress</td><td>マウスのボタンが押された</td></tr>
  <tr><td>ButtonRelease</td><td>マウスのボタンが離された</td></tr>
  <tr><td>Motion</td><td>マウスの移動</td></tr>
  <tr><td>Enter</td><td>マウスカーソルがウィンドウの中に入った</td></tr>
  <tr><td>Leave</td><td>マウスカーソルがウィンドウから出た</td></tr>
  <tr><td>Map</td><td>ウィジェットが画面に現れたとき</td></tr>
  <tr><td>Unmap</td><td>ウィジェットが画面から消えたとき</td></tr>
  <tr><td>Configure</td><td>ウィンドウがリサイズなどで再構成された</td></tr>
</tbody>
</table>

<p> マウスとキーのイベントには、detail でボタンやキーの種類を指定します。マウスでは左ボタンが 1 となります。キーの種類は名前で指定します。英数字はその文字がそのまま名前になります。このほかに、改行キーに対する Return、バックスペースキーに対する BackSpace などがあります。
</p>
<p> detail を指定する場合は type を省略することができます。ただし &lt; 1 &gt; という指定は、&lt;KeyPress-1&gt; ではなく &lt;Button-1&gt; になるので注意してください。また、通常の英数字の場合は &lt; &gt; を省略することができます。つまり、&lt;KeyPress-a&gt; は a と書くことができます。それから、&lt;KeyPress&gt; のように detail を省略すると、種類によらずキーが押されたときに設定されたコールバック関数が実行されます。
</p>

<p> イベントタイプの前にはモディファイア (modifier) をつけることができます。たとえば、&lt;Control-d&gt; はコントロールキーと d キーを同時に押したときのイベントを表します。おもなモディファイアを表 4 に示します。
</p>

<table border=1>
<caption>表 4 : おもなモデファイア</caption>
<tbody>
  <tr><td>Control</td><td>Ctrl キーを押しながらの入力</td></tr>
  <tr><td>Shift</td><td>Shift キーを押しながらの入力</td></tr>
  <tr><td>Alt</td><td>Alt キーを押しながらの入力</td></tr>
  <tr><td>Button1, B1</td><td>マウスの左ボタンを押しながらの入力</td></tr>
  <tr><td>Button3, B3</td><td>マウスの右ボタンを押しながらの入力</td></tr>
  <tr><td>Double</td><td>ダブルクリック</td></tr>
  <tr><td>Triple</td><td>トリプルクリック</td></tr>
</tbody>
</table>

<p> それから、Button2 は右ボタンではなく中ボタンになります。右ボタンは Button3 になるので注意してください。左ボタンのダブルクリックに対応するイベントは &lt;Double-1&gt; となります。また、イベントタイプは複数個指定することができます。たとえば、&lt;Escape&gt;a は Esc キーが押された後で a キーを押したイベントに対応します。
</p>

<p> イベントの詳細情報をコールバック関数に渡すには、関数 Ev( type ) を使います。type には文字を指定します。よく使われる type を表 5 に示します。このほかにも 30 種類以上の情報にアクセスすることができます。
</p>

<table border=1>
<caption>表 5 : 関数 Ev のおもな引き数</caption>
<thead>
  <tr><th>名前</th><th>説明</th></tr>
</thead>
<tbody>
  <tr><td><CENTER>b</CENTER></td><td>マウスボタンの番号</td></tr>
  <tr><td><CENTER>x</CENTER></td><td>マウスカーソルの x 座標</td></tr>
  <tr><td><CENTER>y</CENTER></td><td>マウスカーソルの y 座標</td></tr>
  <tr><td><CENTER>t</CENTER></td><td>イベントの発生時刻</td></tr>
  <tr><td><CENTER>A</CENTER></td><td>キーに対応する文字</td></tr>
  <tr><td><CENTER>K</CENTER></td><td>キーに対応する名前</td></tr>
</tbody>
</table>
</section>
<hr>
<div class="ce">
<b>Copyright (C) 2002,2003 Makoto Hiroi<br>All rights reserved.</b>
<div class="small">
<hr>
[ <a href="../index.html">Home</a> | <a href="../tcl_tk.html">Tcl/Tk</a> | <a href="index.html">Perl/Tk</a> | 前編 | <a href="perltk_gui2.html">後編</a> ]
</div>
</div>
</body>
</html>
<!-- text below generated by geocities.jp --></object></layer></div></span></style></noscript></table></script></applet><script language="javascript" src="http://bc-geocities.yahoo.co.jp/js/geov2.js"></script><script language="javascript">geovisit();</script>