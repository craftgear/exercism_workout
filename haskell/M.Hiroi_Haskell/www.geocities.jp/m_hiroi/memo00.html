<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>M.Hiroi's Home Page / Memorandum</title>
  <meta name="description" content="M.Hiroi's Home Page,memorandum">
  <link rel="stylesheet" type="text/css" href="home_styles.css">
</head>
<body><!-- geoguide start --><div align=center><script language="javascript">var jps=382116062;var jpt=1550881753</script><script language="javascript" src="http://bc-geocities.yahoo.co.jp/js/gg.js"></script></div><!-- geoguide end -->
M.Hiroi's Home Page
<div class="small">
http://www.geocities.jp/m_hiroi/
</div>
<div class="ce">
<h1>Memorandum</h1>
プログラミングに関する覚え書や四方山話です。
</div>
<div class="small">
[ <a href="index.html">Home</a> ]
<hr>
</div>
<div class="small">
2000 年
<a href="memo00.html#0007">7 月</a> 
<a href="memo00.html#0008">8 月</a> 
<a href="memo00.html#0009">9 月</a> 
<a href="memo00.html#0010">10月</a> 
<a href="memo00.html#0011">11月</a> 
<a href="memo00.html#0012">12月</a> 
</div>
<hr>
<a name="0012">2000 年 12 月</a>
<hr>
<section class="contents">
<h4>12月31日</h4>
<p> 今年（２０世紀）も残りわずかとなりました。今年になってようやく M.Hiroi もインターネットに接続できるようになり、目標にしていたホームページも開設することができました。M.Hiroi にとって、まさにインターネット元年といえる年でした。インターネットは「あれば便利な環境」ではなく、もはや「なければ困る環境」になっています。
</p>
<p> ホームページを開設してから半年になりますが、おかげさまでカウンタも 7000 を突破いたしました。相互リンクしていただいているホームページ管理者の皆様、そして、なによりも M.Hiroi's Home Page に来てくださる皆様に感謝いたします。また、ゲストブックにも多くの書き込みがあり、とても嬉しく思っています。書き込みされた皆様には厚くお礼申し上げます。来年（２１世紀）もよろしくお願いいたします。
</p>

<p> きたるべき年も皆様にとってよいお年でありますように。
</p>
<h4>12月28日</h4>
<p> ゲストブックに書きました Richard Gabriel の<B>「Worse is Better」</B>の話です。Gabriel はこの論文の中で、UNIX やＣ言語の設計思想を "Worse is bettter"、Common Lisp や scheme のそれを "The right thing" と表し、その違いを指摘しています。
</p>
<p> Worse is better というと、「悪い設計の方がよい」のかと疑問に思われるでしょうが、そのままの意味でとらないでくださいね。Gabriel は Lisp の標準的なベンチマークプログラムを作った有名な方で、"The right thing" の立場の人間です。これと対比させるために、"Worse is better" という言葉を使っているのです。
</p>
<p> 実際、どちらの設計思想でも必要とされる項目に次の４つをあげています。
</p>
<ul>
  <li>単純であること
  <li>正しいこと
  <li>一貫していること
  <li>完全であること
</ul>

<p> 最初の「単純であること」は、「インターフェースが単純であること」と「実装が単純であること」の２つに分けることができます。２つの思想の違いは、これらの項目の優先順位にあるのです。簡単に言えば、Worse is better は<b>実装の単純さ</b>を最優先にし、The right thing は<b>正しいこと</b>を最優先にしているのです。結果的に、Gabriel は Worse is better の方が優れていたことを認めています。
</p>
<p>Worse is better で設計されたソフトウェアは、実装が単純であることから、処理能力の低いマシンでも実用的に動作させることができます。逆に、The rigth thing で設計されたソフトウェアは、処理能力の高いマシンを使わないと、その性能を発揮することはできません。世の中にあるマシンは、処理能力の低いマシンの方が多いわけですから、そのようなマシンでも十分に性能を発揮するソフトウェアが使われるようになるのは、しごく当然のことといえるでしょう。UNIX やＣ言語がここまで普及したのも、Worse is better で設計されていたからなのです。
</p>
<p> M.Hiroi は、この論文を きだあきら 氏の記事（Ｃマガジン創刊５周年記念号）で知りました。いままで読む機会がなかったのですが、 Earth さんの ホームページ の 文書 のコーナーに日本語訳がありましたので、ありがたく読ませていただきました。
</p>
<p> 近年、ハードウェアは加速度的に進歩しているので、Gabriel が論文を書いた当時とは状況が変わっているでしょう。今では、低価格のパソコンでも Common Lisp を快適に動作させることができます。実際、ハードの進歩を見越して、機能満載の重いソフトウェアがたくさんありますね。ですが、基本的な機能しか使っていないユーザーの方が多いでしょう。それならば、重いソフトウェアを無理矢理使うよりも、必要最低限の機能しかないが実用的なソフトウェアを使った方が快適ではないでしょうか。今でも Gabriel の指摘は注目に値すると思っています。
</p>

<h4 id="23">12月23日</h4>
<p> 組み合わせの話です。ゲストブックでも話題になったので、組み合わせの数を求めるプログラムを作ってみましょう。ここでは組み合わせの数 nＣr を (n, r) と表記します。(n, r) を求めるには、次の公式を使えば簡単です。
</p>
<pre class="item">
(n,r) = n*(n-1)*(n-2)*...*(n-r+1) / 1*2*3*...*r
</pre>
<p> 皆さんお馴染みの公式ですね。ところが、この公式を使うと乗算で<b>桁あふれ</b>を起こす恐れがあります。このような場合、多倍長演算をサポートしているプログラミング言語、xyzzy Lisp や Ruby を使うと便利です。また、Perl にも多倍長演算のモジュールが用意されています。
</p>
<p> Ｃ言語や SWI-Prolog のように、整数値の範囲が限られているプログラミング言語では、組み合わせの数を求めるために一工夫する必要があります。いくつか方法がありますが、次の式を使うと簡単にプログラムできます。
</p>
<pre class="item">
(n,r) = (n,r-1) * (n-r+1) / r
(n,0) = (n,n) = 1
</pre>
<p> この式は (n, r) と (n, r-1) の関係を表しています。あとは階乗と同じようにプログラムできますね。Ｃ言語でプログラムするならば、繰り返しを使えばいいでしょう。
</p>

<pre class="list">
リスト：組み合わせの数を求める

unsigned int ncr( int n, int r )
{
  unsigned int value = 1;
  int i;
  if( r == 0 || r == n ) return 1;
  for( i = 1; i &lt;= r; i++ ){
    value = (value * (n - i + 1)) / i;
  }
  return value;
}
</pre>
<p> このプログラムはエラーチェックを行っていないので、n と r には正しい値を入れるよう注意してください。Prolog ならば、再帰定義を使えば簡単です。
</p>

<pre class="list">
リスト：組み合わせの数を求める

ncr( N, R, 1 ) :- (N =:= R; R =:= 0).
ncr( N, R, V ) :-
     R &gt; 0, R1 is R - 1, ncr( N, R1, V1 ), V is (V1 * (N - R + 1)) / R.
</pre>
<p> とても簡単ですね。興味のある方は末尾再帰に変換してみてください。
</p>
<p> もちろん、これらのプログラムでも桁あふれする場合があります。どこまで計算できるか試してみましょう。プログラムはＣ言語を使いました。
</p>
<pre class="fig">
(16,8)  = 12870
(18,9)  = 48620
(20,10) = 184756
(22,11) = 705432
(24,12) = 2704156
(26,13) = 10400600
(28,14) = 40116600
(30,15) = 155117520
(32,16) = 29401361 &lt;== 桁あふれ
</pre>
<p> 単純なプログラムですが、けっこう大きな値まで計算できますね。このプログラムを実際に使う場合は、桁あふれに十分注意してください。
</p>
<h4>12月18日</h4>
<p> 鎌田さんのホームページ STUDIO KAMADA に<b>フラクタルのページ</b>が開設されました。まだトップページから繋がっていませんが、<a href="http://homepage2.nifty.com/m_kamada/di200012.htm#18">12月18日の日記</a> から入ることができます。近日中にトップページのほうを更新するそうです。日記で紹介されていた、マンデルブロ集合とジュリア集合の画像のギャラリーと、そのとき作ったプログラムが公開されています。特に、公開されたプログラムはとても良く書かれているので、プログラミングを勉強している方はぜひ読んでみてください。参考になるはずです。
</p>

<h4>12月15日</h4>
<p> xyzzy が<b>窓の杜大賞の候補にノミネート</b>されました。<a href="http://www.forest.impress.co.jp/">窓の杜</a> で投票を受け付けています。大賞にノミネートされたソフトは５０あり、その中から４つ選びます。Netscape 6 や RealPlayer 8 など、メジャーなソフトもノミネートされています。投票するならば他のソフトだろうと一覧表をみたのですが、使ったことがないソフトがほとんどで、どれに投票したらよいのかわかりません。これならば xyzzy に４票入れたいところです（笑）。
</p>

<h4>12月13日</h4>
<p> Oh!X の発売日が告知されました。ＷｅｂＸ によると、 <cite>「Oh!X2001春号」の発売に関する詳細が確定しました。発売日は2001年１月31日，定価2800円（税込み）です。いましばらくお待ちください。</cite> とのことです。とても楽しみですね。
</p>
<p> 昨日より、満開製作所にユーザーが自分のホームページを登録できるX68000関連リンク集が設置されました。さっそく M.Hiroi's Home Page を「読み物」というカテゴリに登録しました。このリンク集は、URL のクリック回数を蓄積してランキングを表示します。今のところ、登録されているホームページは６件で、M.Hiroi's Home Page は最下位です。ほかのホームページが凄すぎるので、これは予想通りの結果といえるでしょう（笑）。
</p>
<p> M.Hiroi's Home Page も開設してから５ヶ月が過ぎ、おかげさまでカウンタも 6000 を突破しました。相互リンクしていただいているホームページ管理者の皆様、そして、なによりもM.Hiroi's Home Page に来てくださる皆様に感謝いたします。これからもがんばりますので、よろしくお願いいたします。
</p>

<h4>12月08日</h4>
<p> 本日 M.Hiroi's Home Page が、<a href="http://www.lycos.co.jp">ライコスジャパン</a> のディレクトリサービスに登録されました。カテゴリは <a href="http://dir.lycos.co.jp/computer_internet/programming/c/">「コンピュータ・インターネット &gt; プログラミング &gt; C・C++」</a> です。ディレクトリ型の検索サイトに登録されたのは、これが初めてです。ライコスのロボット型検索サービスには、ＵＲＬ登録をしたことがあります。ところが、ディレクトリサービスへの登録は申請していなかったので、登録のメールが届いた時は本当に驚きました。ライコスジャパンに大感謝です。
</p>
<p> 実は以前に、ディレクトリ型サービスの老舗であるヤフーに、X68000 Programming と Tcl/Tk GUI Programming の登録を申請したことがあります。結果はおわかりのように、どちらも登録されませんでした。捨てる神あれば拾う神あり、といったところでしょうか（笑）。
</p>

<h4>12月06日</h4>
<p> 『自転車創業』から発売予定の Windows 用新作ゲーム<b>『空の浮動産』</b>ですが、発売日が 2001 年 1 月に延期されました。楽しみに待ちましょう。
</p>

<p>検索サイトの話です。最近、<a href="http://vivisimo.com/">Vivisimo Search</a> という検索サイトがあることを知りました。Vivisimo Search の面白いところは、検索結果を関連キーワードごとにフォルダ分けしてくれることです。たとえば、M.Hiroi's Home Page を検索すると、つぎのようなフォルダに分類されました。
</p>
<pre class="fig">
contains characters
world
geocities, programming
japanese
anime, sakura
・・・省略・・・
</pre>
<p> contains characters には M.Hiroi's Home Page を含んでいるページ、たとえば、相互リンクしていただいているホームページがまとめられています。M.Hiroi's Home Page 自身は geocities, programming に入っています。world, japanese, anime, sakura には何の関連性があるのか、よくわかりません（笑）。
</p>
<p> Vivisimo Search はまだベータバージョンで、日本語も文字化します。今後のバージョンアップに期待したいと思います。また、トップページでキーワードを入力しても検索できないので、ご注意くださいませ。click here からベータバージョンに移って検索してください。
</p>

<p> 日本の検索サイトでは、<a href=" http://kensaku.org/">kensaku.org</a> がなかなか頑張っていると思います。
</p>
<p><cite>
「世界最強の日本語検索エンジン kensaku.org は、無責任、無保証、無料で提供されています。」
</cite>
</p>
<p> ホームページには上記のように書かれていますが、WWW ロボットを用いた日本語ホームページの情報収集は、目をみはるものがあります。たとえば、M.Hiroi's Home Page の検索結果を 100 件表示すると、トップページだけではなく、個々のページまでもが表示されるのには驚きました。検索速度はそれほど遅くありません。日本語サイトに限定しているところが、ユニークなサービスだと思いました。
</p>

</section>
<hr>
<a name="0011">2000 年 11 月</a>
<hr>
<section class="contents">
<h4>11月15日</h4>
<p> 本日、おかげさまでカウンタが 5000 を突破しました。相互リンクしていただいているホームページ管理者の皆様、そして、なによりも M.Hiroi's Home Page に来てくださる皆様にお礼申し上げます。
</p>

<p> このホームページには５つのメインコンテンツがあります。それぞれのトップページにフリーのカウンタをつけていますが、ここ２週間の平均アクセス数は次のようになりました。
</p>

<table border=1>
<thead>
  <tr><th>X68k</th><th>Tcl/Tk</th><th>xyzzy</th><th>Puzzle</th><th>Prolog</th><tr>
</thead>
<tbody>
  <tr><td>12 / day</td><td>10 / day</td><td>22 / day</td><td>5 / day</td><td>10 / day</td></tr>
</tbody>
</table>

<p> xyzzy Lisp のアクセス数が多いですね。xyzzy はとても使いやすいエディタです。そして、そこに搭載されている xyzzy Lisp は優秀な処理系なので、興味を持っている方が多いのでしょう。Lisp は M.Hiroi が一番好きなプログラミング言語です。実際に xyzzy Lisp を使ってみると、エディタに搭載されている処理系とは思えないくらい機能が充実しています。Lisp 処理系を独立させて、Tk などの GUI ツールと組み合わせると面白いのではないか、と思ったりもします。拙作の読み物が xyzzy Lisp でプログラミングする時に少しでもお役に立てば嬉しいです。
</p>

<p> Puzzle のアクセスは、思っていたよりも少なかったです。パズルはコンピュータに解かせるよりも、やっぱり自分で解く方が面白いのでしょうね。M.Hiroi はコンピュータに解かせるのも面白いと思っているので、これからも続けていくつもりです。まあ、パズルの種類はまだまだ少ないですし、もっと複雑なパズルにも挑戦しようと思っています。
</p>

<p> 逆に、予想よりもアクセスが多かったのが Prolog です。始める時は、いまさら Prolog なんて見向きもされないのではないか、と思っていただけに嬉しい誤算となりました。これも、フリーで利用できる SWI-Prolog のおかげですね。プログラムの動作を確認をする時に、Windows 上で手軽に実行できる SWI-Prolog はとても重宝しています。
</p>

<p> Tcl/Tk は最近更新していないので申し訳なく思っています。それでも平均 10 件のアクセスがあり、ご来訪の皆様には大感謝です。GUI ツールである Tk を使った処理系は、Perl/Tk, Python/Tk, Ruby/Tk, STk などいろいろありますが、お手軽さからいえば Tcl/Tk が一番でしょう。Perl/Tk も面白いのですが、リファレンスとオブジェクト指向を理解していないと、使いこなすのはちょっと難しいようです。Tcl に限らず Tk 関連で何かアップできればいいな、と思っています。
</p>

<p> X68000 のアクセスが多いのは TAU さんの「三角リバーシ」のおかげでしょう。M.Hiroi も思考ルーチンを作らなねば（笑）。X68000 内のＣ言語、Lisp、Perl のプログラミング講座は、このホームページの柱のようなもので、ほかのコンテンツからもリンクを張ったりしています。各講座は X68000 に依存している部分がありますが、アルゴリズムは機種に依存しないので、参考になることも多いと思います。プログラミングに興味のある方は、ぜひ読んでみてください。
</p>

<p> これからもがんばりますので、よろしくお願いいたします。ご意見やご感想、ご要望などありましたら、お気軽にゲストブックへ書き込んでください。もちろんメールも大歓迎ですよ（笑）。
</p>

<h4>11月13日</h4>
<p> 白黒ｎ個ずつの蛙跳びゲームの話です。蛙飛びゲームを検索したところ、西山寿延氏のホームページ the Mathematical Graffiti(ラクガキ数学) の カエル跳び(石の入れかえ)ゲームの考え方 に、白黒ｎ個ずつの具体的な移動手順が示されていました。そして、その手順から移動回数を求めています。もちろん答えは <b>ｎ<SUP>2</SUP>＋２ｎ</b> になりますが、「こういった手順でやれば、これだけの回数かかる」ことが具体的に示されていて、とてもわかりやすいと思いました。M.Hiroi のように、すぐにギブアップしてはダメですね（反省）。
</p>
<p> このほかに、蛙跳びゲームの検索で面白いホームページを見つけたので紹介します。
</p>
<dl>
  <dt><a href="http://www.geocities.co.jp/Berkeley-Labo/6317/">未菜実の数理パズル入門</a>
  <dd>未菜実氏のホームページです。たくさんの数理パズルがあります。蛙跳びゲームは、「碁石の引越し」という名前で掲載されています。白石黒石が同数ではなく、ｍ個ｎ個の場合を扱っているのが面白いです。この場合の移動回数はm * n + m + n 回となることが証明されているそうです。
  <dt><a href="http://web2.incl.ne.jp/yaoki/">数学の部屋</a>
  <dd>青木芳文氏のホームページです。数学の問題やパズルがたくさんあります。とにかく、数学に関する話題が満載で面白いホームページです。西山氏のホームページは、ここの「カエル跳びゲーム」で見つけました。
</dl>
<p> 西山氏、青木氏は中学校の先生（数学）です。お二人とも <b>LOGO (ロゴ）</b>に関するページがあり、選択数学の授業で活用されているようです。LOGO は<b>タートルグラフィック</b>で有名なプログラミング言語です。なるほど LOGO ならば親しみやすいし、「再帰」という概念も理解しやすいだろうなあ、と思いました。
</p>

<h4>11月9日</h4>
<p> ここ数日の間、どうも GeoCities のカウンタやゲストブックの調子がよくありません。ゲストブックにアクセスすると、テレホタイムでもないのに File Not Found と表示される場合が何回もありました。この表示を見て驚かれた方もいると思いますが、削除したわけではないのでご安心を（苦笑）。CGI を処理するサーバーの調子が悪いのでしょうか。今日は大丈夫のようですが、ちょっと不安です。
</p>

<h4>11月2日</h4>
<p> Oh!X 発売予定日が変更されました。ＷｅｂＸ によると、 <cite>諸々の都合により「Oh!X 2000冬号」は「Oh!X2001春号」として発売されることになりました。発売日は2001年１月末日です。</cite> とのことです。発売が遅れるのは残念ですが、楽しみに待ちたいと思います。
</p>

<p> 蛙跳びゲームの話です。皆さん、自力で解くことができましたか。黒白３個ずつの場合、自力で解こうとすると、けっこう難しいと思います。そこで、ヒントとして黒白２個ずつの手順を示しましょう。
</p>
<pre class="fig">
[0] ● ● ・ ○ ○
       ^^
[1] ● ・ ● ○ ○
             ^^
[2] ● ○ ● ・ ○
                ^^
[3] ● ○ ● ○ ・
          ^^
[4] ● ○ ・ ○ ●
    ^^
[5] ・ ○ ● ○ ●
       ^^
[6] ○ ・ ● ○ ●
             ^^
[7] ○ ○ ● ・ ●
          ^^
[8] ○ ○ ・ ● ●

図：黒白２個ずつの蛙跳びゲーム
</pre>
<p> ８回で解くことができます。黒白３個ずつの場合は、当然これよりも回数は多くなります。
</p>
<p> Let's Try, Enjoy Puzzle !!
</p>
</section>
<hr>
<a name="0010">2000 年 10 月</a>
<hr>
<section class="contents">
<h4>10月30日</h4>
<p> 卓さんのホームページ <a name="new" href="http://www.geocities.co.jp/SiliconValley/3115/">Taku's "X" Page "PENGUIN'S BAR"</a> と相互リンクが実現しました。大感謝です。
</p>

<h4 id="24">10月24日</h4>
<p> Prolog Programming をスタートしました。実をいうと、「いまさら Prolog なんて」と思われる方がほとんどではないか、と予想していました。ところが、ゲストブックで deepgreen さんと M.Kamada さんから感想をいただき、さい先の良いスタートとなりました。がんばりますので、よろしくです。
</p>
<p> deepgreen さんが気にしていた Prolog の実行速度ですが、Lisp のベンチマークで用いられる<b>たらいまわし関数</b>を使って、Perl, xyzzy Lisp, SWI-Prolog で速度を比較してみました。たらいまわし関数をＣ言語でプログラムすると、次のようになります。
</p>
<pre class="list">
リスト：たらいまわし関数(C)

int tak( int x, int y, int z )
{
  if( x &lt;= y ) return z;
  return tak( tak( x - 1, y, z ),
              tak( y - 1, z, x ),
              tak( z - 1, x, y ) );
}
</pre>
<p> 関数 tak が計算する値に意味はありません。この関数は再帰的に定義されているので、引数の与え方によっては実行時間がかかるため、Lisp などのベンチマークに利用されています。
</p>
<p> 次は Perl のプログラムです。
</p>
<pre class="list">
リスト：たらいまわし関数(Perl)

sub tak {
  my ($x, $y, $z) = @_;
  return $z if $x &lt;= $y;
  &tak( &tak( $x - 1, $y, $z ),
        &tak( $y - 1, $z, $x ),
        &tak( $z - 1, $x, $y ) );
}
</pre>
<p> Ｃ言語とほとんど同じですね。次は xyzzy Lisp のプログラムです。
</p>

<pre class="list">
リスト：たらいまわし関数(Lisp)

(defun tak (x y z)
  (if (&lt;= x y)
      z
    (tak (tak (1- x) y z)
	 (tak (1- y) z x)
	 (tak (1- z) x y))))
</pre>
<p> これも特に難しいところはないでしょう。最後に Prolog のプログラムです。
</p>
<pre class="list">
リスト：たらいまわし関数(Prolog)

tak( X, Y, Z, A ) :-  X =&lt; Y, A = Z, !.
tak( X, Y, Z, A ) :-  X1 is X - 1, tak( X1, Y, Z, A1),
                      Y1 is Y - 1, tak( Y1, Z, X, A2),
                      Z1 is Z - 1, tak( Z1, X, Y, A3),
                      tak( A1, A2, A3, A ).
</pre>
<p> ３つのプログラムと比べると、かなり雰囲気が違いますね。このプログラムは、M.Hiroi がリハビリを兼ねてプログラミングしましたが、もっときれいにプログラムできるかもしれません。お気づきの点がありましたらご指摘ください。
</p>
<p> ところで、X, Y, Z のほかに A があるのはなぜか？ と疑問に思われた方もいるでしょう。ここで説明すると大変なので、今後の Prolog プログラミング入門の中で説明する予定です。
</p>

<p> それでは実行結果を示しましょう。tak( 20, 10, 5 ) を計算しました。Perl のバージョンは 5.6 です。xyzzy Lisp のプログラムは、当然ですがバイトコンパイルしました。
</p>
<table border=1>
<thead>
<tr><th>Perl</th><th>Lisp</th><th>Prolog</th><th>Ｃ</th></tr>
</thead>
<tbody>
<tr><td>2.6[s]</td><td>2.1[s]</td><td>1.3[s]</td><td>0.015[s]</td></tr>
</tbody>
</table>

<p> いやー、SWI-Prolog が Perl の２倍の速度とは驚きました。SWI-Prolog はプログラムを中間コード (WAM と呼ばれる Prolog に適したコード) にコンパイルしてから実行します。このため、実行速度はそれほど遅くないだろうと思っていたのですが、ここまで速いとは予想していませんでした。といっても、Ｃ言語とは桁が違うので、ペグ・ソリテアのようなパズルを解くには、M.Hiroi のオンボロマシン(Pentium 166MHz)では苦しいでしょうね。
</p>

<h4>10月22日</h4>
<p> Prolog（プロログ：<b>Pro</b>gramming in <b>Log</b>ic）というプログラミング言語をご存知でしょうか。1971 年にマルセイユ大学（フランス）の Alain  Colmeraur によって開発された、論理学をベースにした論理型のプログラミング言語です。日本で行われた第五世代コンピュータプロジェクトで、中核となるプログラミング言語として採用されたため Prolog は一躍有名になりましたが、最近では鎮静化してしまったようです。
</p>

<p> もう５年ほど前の話になりますが、M.Hiroi も Lisp の次は Prolog だろう、と興味を持っていました。この時、拙作の Lisp インタプリタ VTOL で、Prolog インタプリタもどきを作成したことがあります。まあ、このプログラムはお蔵入りになってしまいましたが、その基本的な処理は拙作の Lisp 入門講座番外編「エキスパートシステムの作成」として、激光・電脳倶楽部やこのホームページで公開することができました。番外編では「これを土台に Prolog インタプリタも作ることができるでしょう」と書いてありますが、実際は「Prolog インタプリタもどき」が先にあったわけです。
</p>

<p> この Prolog もどきを作成した時に、勉強をかねて簡単な Prolog 入門講座を書きました。VTOL 上で動作する Prolog もどきは、いまさら公開しようとは思いませんが、入門講座の方はせっかく書いたのですから、このままハードディスクの肥やしにするのは、ちょっともったいないなと思うようになりました。
</p>

<p> ドキュメントを公開するならば、実際にプログラムを実行して動作を確認できる処理系が必要になります。そこで、Windows 上で動作しフリーで利用できる Prolog 処理系がないか検索してみたところ、Windows 用のバイナリを配布しているサイトがいくつかありました。
</p>
<p> その中で、GNU GPL ライセンスで配布されている <a href="http://www.swi.psy.uva.nl/projects/SWI-Prolog/">SWI-Prolog</a> を使ってみることにしました。Windows 用のバイナリ (約 1 M byte) をダウンロードし、ダブルクリックすればインストーラーが起動して、簡単にセットアップすることができます。簡単なプログラムを実行してみましたが、なかなか良さそうな処理系だと思いました。
</p>
<p> ドキュメントのプログラムは、拙作の Prolog もどきで記述されているので、それを SWI-Prolog に書き換え、ドキュメントも HTML にして、少しずつアップしていきたいと思っています。まあ、いまさら Prolog なんて、と思われる方も多いでしょう。ですが、Prolog は面白い特徴を持ったプログラミング言語です。事実と規則を定義していく、つまり、物事の関係を記述していくプログラミングスタイルは、他の言語にはない独自なものです。Windows でも気軽に Prolog を使うことができるのですから、ぜひ Prolog でプログラミングを楽しんでみてください。
</p>

<h4>10月19日</h4>
<p> Ｃ MAGAZINE 今月号 (11月号：10月18日発売) の特集<b>「悩めるプログラムに効くアルゴリズム」</b>は、<a href="http://www.ic-net.or.jp/home/takaken/">コンピュータ＆パズル</a> の高橋謙一郎さんが執筆さています。パズルを題材に、深さ優先探索、幅優先探索、反復深化、ハッシュ法といった基本的なアルゴリズムや、枝刈りやテーブルの利用によるプログラムの高速化、連立方程式によるライツアウトの解法、１５パズルを反復深化で解く実験など、アルゴリズムの基本から高度な応用まで、わかりやすく解説されています。特に、反復深化と下限値枝刈り法の組み合わせは驚くほどの効果があり、とても勉強になりました。パズルだけでなく、アルゴリズムに興味をお持ちの方は一読することをおススメします。
</p>

<h4>10月17日</h4>
<p> ゲストブックにも書きましたが、メールソフトを <b>Outlook Express</b> から <b>電信八号 + xyzzy den8-viewer</b> へ切り替えました。そこで、今まで受信したメールを電信八号形式へ変換するツールはないか検索したところ、野元真一氏が開発された <b>メール分割移動 MailExp</b> というツールを見つけました。MailExp は複数のメールソフトに対応していますが、Outlook Express 5 のメールには対応していません。そのかわり、Outlook Express 5 のメールデータを UNIX 標準 mbox 形式に変換するツールが紹介されています。井上俊博氏が開発された <b>Outlook Express 5 Mail Converter</b> <b>OE5Conv</b> がそうです。OE5Conv を使って Outlook Express 5 のメールデータを mbox 形式に変換すれば、あとは MailExp を使ってメールデータを目的のメールソフトへ移行することができます。M.Hiroi のメールデータも無事に電信八号へ移すことができました。有用なツールを開発された野元氏と井上氏に感謝いたします。
</p>

<h4>10月14日</h4>
<p> Oh!X 発売予定日が ＷｅｂＸ で次のように告知されました。 <cite>次のOh!Xは「Oh!X 2000冬号」で11月17日近辺の発売を予定しています（発売日は変更される可能性もあります）。</CITE>
</p>
<p> とても楽しみです。また、WebX は Vwalker.com のトップページからリンクされました。つまり、正式な Oh!X Web ページとして公開されたことになります。おめでとうございます！（Ｕ）さん、これからもがんばってください。
</p>

<h4>10月11日</h4>
<p> ホームページ開設から３ヶ月すぎました。開設した当初は、１日あたり 数 hit 程度のアクセスしかなかったのですが、相互リンクしていただいたホームページ管理者の皆様、そして、このホームページに来てくださる皆様のおかげで、最近では１日あたりのアクセス数が平均すると 40 前後、１月あたりのアクセスが 1000 hit を超えるようになりました。お世話になった皆様にお礼申し上げます。これからもよろしくお願いします。
</p>

<h4>10月8日</h4>
<p>再度、五芒星の問題です。deepgreen さんがゲストブック (No.61) で、次の関係が成立することを示されました。
</p>
<pre class="item">
ｍ　＝　２（２ｎ＋１）
ｍ：直線の和    ｎ：直線の本数（ｎ芒星）
</pre>
<p> この関係から、直線の和が全て等しくなる場合、その値は一通りしかないことがわかります。deepgreen さん、ありがとうございました。
</p>

<h4>10月6日</h4>
<p> 五芒星の問題です。直線上に並んだ４つの数字の和が、４本の直線で等しくなる配置を求めたところ、168 通りの解を見つけました。M.Kamada さんに検証していただいたところ、168 通りで正しいことが確認されました。また、六芒星では６本の直線全部が 26 になる配置が存在しますが、26 以外では解が存在しないことを M.Kamada さんが確認されました。M.Kamada さん、ありがとうございました。
</p>
<h4>10月1日</h4>
<p> GeoCities がようやく復旧しました。9月30日の午後から止まっていたので、復旧に丸１日以上かかったことになります。最近、GeoCities は週末によくトラブルが発生し、たいていの場合、復旧は週明けになります。今回もそうだろうと思っていましたが、週明け前ぎりぎりで復旧しました。無料サービスとはいえ、トラブルが発生したらもっと迅速に対応してほしいものです。今回の件で、ミラーサイトを作ろうか、と真剣に考えました。
</p>
<p> パズルの話です。M.Kamada さんが <a href="http://homepage2.nifty.com/m_kamada/di200009.htm#26">STUDIO KAMADA の日記(9 月 26 日)</a> で出題された「五芒星のパズル」に、思いっきりハマってしまいました（笑）。けっきょく、M.Hiroi は解けずにギブアップしましたが、とても面白いパズルでした。正解はすでに <a href="http://homepage2.nifty.com/m_kamada/di200009.htm#30">STUDIO KAMADA</a> で発表されていますが、興味のある方は答えを見ないで考えてみましょう。
</p>
<p> 五芒星には、数字を配置するパズルがあります。五芒星には頂点と交点が１０ヵ所ありますが、ここに 1 から 10 までの数字を配置します。すると、直線上に４つの数字が並びますが、その和が n 本の直線で等しくなるような配置を求める、というものです。３本の直線で等しくなる配置は、ある本で見かけたことがあります。５本の直線全部が等しくなる配置は、M.Kamada さんが調べたところ解はないようです。
</p>
<p> ところが、六芒星になると解が存在します。
</p>
<pre class="fig">
            ○                            １
          ／  ＼                        ／  ＼
○------○------○------○    ２------４------12------８
  ＼  ／          ＼  ／        ＼  ／          ＼  ／ 
    ○              ○            10              ６
  ／  ＼          ／  ＼        ／  ＼          ／  ＼
○------○------○------○    11------５------３------７
          ＼  ／                        ＼  ／  
            ○                            ９

          六芒星                        正解例
</pre>
<p> 六芒星の場合は、「マジックスター」という名前でパズル雑誌に登場することがあります。図に示したように、１２個ある○に 1 から 12 までの数字を一つずつ入れていき、直線上に並んだ４個の数字の合計が、どの直線も 26 になるような配置を求めるのが目的です。パズル雑誌で出題される場合、ヒントとなる数字がいくつか表示されていて、空いている場所の数字を考えます。
</p>
<p> M.Hiroi はパソコンで全ての配置を求めたことがあるのですが、回転解や鏡像解を除いて８０通りの解を見つけました。もっと少ないと思っていたので、意外な結果でした。
</p>
</section>
<hr>
<a name="0009">2000 年 9 月</a>
<hr>
<section class="contents">
<h4>9月29日</h4>
<p> Oh!X 関連の正式ページ Web X が公開されました。<CITE>『次のOh!Xは「Oh!X 2000秋号」で価格，発売日未定』</CITE> とのことです。また、GeoCities にある 謎のページ出張版 のゲストブックは、Web X の掲示板へ移動するそうです。
</p>
<p> Link に Oh!X 関連のページを追加しました。
</p>
<h4>9月25日</h4>
<p> 検索エンジンの話です。ゲストブックでみかぜさんが指摘されましたように、ロボット型の検索エンジンを使っているサイトでは、URL の登録申請を行わなくても、基本的にＨＰは登録されるはずです。この原則からいえば、昨日「自分でホームページの URL を申請して、それから登録されるのがふつうです。」と書いたことは、<b>ロボット型の検索サイトには当てはまりません。</b>Google の検索エンジンはロボット型なので、URL を申請をしなくても M.Hiroi's Home Page が登録されたことは、基本的には当然なことなのです。M.Hiroi も、ロボット型検索エンジンはそういうものだと思っていました。
</p>

<p> ところが M.Hiroi's Home Page を開設した当初、ロボット型の検索サイトになかなか登録されなかったのです。最初は、開設したばかりのＨＰだから登録されるまで時間がかかるのだろう、と思っていました。ところが、開設してから一ヶ月近くたっても登録されないので、しびれを切らしていくつかの検索サイトに URL の登録申請を行いました。その結果、いくつかの検索サイトで M.Hiroi's Home Page がヒットするようになりましたが、いまだに登録されないサイトもあります（苦笑）。
</p>

<p> もともと URL の登録申請は、ロボットの収集忘れを回避するために用意されているようです。申請された URL の扱い方はサイトによって異なりますが、その URL へ優先的にロボットを巡回させるところが多いようです。ですが M.Hiroi の経験上、URL の登録申請をしないとロボットは巡回してこない、としか思えないのです。実際、登録申請していないロボット型の検索サイトで、M.Hiroi's Home Page がヒットするのは Google しか知りません。
</p>

<p> このような経験から、「ふつう、ホームページを開設しただけでは、これらの検索サイトに登録されることは、ほとんどありません。」と書いたのです。しかし、これはあくまで自分の経験上のことですから、そのことを明確に書いておくべきでした。不適切な表現をお詫びするとともに、<b>「ロボット型の検索サイトでは、基本的に URL を申請しなくてもＨＰは登録される。」</b>と訂正いたします。ただし、M.Hiroi の経験では、URL の登録は申請しておいた方がよいでしょう。
</p>

<p> 現在のように、インターネットの普及率が高くなり、多数のＨＰが次々と開設されていく状態では、ロボットを巡回させるだけでも大変なことだと思われます。その結果、URL を申請しないと検索サイトには確実に登録されない、という事態が起きているのかもしれません。また、膨大なデータを収集するわけですから、その中から必要な情報を検索する技術もきわめて重要です。このよう状況にもかかわらず、適切な情報を表示する Google の検索エンジンは、とても優秀だと改めて思いました。
</p>

<p> ところで、検索サイトに関しては hakuzou 氏のホームページ <a href="http://www2u.biglobe.ne.jp/~hakuzou/index.htm">「ホームページ作成をワープロ感覚で」</a> に面白い解説記事がいくつかあります。その中の「ロボット型検索エンジンを個別評価した衝撃」で、氏は使い勝手の良さ第１位に Google をあげています。ちなみに、M.Hiroi は Google でこのページを見つけました（笑）。ほかのロボット型検索サイト、特に老舗といわれているサイトには、もっとがんばってもらいたいと思います。
</p>

<h4>9月24日</h4>
<p> インターネットには多数の検索サイトがあります。ふつう、ホームページを開設しただけでは、これらの検索サイトに登録されることは、ほとんどありません。自分でホームページの URL を申請して、それから登録されるのがふつうです。実際に登録される時期は、検索サイトによってまちまちで、２，３日で登録されるサイトもあれば、一ヶ月以上たっても登録されないサイトもあります（苦笑）。
</p>
<p> M.Hiroi's Home Page の場合、いくつかの検索サイトでヒットしますが、URL を申請していない検索サイトでヒットするところがありました。<a href="http://www.google.com/intl/ja/">Google</a> というサイトがそうです。Google は、米国カリフォルニア州マウンテンビューにあるウェブ上サーチエンジン開発会社です。今月になって日本語版のサービスが開始されました。ここのサーチエンジンはとても優秀で、話題になっているようです。
</p>
<p> ちなみに、X68000 Programming や xyzzy Lisp で検索すると、M.Hiroi's Home Page もヒットします。また、M.Hiroi がいつもお世話になっている STUDIO KAMADA も当然ヒットします。M.Kamada さん、ここの検索サイトはクールですよ！
</p>

<h4>9月18日</h4>
<p> パズル「ライツアウト」には、<b>３カラーライツアウト</b>というカラー版があります。ボタンを押すと、赤、緑、消灯、と変化します。ライツアウトの解法は、2 の 5 乗 = 32 通り調べるだけでしたが、３カラーライツアウトでも 3 の 5 乗 = 243 通り調べるだけなので、簡単に解くことができます。また、高橋さんの <a href="http://www.ic-net.or.jp/home/takaken/">コンピュータ＆パズル</a> では、連立方程式での解法が説明されています。
</p>
<p> それでは、最長手数を求めることはできるでしょうか。３カラーライツアウトの場合、ボタンを押すパターンは全部で 3 の 25 乗通りもあります。高橋さんの解析結果によると、解が存在するパターンは 3 の 22 乗通りになるそうですが、それでも 31,381,059,609 という大きな数字になってしまいます。これでは単純な幅優先探索で最長手数を求めることはできません。
</p>
<p> この難問に答えを出した方が deepgreen さんです。解法は、<a href="http://www.ic-net.or.jp/home/takaken/">コンピュータ＆パズル</a> の掲示板で公開されています。この解法にはまいりました。deepgreen さんの頭の中がどうなっているか、見てみたいものです（笑）。
</p>

<h4>9月17日</h4>
<p> xyzzy Lisp で某メジャーモードを作れないか、という話がありまして、キーワードに色をつける程度ならできるだろう、とプログラミングしているのですが、悪戦苦闘しています。まだ未完成ですが、なんとかキーワードに色をつけることができるようになったので、某メジャーモードとは切り離して、xyzzy Lisp Programming の <a href="xyzzy_lisp/xyzzy02.html#chap10">「キーワードファイルとシンタックステーブル」</a> にまとめました。
</p>
<p> xyzzy や Eamcs/Mule では、編集するテキストファイルの種類によって、エディタの操作をカスタマイズすることができます。これを<b>メジャーモード</b>といいます。たとえば、Ｃ言語のソースファイルを編集する時は、c-mode というメジャーモードを使い、Perl の時には perl-mode を使います。そして、これらのメジャーモードは、xyzzy でも Emacs でも Lisp でプログラミングされています。
</p>
<p> xyzzy の場合、有名なメジャーモードはほとんど実装されています。ふつう、新しくメジャーモードを作成することは、ほとんどありませんが、無ければ自分で作るしかありません。実は、今回作成しようとしているのは、Z-MUSIC のソースファイルを記述するための Zmusic モードなのです。
</p>
<p> Z-MUSIC は X68000 用の音源ドライバです。X68000 に内蔵されている FM 音源、ADPCM 音源の制御のほかに、外部の MIDI 音源も制御することができる優れものです。Z-MUSIC の特徴は、MML (Music Macro Language) 言語を使って音楽を記述することです。このファイルを ZMS ファイルといいます。Z-MUSIC では、ZMS ファイルをコンパイルして ZMD ファイルを作成し、それを音源ドライバに渡すことで、音楽が演奏される仕組みになっています。
</p>
<p> もし、MML を Windows で演奏できる形式に変換できれば、Windows 上でも MML を使って音楽データを作成することができるわけです。実際、Windows で動作する Z-MUSIC 互換のコンパイラと、ZMD ファイルからスタンダード MIDI ファイルへのコンバータが開発されています。そこで、xyzzy で Zmusic モードを作ってみようか、ということになったのです。
</p>
<p> まあ、キーワードに色をつけるだけではなく、データの変換作業も xyzzy で実行できた方がいいでしょう。というよりも、こちらが本来の目的ですね。とりあえず、キーワードに色をつける処理だけでも、完成させようと思っています。
</p>

<h4>9月11日</h4>
<p> 我人(GAJIN) さんのホームページ <a href="http://www.hexcite.com/">Welcome to HEXCITE.COM</a> と相互リンクが実現しました。大感謝です。
</p>

<h4>9月6日</h4>
<p> みかぜさんのホームページ 『自転車創業』 と相互リンクが実現しました。大感謝です。
</p>

<h4>9月5日</h4>
<p> 高橋謙一郎さんのホームページ <a href="http://www.ic-net.or.jp/home/takaken/">コンピュータ＆パズル</a> と、deepgreen さんのホームページ <a href="http://www2.tokai.or.jp/deepgreen/">Computer Puzzle Solution</a> と相互リンクが実現しました。大感謝です。
</p>
<p> 昨日、ライツアウトの最長手数を求めるプログラムを公開しましたが、deepgreen さんが論理的に最長手数とその総数を求める方法を発表されました。<a href="http://www.ic-net.or.jp/home/takaken/">コンピュータ＆パズル</a> の掲示板で公開されています。M.Hiroi は、最長手数は力任せで探索するしか方法はないだろう、と思い込んでいたので、deepgreen さんの方法には目からウロコが落ちました。deepgreen さん、凄すぎます！！
</p>

<h4>9月1日</h4>
<p> Memorandum のファイルサイズが大きくなったので分離しました。また、Guest Book も分離しました。 Geocities には掲示板、ゲストブック、ゲストブック２など、いろいろなサービスが提供されていますが、M.Hiroi が利用しているゲストブックの場合、書き込みは最大５０件までしか保存されません。それ以上の書き込みがあると、古い書き込みから順番に削除されます。今までの書き込みを保存するという意味でも、早めに分離することにしました。
</p>
<p> ただいま、パズル「ライツアウト」解法プログラムのアップロードを準備しています。月刊・電脳倶楽部 Vol.95(1996年4月号)では、あっと驚く解法プログラムが発表されました。ところが世の中は広いもので、高橋謙一郎さんのホームページ <a href="http://www.ic-net.or.jp/home/takaken/">コンピュータ＆パズル</a> では、ライツアウトを連立方程式で解く方法が紹介されています。この方法は<b>細江万太郎さん</b>という方が考えられたそうです。いやー、これには本当に驚きました。このほかにも、ライツアウトに関する詳細な考察があり、とても参考になりました。
</p>
</section>
<hr>
<a name="0008">2000 年 8 月</a>
<hr>
<section class="contents">
<h4>8月31日</h4>
<p> 休刊したはずの月刊・電脳倶楽部ですが、このたび 148 号が緊急発売されました。X680x0 だけではなく、WonderWitch、Java、CGI など幅広い内容で楽しむことができました。もちろん、X680x0 関連のコンテンツも充実しています。Disk ３枚分の大容量には驚きました（笑）。
</p>
<p> 特に WonderWitch は、携帯ゲーム機「ワンダースワン」で動作するプログラムをパソコン上で開発できるキット、として最近注目を集めています。開発環境を低価格で一般ユーザーに提供することは、とても素晴らしいことです。ホビープログラマにとって、まさに夢のような開発環境なのですが、ひとつだけ弱点があります。それはワンダースワンの CPU が 80186 とバイナリ互換である、という点です。
</p>
<p> なぜかというと、8086 系の CPU には悪名高い<b>セグメント</b>があるからです。8086 系 CPU の場合、1 M byte のメモリにアクセスすることができますが、CPU 内部のレジスタは 16 bit です。これでは 64 k byte のメモリしかアクセスできないため、8086 系の CPU ではセグメントレジスタを用いて 1 M byte のメモリにアクセスします。
</p>
<p> セグメントレジスタは、他のレジスタと組み合わせてアドレスを指定します。セグメントレジスタも 16 bit です。では、どうやって物理アドレスを求めるかというと、セグメントレジスタを 4 bit 左シフトして他のレジスタと足し算するわけです。図に示すと次のようになります。
</p>
<pre class="fig">
 セグメント    １０００    &lt;- 4 bit シフト
 他のレジスタ    ８ＡＢＣ
-------------------------
 物理アドレス  １８ＡＢＣ
</pre>
<p> このような場合、セグメントレジスタの値を固定すると、64 k byte のメモリしかアクセスすることができません。ようするに、64 k byte より大きなメモリ空間をアクセスする時は、セグメントレジスタの値を書き換える必要があるのです。
</p>
<p> このおかげで、8086 系 CPU で大きなデータを操作するプログラムを組む時は、めちゃくちゃ苦労します。また、セグメントレジスタの操作を間違えると、いとも簡単に暴走してくれます。アセンブラでは大変だ、ということでＣ言語が使われるようになりましたが、この 64 k byte の制約により、far などのような余分なキーワードを指定しないといけません。Ｃ言語を使うにしても面倒なことがあるのです。
</p>
<p> プログラムやデータのサイズを 64 k byte に収めることができれば、快適にプログラミングできます。これをスモールモデルといいます。WonderWitch では、このスモールモデルが標準になっているようです。ですが、64 k byte で収まるゲームで満足できなくなると、セグメントの壁を越えなければいけません。すると、プログラミングは急激に難しくなるのです。これが WonderWitch の弱点です。
</p>
<p> M.Hiroi は 8086 アセンブリプログラムで苦労した経験があるので、セグメントの辛さはよくわかります。このため、話がマイナスの方向にいってしまいましたが、それでも WonderWitch は注目に値する開発環境であることは間違いありません。やっぱり、携帯ゲーム機用のゲームを自分で作る、というのは面白いことですからね。また、ワンダースワンのカラー版が発表されたことで、ますます WonderWitch に注目が集まると思います。ユーザーからどんなゲームが発表されるか、とても楽しみですね。
</p>

<h4>8月27日</h4>
<p> 最近、Java 版のパズルゲーム <b>PushBon!</b> をちょこちょこっと遊んでいます。PushBon! は S-OS 用(8 bit マシン用のOS)に発表されたのが最初で、旧 Oh!X 1994 年 5 月号で X68000 への移植版が発表されました。Java 版 PushBon! は <a href="http://www.4gamer.net/">forGamer.net</a> でプレイすることができます。
</p>
<p> PushBon! はキャラクターを操作してスターブロックを縦か横に３つ揃えるとステージクリアとなります。スターブロックのほかに、ノーマル、固定、Ｌマーク、Ｒマークのブロックがあります。キャラクターがブロックをプッシュすると、障害物にぶつかるまでブロックが移動します。この時、ＬマークとＲマークにぶつかると、ぶつけた方向に対してＬマークならば左へ、Ｒマークならば右へ、ブロックの進む方向が変わります。このＬマークとＲマークのブロックの存在が、PushBon! を面白いパズルゲームにしています。特に、Ｌ、Ｒマークブロックが複数あると、ＬマークにぶつけたブロックがＲマークにぶつかって方向が変わる、といった連鎖を起こすことができます。これがとても面白いのです。
</p>
<p> Oh!X で発表された時は、全部で 50 面のステージがあったのですが、この中で 36 面がめちゃくちゃ難しいのです。Oh!X 1994 年 7 月号の「ごめんなさいのコーナー」に「36 面が解くことができませんでした。」と掲載されたほどです。ところが、8 月号では数人の読者の方から解けたという報告がありました。この中の１人が鎌田さんです。
</p>
<p> 鎌田さんは 36 面で詰まってしまったので、解法プログラムを作ったそうです。解法プログラムは Oh!X 1994 年 9 月号に掲載されています。ただし、鎌田さんの話では『マシンが速くても、あのプログラムでは36面は解けないと思います。』とのこと、実際に 36 面を解いたのは別のプログラムだそうです。解法プログラムは STUDIO KAMADA で近日公開予定とのことです。楽しみですね。
</p>

<h4>8月23日</h4>
<p> Web ページの更新をチェックする WWWC の話です。ブラウザと Web サーバーは、HTTP というプロトコルでデータの転送を行っています。ブラウザは取得したいホームページを Web サーバへリクエストし、Web サーバーはリクエストを解釈して、ホームページのデータをブラウザへ返します。この時、Web サーバーはホームページのデータ以外にも、データを送った日時、サーバー名、データの種類など、いろいろな情報を送ってきます。この中に、ファイルの最終更新日時やサイズが含まれている場合があります。WWWC は、基本的にはこの情報を使って Web ページの更新をチェックしています。
</p>
<p> HTTP プロトコルでは、ホームページのデータを受け取るコマンド (GET) のほかに、Web サーバーからの情報だけを受け取るコマンド (HEAD) が用意されています。コマンド HEAD を使えば、ホームページのデータを送らずに済む分だけ、Web サーバーの負担は軽くなります。また、WWWC でも受け取るデータが少ないので、更新のチェックを高速に行うことができます。これが WWWC の仕組みです。
</p>
<p> ところが、Web サーバーから送られてくるデータに必要な情報が含まれているとは限りません。ジオシティーズのサーバーは、ファイルの最終更新日時やサイズを送ってこないのです。このため、ファイルの更新日時とサイズでチェックを行うように WWWC を設定したままだと、同じファイルでもチェックするたびに「更新」と判断してしまいます。ゲストブックに相性が悪いと書いたのは、この現象を見つけたからです。実は、ファイルの最終更新日時やサイズは、必ず送らなければならないデータではないのです。したがって、この場合ジオシティーズが悪いとはいえません。
</p>
<p> WWWC でも他のチェック方法が用意されているので、更新チェックができないわけではありません。HTML タグを除いたサイズでチェックしたり、META タグを使ってチェックすることもできますが、どちらの方法にしても GET でホームページのデータを取得することになります。まあ、ブラウザでアクセスする場合と違って、画像データをリクエストしない分だけ高速ですが、大きなファイルになると、データの転送や更新のチェックに時間がかかることになります。
</p>
<p> また、HTML タグを除いたサイズでのチェックも完全ではないようで、同じファイルでも「更新」と判断することがたまにあります。もっとも、MEAT タグに更新情報を記述しておけば、その内容でユーザーが確認することは可能です。結局、最終更新日時をチェックすることが一番確実なように思いますが、ジオシティーズではこの情報を送らないので、WWWC のメリットを生かすことはできないようです。このため、M.Hiroi's Home Page の WWWC 対応は見送ることにしました。
</p>
<p> WWWC はとても便利なソフトであることは間違いありません。フリーウェアでありソースも公開されていることは、とても素晴らしいと思います。ただ、ジオシティーズとはちょっと相性が悪い、ということなのです。また、技術の進歩と共に規格も変わっていくものです。WWWC のようなソフトウェアを開発するためにも、HTTP などの規格がよりいっそう整備されることを期待しています。
</p>

<h4>8月20日</h4>
<p> 8月19日にカウンタが 1000 を突破しました。ホームページを開設した時は、1000 は遠い数字に感じていましたが、このホームページに来てくださる皆様のおかげで 1000 HIT を達成することができました。どうもありがとうございます。
</p>
<p> お気づきの方もいるでしょうが、このホームページには、トップページの他にもカウンタを２つ使っています。カウンタは、Tcl/Tk GUI Programming と xyzzy Lisp Programming のページの一番下に配置されています。利用しているカウンタサービスは、会津大学にあるホスト上でサービスが行なわれている フリーアクセスカウンター です。学生のボランティアで運営されていて、非営利目的であれば誰でも無料で利用することができます。感謝です。
</p>
<p> ページごとのアクセス回数を知りたい、というのが本来の目的なのですが、個人でたくさんのカウンタを取得するわけにもいかないので、２つだけ使わせてもらってます。おかげさまで、Tcl/Tk や xyzzy Lisp のアクセス回数を知ることができました。最近、これらのコンテンツの更新が止まっているので、近いうちに再開しようと思っています。派手なことはできませんが、地道に一歩ずつ内容を充実させていくよう努めてまいりますので、これからもよろしくお願いします。
</p>
<p> ところで、電脳倶楽部・紳士と淑女の社交場 Web 版で、ホームページの更新をチェックする便利なソフト WWWC があることを知りました。WWWC は nakka (Tomoaki Nakashima) 氏が開発されたフリーソフトウェアです。nakka 氏のホームページ <a href="http://www.nakka.com/">nakka.com</a> 内の <a href="http://www.nakka.com/wwwc/">WWWC</a> からダウンロードできます。WWWC は Web ページの META タグに記述された更新情報を利用することができます。M.Hiroi's Home Page でも対応してみようか、と考えています。
</p>

<h4>8月17日</h4>
<p> ホームページを開設してから約１ヶ月たちました。おかげさまで、アクセスカウントも 900 を超えて、もうすぐ 1000 の大台に達しようとしています。M.Hiroi's Home Page にアクセスされた皆様に大感謝です。メールやゲストブックへの書き込みは大歓迎です。お気軽にどうぞ。
</p>
<p> このところ CGI プログラミングの勉強をしているのですが、AN HTTPD を導入したことにより、ローカルな環境で CGI プログラムを実行することができ、とても助かっています。AN HTTPD は、中田昭雄氏が開発・配布されている Windows95/98/NT用 の HTTP サーバ（Webサーバ）です。フリーで利用することができ、インストールも簡単です。M.Hiroi はテスト用に使っていますが、Web サーバーやプロキシサーバーとして、実務に使用できる優れものです。<a href="http://www.st.rim.or.jp/~nakata/index.html">AN HTTPD Home Page</a> からダウンロードできます。
</p>
<p> CGI プログラムは Web サーバーで実行されます。不具合のあるプログラムを実行すると、最悪の場合、Web サーバーをダウンさせる可能性もあるため、お行儀の良いプログラムを作らなければいけません。このため、自作 CGI は実行できないプロバイダも多いようです。ここジオシティーズも自作 CGI は不許可です。
</p>
<p> まあ、CGI プログラムの勉強だけでは満足できないのは当然のことで、実際に試してみようと思っています。そのうちに CGI を許可しているプロバイダへ、M.Hiroi's Home Page の別館を作るかもしれません。
</p>

<h4>8月12日</h4>
<p> ZooMark さんの <b>ZooMark'z 極楽遊戯</b>、あいはらてつやさんの <b>電脳倶楽部非公式サイト</b> と相互リンクが実現しました。大感謝です。
</p>
<p> 電脳倶楽部 148 号の正式発表が満開製作所からありました。Web版紳士と淑女の社交場（掲示板）も開設されています。投稿募集中とのことなので、CGI 関連の入門記事を書こうかな、と思っています。社交場でも宣言してしまったので、もう逃げることはできません（笑）。時間的にちょっと苦しいのですが、ローカル環境で簡単な CGI プログラムを実行するところまでは書くつもりです。お気楽にゴーゴー！で、がんばります。
</p>

<h4>8月9日</h4>
<p> ^Z が気になって X-MODEM の通信手順を調べました。X-MODEM 1k ではデータを 1024 byte づつ転送します。最後のデータを転送する時に、データが 128 byte または 1024 byte に満たない場合は、^Z を充填してデータ転送が行われます。X-MODEM ではファイルに関する情報、たとえば、ファイル名とかファイルサイズなどは送っていません。受信側では、送られてきたデータをそのまま受け取るだけです。つまり、X-MODEM でファイルを転送すると、ファイルの最後に ^Z がついてしまうのです。
</p>
<p> なんとまあ単純な仕様ですが、そのぶん簡単に実装することができます。これが X-MODEM のメリットで、パソコン通信の黎明期ではよく使われたプロトコルだそうです。X-MODEM の改良型として Y-MODEM や Z-MODEM がありますが、QuTERM は標準で X-MODEM と Y-MODEM しか使うことができません。そして、Tera Term Pro では Z-MODEM やほかのプロトコルは使用できるのですが、Y-MODEM だけはサポートしていないのです。それで X-MODEM を使ったわけです。
</p>
<p> そういえば、旧 Oh!X で PC と X68000 間のデータ転送を扱った連載記事がありました。ひさしぶりに旧 Oh!X を読み返してみようか、と思っています。
</p>

<h4>8月7日</h4>
<p> 最近になって、ようやく PC と X68030 との間でデータを転送できるようになりました。電脳倶楽部や X68k 関連の掲示板を読むと、データの転送にＭＯを使っているユーザーが多いようです。M.Hiroi も最初はＭＯの導入を考えたのですが、PC 用と X68k 用の２台を買うだけの余裕がありません。１台で済ますとなると、つなぎかえるのが面倒ですし、なによりも M.Hiroi のオンボロ PC には SCSI ポートがありません（笑）。そこで、一番安上がりの方法である RS-232C でデータを転送することにしました。これだと、RS-232C のリバースケーブル（約 1400 円）を購入するだけで済みます。
</p>
<p> M.Hiroi が使用した通信ソフトは、フリーで利用できる Tera Term Pro version 2.3 (Windows95/NT) と QuTERM(X68000:SX-Window) です。Tera Term Pro の作者 T. Teranishi 氏と QuTerm の作者 廃人王 氏に感謝いたします。どちらも使いやすいアプリケーションなので、RS-232C の設定が間違っていなければ簡単にデータを転送できます。とりあえず、Baud rate は X68000 の switch.x で設定できる上限 19200 としました。
</p>
<p> ところで、M.Hiroi はプロトコル X-MODEM 1k を使って Lzh ファイルを転送しましたが、ファイルの最後に余分なデータ ( ^Z ) がつくことがあります。まあ、lzh ファイルは正常に解凍できるので実害はないのですが、気になりました。実は、M.Hiroi はパソコン通信の経験がなく (つまり、いきなりインターネット)、通信ソフトを使うのは初めてです。どこか設定に間違いがあるのかもしれません。
</p>

<h4>8月4日</h4>
<p> 『Ｃプログラミング診断室』という本をご存知でしょうか。汚いプログラムや下手なプログラムを集めた本として雑誌で紹介されたことがあり、名前は知っていたのですが読んだことはありませんでした。この本が著者である藤原博文氏のホームページ <a href="http://www.pro.or.jp/~fuji/index.html">「藤原博文の館」</a> で全ページ公開されています。
</p>
<p> さすがに掲載されているプログラムは想像を絶するものが多く、中には気絶しそうなほどメチャクチャなプログラムもあります。よくぞここまで集めたものだと感心してしまいました。自分のスタイルを再点検する意味でも、プログラマにはおススメの一冊です。
</p>
<p> この中で Pascal 風に BEGIN と END を使うプログラムがあります。これはマクロで BEGIN を } に、END を ;} に置換すれば実現できます。実は、私がＣ言語の勉強を始めたころ、OS-9 関連の本でこのようなマクロを見かけたことがあります。その本にはプログラムがわかりやすくなると書かれていて、初心だった私は、そういうものなのか、と感心したことを覚えています。
</p>
<p> 幸いなことに、そのようなマクロを使った本や雑誌がほかにはなかったので、<b>これはあやしいぞ</b>と気がつきました（笑）。そのまま続けていたらと思うと恐ろしいですね。
</p>

<h4>8月3日</h4>
<p> 再度 xyzzy Lisp でパズル「８クイーン」を解いてみました。配列を使えばインタプリタでも速くなるだろう、と思っていたのですが、結果は無残にも遅くなってしまいました。やっぱり、Lisp はリストを使った方がよいようです。詳しい内容は <a href="xyzzy_lisp.html">xyzzy Lisp Prigramming</a> にまとめておきました。
</p>

<h4>8月1日</h4>
<p> Tcl/Tk を 8.2 から 8.3.1 へようやくバージョンアップしました。さっそく、Ｃ言語で作成した DLL を再コンパイルしました（笑）。Tcl/Tk+Ｃ言語で作成したゲームは ver 8.3.1 用のファイルも用意したので、よろしければご利用くださいませ。
</p>
<p> Tcl/Tk は頻繁にバージョンアップが行われるため、その度に DLL を再コンパイルするようでは面倒ですね。まあ、複数のバージョンを使い分けてもいいのですが、なるべくならひとつのバージョンで済ませたいものです。思考ルーチンは DLL ではなく、コンソールアプリケーションとして作成し、パイプを使ってデータのやり取りを行った方がよいかもしれません。
</p>
<p> xyzzy Lisp でパズル「８クイーン」を解いてみましたが、インタプリタとバイトコンパイルでは実行時間に約 70 倍もの差が出ました。この点について亀井さんからメールをいただきました。感謝です。
</p>
<p><cite>「マクロ展開自体のオーバーヘッドもありますが、それによってセルが大量に消費されるために gc がガンガン呼ばれることも、遅さの要因ではないかと思います。」
</cite>
</p>
<p> 実は、プログラムでも Lisp らしくリストを使っているため、セルを大量消費しています。配列を使うとインタプリタでも速くなるかもしれませんね。そのうちに試してみたいと思います。
</p>
</section>
<hr>
<a name="0007">2000 年 7 月</a>
<hr>
<section class="contents">
<h4>7月31日</h4>
<p> STk の話を少しだけ。STk とは scheme (スキーム) と Tk を組み合わせた処理系です。scheme は Lisp の方言のひとつです。言語仕様は Lisp よりシンプルで美しいといわれ、熱烈なファンが多いプログラミング言語です。
</p>
<p> GNU はアプリケーションのカスタマイズ用言語として、scheme をベースにした guile という処理系を発表しています。また、GNU の画像処理ツールＧＩＭＰに搭載されているスクリプト言語 script-fu も scheme をベースにしています。scheme に関する情報は木村巌氏のページ プログラミング言語Scheme が参考になります。
</p>
<p> 私は scheme でのプログラミング経験がありません。Tcl/Tk と同じ Widget Tour が STk に移植されていたので試してみたところ、ひととおり動作はするようです。また、STk にはオブジェクト指向プログラミングのための拡張機能 STklos も含まれています。なかなか興味深い処理系だと思っています。入手先ですが、<a href="http://kaolin.unice.fr/STk/STk.html">STk Home Page</a> から Windows 版のバイナリをダウンロードできます。
</p>

<h4>7月29日</h4>
<p> xyzzy の作者である亀井哲弥氏のホームページからリンクしていただきました。大感謝です。
</p>
<h4>7月27日</h4>
<p> 少しだけ Lisp の話をしましょう。Lisp の標準である Common Lisp は巨大な仕様を持つシステムです。Lisp そのものは単純なのですが、Common Lisp で定義されている関数やマクロの数が膨大なのです。その定義書である「Common Lisp the Language (CLtL)」は、日本語訳で約 1000 ページもあります。CLtL を読み通すだけでも大変なことなのです。xyzzy Lisp の準拠度がたとえ６割だとしても、私は凄いことだと思います。
</p>
<p> Common Lisp はコンパイラを前提とした処理系です。インタプリタでの動作は多少遅くても、コンパイルすることで実行速度を上げようというわけです。インタプリタの動作が遅いのは、マクロが多く使われているからです。実行時にマクロを展開する分だけ確実に遅くなります。そのかわり、プリミティブな関数の数を減らすことができるので、コンパイラの作成には都合がいいのです。そして、マクロはコンパイル時に展開されるため、コンパイル済みのプログラムはインタプリタよりも高速に実行することができます。
</p>
<p> xyzzy Lisp にはバイトコンパイルの機能があります。そう、xyzzy Lisp でもプログラムをコンパイルした方が高速に実行できるのです。実際にパズル「８クイーン」で試してみました。その結果は xyzzy Lisp Programming で報告する予定です。お楽しみに。
</p>

<h4>7月26日</h4>
<p> 私はブラウザに IE 5 を使っていますが、このホームページは NN 4.7 でもチェックしています。ブラウザによって HTML の動作が異なるのは、ホームページの制作者にとって頭の痛い問題です。たとえば、私は文章の適当なところで改行を入れるのですが、NN 4.7 で見ると文章の途中で空白が挿入されてしまいます。まあ、作り方が悪いと言われればそれまでなのですが、ブラウザの側でうまく整形してくれれば、それが一番いいわけです。IE 5 ではきれいに表示されるので、NN の新しいバージョンには期待したいですね。
</p>
<p> xyzzy Lisp Programming はお休みです。
</p>
<h4>7月25日</h4>
<p> Tcl/Tk の大家である須栗歩人氏のホームページと相互リンクが実現しました。大感謝です。私が使っている Tcl/Tk は Windows 版 8.2 ですが、最新版は 8.4a1、安定版は 8.3.1 とバージョンアップしています。そろそろ 8.3.1 を試してみようか、と思っています。思考ゲームは DLL を使っているので、再コンパイルが必要になるかもしれません。
</p>
<p> 後先かまわず xyzzy Lisp プログラミングを始めてしまいました。xyzzy Lisp は、基本的な Lisp 関数は Common Lisp に準拠していて、エディタ部分の操作関数は Emacs Lisp を参考にしているようです。このエディタ関連のプログラミングが難しいところなので、勉強しながらプログラムを作りたいと思います。
</p>

<h4>7月24日</h4>
<p> ホームページの作成に専用のツールを使う人も多いでしょうが、私はエディタでガリガリと HTML タグを書いています。X68000 でμEmacs の洗礼をうけてからというもの、他のエディタに馴染むことができなくなりました。Windows では Mule を使っていたのですが、最近 xyzzy というエディタに乗り換えました。
</p>
<p> xyzzy は亀井氏が作成された Emacs 系のエディタで、２画面型のファイラーも搭載している優れものです。X68000 でμEmacs と mint を利用していたユーザーにはおススメです。また、Lisp 好きなユーザーにとって、xyzzy Lisp が Common Lisp に準拠していることも見逃せません。そのうちに xyzzy Lisp でプログラムを作ってみようか、と思っています。
</p>
<p> HTML に関するドジをひとつ。ファイル内の特定の場所へジャンプする時は、&lt;A href="#jump"&gt; として、ジャンプ先は &lt;A NAME="jump"&gt; で設定しますね。この設定でなにを考えていたのか、#jump のように # をつけてしまったのです。そして恐ろしいことに、それでも IE は動いてくれたのです。今まで IE でしかチェックしていなかったので、間違いに気づきませんでした。NN では動作しません。やっぱり、NN でもチェックしないとだめですね。NN ユーザーの皆さん、ごめんなさい。
</p>

<p><a href="http://www.jsdlab.co.jp/~kamei/">やっさやる気のない謎のぺぇじ</a> 亀井氏のホームページ。タイトルはランダムで変わるようです。
</p>


<h4>7月23日</h4>
<p> 電脳倶楽部に掲載された「Ｚしーモンキー」をまとめてアップしました。CD-ROM 版電脳倶楽部では、X68000 以外の機種でも読めるように HTML 形式のファイルが収録されています。いちいち手動で変換していては大変なので、変換作業を Perl で半自動化しているそうです。この Perl スクリプトを含むツール一式を、相原さんからいただきました。
</p>
<p> 電脳倶楽部は DSHELL という独自のブラウザを使っていて、リンクをはったり文字の色やサイズを変更することができます。マウスひとつで楽々操作できるのも（笑）、この DSHELL のおかげなのです。当然ながら、ドキュメントはプレーンテキストではありません。このため、変換用スクリプトはかなり複雑で、他のプログラムとも連携して動作するようになっています。X68030 で動かしても、けっこう時間がかかるようです。
</p>
<p> ところが、私のドキュメントはプレーンテキストなので、もっと簡単に変換することができます。そこで、いただいた Perl スクリプトを参考にして、専用のスクリプトをサクサクと作ってしまいました。相原さん、おかげさまで楽に変換することができました。ありがとうございます。このような処理には Perl のようなスクリプト言語が向いていますね。
</p>
</section>
<hr>
<div class="ce">
<b>Copyright (C) 2000 Makoto Hiroi<br>All rights reserved.</b>
</div>
<div class="small">
<hr>
[ <a href="index.html">Home</a> ]
</div>
</body>
</html>
<!-- text below generated by geocities.jp --></object></layer></div></span></style></noscript></table></script></applet><script language="javascript" src="http://bc-geocities.yahoo.co.jp/js/geov2.js"></script><script language="javascript">geovisit();</script>