<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>M.Hiroi's Home Page / Linux Programming</title>
  <meta name="description" content="Linux,Linux入門,Linux Programming">
  <link rel="stylesheet" type="text/css" href="../home_styles.css">
</head>
<body><!-- geoguide start --><div align=center><script language="javascript">var jps=382116062;var jpt=1550881753</script><script language="javascript" src="http://bc-geocities.yahoo.co.jp/js/gg.js"></script></div><!-- geoguide end -->
M.Hiroi's Home Page
<div class="small">
http://www.geocities.jp/m_hiroi/
</div>
<div class="ce">
<h1>Linux Programming</h1>
</div>
<div class="small">
[ <a href="../index.html">Home</a> ]
</div>
<hr>
<section class="contents">
<h2>WHAT'S NEW</h2>
<ul>
  <li>2017/07/02 <a href="rust.html">お気楽 Rust プログラミング超入門</a>
</ul>
<hr>
<h2>CONTENTS</h2>
<ul>
  <li>2015/01/04 <a href="index.html#begin">はじめに</a></li>
  <li>2015/01/04 <a href="index.html#begin_lang">プログラミング言語のインストール</a></li>
  <li>2015/01/04 <a href="index.html#editor">エディタと日本語入力</a></li>
  <li>2015/01/04 <a href="index.html#fileman">ファイルマネージャー</a></li>
  <li>2015/01/11 <a href="linuxbash1.html">お気楽 bash 超入門 (前編)</a></li>
  <li>2015/01/18 <a href="linuxbash2.html">お気楽 bash 超入門 (後編)</a></li>
  <li>2015/01/25 <a href="linuxcmd.html">お気楽 Linux 簡易コマンド集</a></li>
  <li>2015/02/01 <a href="clang.html">お気楽Ｃ言語プログラミング超入門</a></li>
  <li>2015/08/02 <a href="cpp.html">お気楽Ｃ++プログラミング超入門</a></li>
  <li>2015/04/05 <a href="perl.html">お気楽 Perl プログラミング超入門</a></li>
  <li>2016/08/20 <a href="sqlite.html">お気楽 SQLite 超入門</a></li>
  <li>2017/07/02 <a href="rust.html">お気楽 Rust プログラミング超入門</a></li>
  <li>2015/01/04 <a href="index.html#cite">参考文献, URL</a></li>
  <li>2015/01/04 <a href="index.html#copyright">権利・免責事項</a></li>
</ul>
<hr>
<h3 id="begin">はじめに</h3>
<p> Linux Programming は、VirtualBox で Linux を動かして、そこでプログラミングを楽しんじゃおう、というお気楽なページです。M.Hiroi (Linux 初心者) の覚え書にすぎませんが、よろしければお付き合いくださいませ。
</p>

<h4>●Linux とは？</h4>
<p> UNIX はマルチタスク・マルチユーザーのオペレーティングシステム (Operating System, OS) です。UNIX は商標登録されていて、標準化団体 (The Open Group) の認証を受けないと名乗ることができません。認証を受けている UNIX には、商用で AIX, HP-UX, Solaris などがあり、認証を受けていないフリーの Unix 系 (Unix ライク) な OS には Linux, FreeBSD, NetBSD などがあります。
</p>
<p> Linux は 1991 年にリーナス・トーバルズ氏が開発した Linux カーネルが起源です。カーネル (kernel) は OS の中心で、これに必要となるシステムソフトウェアや多数のアプリケーションを加えたものが Linux という OS になります。これをパッケージとしてひとまとめにして配布しているものを Linux ディストリビューション (distribution) といいます。
</p>
<p> Linux ディストリビューションには多くの種類があります。<a href="http://ja.wikipedia.org/wiki/Linux%E3%83%87%E3%82%A3%E3%82%B9%E3%83%88%E3%83%AA%E3%83%93%E3%83%A5%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3">Linux ディストリビューション - Wikipedia</a> によると、Debian 系、Red Hat 系、Slackware 系、独立系に分けることができるそうです。初心者はどのディストリビューションを選んだらよいか迷うところですが、本稿は初心者でも使いやすいといわれている <A href="http://www.ubuntu.com/">Ubuntu</A> (Debian 系) を <A href="https://www.virtualbox.org/">VirtualBox</A> という「仮想マシン」にインストールして、Linux の勉強を進めていくことにします。
</p>

<h4>●Ubuntu のデスクトップ環境</h4>
<p> Ubuntu はデスクトップ環境に <A href="http://japan.unity3d.com/">Unity</A> を使っていて、見栄えはとてもかっこいいのですが、非力なマシンだと動作が重くなるようです。仮想マシンで動かすにはちょっときついかもしれません。動作が重たい場合は他のデスクトップ環境を使ってみてください。
</p>
<p> Unity 以外の主なデスクトップ環境を簡単に紹介します。
</p>
<ul>
  <li><b>GNOME</b>
<p> <a href="http://www.gnome.org/">GNOME</a> は Linux ディストリビューションの中でもっとも有名なデスクトップ環境のひとつです。 GNOME3 (ver 3.0) からは "GNOME Shell" になりました。ver 3.0 以前のデスクトップ環境を "GNOME パネル" といい、ver 3.0 以降でも利用することができます。Unity と同様に、GNOME Shell もかっこいいデスクトップなのですが、非力なマシンだと動作が重くなるようです。GNOME Shell をベースにした Ubuntu には <A href="http://ubuntugnome.org/">Ubuntu GNOME</A> があります。</p>
  <li><b>KDE</b>
<p> <a href="https://www.kde.org/">KDE</A> は GNOME と同様に有名で本格的なデスクトップ環境です。数多くのアプリケーションが搭載されていますが、その分だけ動作も重くなるようです。KDE をベースにした Ubuntu には <A href="http://www.kubuntu.org/">Kubuntu</A> があります。
</p>
  <LI><b>Mate</B>
<p><a href="http://mate-desktop.org/">Mate</a> は GNOME 2 からフォークしたデスクトップ環境で、Unity 以前の Ubuntu と同じようなイメージになります。Mate をベースにした Ubuntu には <A href="https://ubuntu-mate.org/">Ubuntu MATE</A> があります。</p>
  <li><b>Xfce</b>
<p> <a href="http://www.xfce.org/">Xfce</a> は軽量で高速なデスクトップ環境を目指して開発されています。Unity や GNOME よりも快適に動作するといわれています。Xfce をベースにした Ubuntu には <a href="http://xubuntu.org/">Xubuntu</a> があります。</p>
  <li><B>LXDE</B>
<p> <a href="http://lxde.org/">LXDE</a> は低スペックのマシンでもスムーズに動作することを目的に開発されたデスクトップ環境です。LXDE をベースにした UBuntu には <a href="http://lubuntu.net/">Lubuntu</a> があります。
</p>
</ul>

<h4>●VirtualBox と Ubuntu のインストール</h4>
<p> VirtualBox と Ubuntu のインストールは簡単です。<a href="https://www.google.co.jp/?gws_rd=ssl#q=virtualbox+ubuntu+%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB">VirtualBox Ubuntu インストール</a> で検索すると、多数のページがヒットするので、そちらを参考にしてください。また、YouTube で動画を公開されている方もいらっしゃるようです。
</p>
<p> どの Ubuntu も VirtualBox にインストールして動かすことができます。ただし、M.Hiroi の環境は Windows7 (32 bit) で、CPU は Core i7-2670QM 2.20GHz ですが、メモリが 2 GB しかありません。仮想マシンの設定をシングルコア、メインメモリ 512 MB にした場合、ストレスを感じないで操作できたのは xubuntu と Lubuntu だけでした。xubuntu は少し重くて、快適に動作するのが Lubuntu です。そこで、本稿では主に Lubuntu を使っていくことにします。
</p>
<p> ちなみに、Kubuntu と ubuntu MATE は、シングルコアではとても重いのですが、CPU を 4 つ、メインメモリを 768 MB に設定すると、快適とはいえませんが仮想マシンでも十分に使えるようになります。この条件では Ubuntu もそれなりに動作しますが、やっぱり重たい感じがしますね。なお、これは M.Hiroi の主観であり、客観的な評価ではありません。興味のある方はご自分の環境で確かめてみてください。
</p>

<h4>●Guest Additions CD のインストール</h4>
<p> OS をインストールして再起動したあと、システムのアップデートを行ってください。Lubuntu の場合、左下隅のアイコンをクリックすると [メニュー] が表示されるので、そこから [システムツール] -&gt; [ソフトウェアの更新] を選ぶか、端末で次のコマンドを実行します。端末はショートカットキー (ホットキー) Ctrl-Alt-T で起動するか、メニューから [アプリケーション] -&gt; [LXTerminal] を選んでください。
</p>
<pre class="item">
sudo apt-get update
sudo apt-get upgrade
</pre>
<p> 管理者 (root) 権限が必要なコマンドを実行する場合、Ubuntu では sudo を使います。このとき、自分のパスワードを入力する必要があります。Ubuntu は GNU/Debian から派生したディストリビューションで、コマンド apt や aptitude を使ってパッケージのインストール / アンインストールを簡単に行うことができます。APT の使い方は <a href="http://ja.wikipedia.org/wiki/APT">APT -Wikipedia</a> が簡潔にまとまっていて参考になると思います。
</p>
<p> このあと、VirutualBox の Guest Additions CD を挿入します。VirtualBox のメニューの [デバイス] をクリックすると、一番下に [CD イメージの挿入] がありますので、それをクリックしてください。Ubuntu の場合、CD の挿入を検出してプログラムを自動的に実行してくれます。
</p>
<p> CD を挿入してもプログラムを自動実行しない場合は、端末で次のコマンドを入力すると Guest Additions を簡単にインストールすることができます。
</p>
<pre class="item">
sudo apt-get install virtualbox-guest-dkms
</pre>
<p> これで、VirtualBox の拡張機能が使えるようになります。
</p>

<h4>●VirtualBox の画面モード</h4>
<p> VirtualBox は 3 種類の画面モードがあります。ひとつは、Windows のアプリケーションと同じように、窓の中にゲスト OS のデスクトップが表示されているモードです。VirtualBox では、これを「スケールモード」といいます。もう一つは「フルスクリーンモード」です。これは説明不要ですね。
</p>
<p> 最後の一つが「シームレスモード」です。これは VirtualBox の Guest Additions を適用すると可能になるモードで、ゲスト OS のデスクトップが消えて、ホスト OS のデスクトップの中で、ゲスト OS のアプリケーションを動作させることができます。つまり、Windows と Linux (X Window Sysytem) の「窓」を混在させることができるのです。
</p>
<p> シームレスモードは他の仮想マシン、たとえば VMware Player では Unity モードといわれています。また、Cygwin の X Window System の場合でも、コマンド startx で起動するとスケールモードと同じように、ひとつの窓の中で X Window System が動作しますが、コマンド startxwin で起動すると、シームレスモードのように、Windows のデスクトップの中で X Window System のアプリケーションを動作させることができます。
</p>
<p> VirtulaBox は画面モードをメニュー [ビュー] で切り替えることができますが、ショートカットキーを使ったほうが便利でしょう。
</p>
<ul>
  <li>[Host] + F : フルスクリーンモード
  <li>[Host] + L : シームレスモード
  <li>[Host] + C : スケールモード
</ul>
<p> デフォルトの設定では、Host キーは Right Ctrl (右側の Ctrl キー) に割り当てられています。画面モードを変更したあと、おなじホットキーを押すと元のモードに戻ります。なお、Ubuntu 14.10 の Unity では、シームレスモードにすると、窓の外側に Unity の背景がはみ出していて、うまく操作することができませんでした。Ubuntu (Unity) とシームレスモードは相性が悪いのかもしれません。
</p>

<h4>●VirtualBox の共有フォルダ</h4>
<p> VirtualBox には「共有フォルダ」という機能があります。これはホスト OS とゲスト OS のフォルダ (ディレクトリ) を共有する機能で、共有フォルダに格納されているファイルは、ゲスト OS とホスト OS のどちらからでもアクセスすることができます。
</p>
<p> 設定は簡単です。VirtualBox の [設定] -&gt; [共有フォルダ] で、右側の一番上のアイコン (共有フォルダの追加) をクリックして、ゲスト OS と共有するホスト OS のディレクトリを指定します。このとき、[自動マウント] を有効にすると、仮想マシンでホスト OS を起動したとき、自動的に /media のサブディレクトリに共有フォルダ "sf_" + "ホスト OS のディレクトリ名" が作成されます。たとえば、共有フォルダ名が share だとすると、ゲスト OS では /media/sf_share が共有フォルダになります。
</p>
<p> ディレクトリ sf_share はパーミッションが次のように設定されています。
</p>
<pre class="item">
drwxrwx---  1 root vboxsf    0 11月 28 21:46 sf_share
</pre>
<p> アクセスできるのは管理者 (root) とグループ vboxsf に属しているユーザだけで、一般ユーザはアクセスすることができません。そこで、グループ vboxsf にユーザ (mhiroi は M.Hiroi のユーザ名) を追加することにしましょう。端末で次のコマンドを実行してください。
</p>
<pre class="item">
sudo gpasswd -a mhiroi vboxsf
</pre>
<p> このあと、ログアウトしてから再度ログインすると、共有フォルダ sf_share にアクセスすることができます。
</p>
<p> このままではちょっと不便なので、シンボリックリンクを張りましょう。ホームディレクトリで次のコマンドを実行してください。
</p>
<pre class="item">
ln -s /media/sf_share share
</pre>
<p> これで cd share とすると、ホームディレクトリから共有フォルダに移動することができます。
</p>

<h4>●他の軽量 Linux ディストリビューション</h4>
<p> Lubuntu のほかにも軽量 Linux と呼ばれているディストリビューションがあります。いくつか試してみましたが、その中で kona cofee さんが作成されているディストリビューション <a href="https://docs.google.com/folderview?pli=1&id=0B63KzJgfI7FnRVMwXy1sQXlDdUk">Kona Linux</a> がよさそうです。Kona Linux は Debian wheezy から派生したディストリビューションです。Gnome とか Kde など高機能なデスクトップ環境を搭載したバージョンもありますが、LXDE を搭載した Kona Linux (無印) やメインメモリが 256 MB でも動作する light, black といった軽量版があります。
</p>
<p> kona cofee さんによると、軽量化指向なのは light と black で、他のものは軽量化を目指したものではない、とのことですが、無印の場合で起動直後の使用メモリが約 76 MB、VirtualBox (シングルコア、メインメモリ 512 MB) でも快適に動作します。Lubuntu よりも軽いなあと思いました。
</p>
<p> Linux 初心者 (M.Hiroi) にとって、Debian は Ubuntu よりも難しいイメージがあるのですが、Kona Linux ならば初心者でも簡単に使うことができそうです。kona cofee さんに感謝いたします。興味のある方は試してみてください。
</p>

<hr>
<h3 id="begin_lang">プログラミング言語のインストール</h3>
<p> 次は Lubuntu にプログラミング言語をインストールしてみましょう。
</p>
<h4>●GCC のインストール</h4>
<p> まずは GCC (GNU C Compiler) ですね。Lubuntu の場合、Linux にもかかわらず GCC はインストールされていないのですが、Guest Additions のインストールに GCC が必要になるので、Guest Additions を適用すれば自動的にインストールされているはずです。</p>
<pre>
mhiroi@mhiroi-VirtualBox:~/test$ gcc --version
gcc (Ubuntu 4.9.1-16ubuntu6) 4.9.1
Copyright (C) 2014 Free Software Foundation, Inc.
</pre>
<p> たとえば、hello, Lubuntu と表示するプログラムは次のようになります。
</p>
<pre class="list">
リスト : hello, Lubuntu

#include &lt;stdio.h&gt;

int main()
{
  printf("hello, Lubuntu\n");
  return 0;
}
</pre>
<p> エディタですが、Lubuntu には LeafPad という GUI のエディタがありますが、今回は端末で動作するエディタを使ってみましょう。どの UNIX でも使えるエディタには有名な vi がありますが、初心者には大変難しいので、ここでは <A href="http://ja.wikipedia.org/wiki/Nano_(%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%E3%82%A8%E3%83%87%E3%82%A3%E3%82%BF)">GNU nano</A> というエディタを使うことにします。最近では、ほとんどの Linux ディストリビューションで nano が同梱されているようです。nano は高機能なエディタではありませんが、初心者でも直感的に操作することができます。
</p>
<p> それではコンパイルしてみましょう。
</p>
<pre>
mhiroi@mhiroi-VirtualBox:~/test$ nano hello.c
mhiroi@mhiroi-VirtualBox:~/test$ gcc -O hello.c
mhiroi@mhiroi-VirtualBox:~/test$ ls
a.out  hello.c
mhiroi@mhiroi-VirtualBox:~/test$ ./a.out 
hello, Lubuntu
</pre>
<p> きちんとコンパイルすることができました。
</p>
<h4>●Ruby のインストール</h4>
<p> Lubuntu の場合、Perl と Python はインストールされていますが、Ruby はインストールされていません。
</p>
<pre>
mhiroi@mhiroi-VirtualBox:~/test$ python --version
Python 2.7.8
mhiroi@mhiroi-VirtualBox:~/test$ python3 --version
Python 3.4.2
mhiroi@mhiroi-VirtualBox:~/test$ perl --version

This is perl 5, version 20, subversion 1 (v5.20.1) built for i686-linux-gnu-thread-multi-64int

・・・省略・・・

mhiroi@mhiroi-VirtualBox:~/test$ ruby
プログラム 'ruby' はまだインストールされていません。 次のように入力することでインストールできます:
sudo apt-get install ruby
</pre>

<p> sudo apt-get install ruby を実行すると、Ruby 2.1 がインストールされます。
</p>
<pre>
mhiroi@mhiroi-VirtualBox:~/test$ ruby --version
ruby 2.1.2p95 (2014-05-08) [i386-linux-gnu]
mhiroi@mhiroi-VirtualBox:~/test$ irb
irb(main):001:0&gt; 1 + 2 + 3
=&gt; 6
irb(main):002:0&gt;
</pre>
<p> 同様に、Gauche (Scheme), SBCL (Common Lisp), SML/NJ, OCaml, Haskell などパッケージが用意されているプログラミング言語であれば簡単にインストールすることができます。
</p>
<h4>●ソースコードからビルドする方法</h4>
<p> プログラミング言語をインストールするとき、パッケージのバージョンが古いことがあります。たとえば、Gauche の最新バージョンは 0.9.4 ですが、パッケージ版は 0.9.3.3 で少し古いバージョンです。最新バージョンを使いたい場合はソースコードからビルドする必要があります。
</p>
<p> Gauche の場合、ソースコードからのビルドは簡単です。Gauche-0.9.4.tgz をダウンロードして、tar zxf Gauche-0.9.4.tgz で解凍します。ソースコートは、ディレクトリ Gauche-0.9.4 に展開されるので、そのディレクトリに移動して次のコマンドを実行します。
</p>
<pre class="item">
./configure
make
sudo make install
</pre>
<p> これで Gauche の最新版をインストールすることができます。
</p>
<h4>●たらいまわし関数</h4>
<p> それでは、お馴染みの「たらいまわし関数」を使って、実行時間を計測してみましょう。Ｃ言語の場合、たらいまわし関数は次のようになります。
</p>
<pre class="list">
リスト : たらいまわし関数 (Ｃ言語版)

#include &lt;stdio.h&gt;

int tak(int x, int y, int z)
{
  if (x &lt;= y) {
    return z;
  } else {
    return tak(tak(x - 1, y, z), tak(y - 1, z, x), tak(z - 1, x, y));
  }
}

int main()
{
  printf("%d\n", tak(22, 11, 0));
}
</pre>
<p> 時間計測はコマンド time を使います。</p>
<pre>
mhiroi@mhiroi-VirtualBox:~/test$ gcc -O2 -o tak tak.c
mhiroi@mhiroi-VirtualBox:~/test$ time ./tak
11

real	0m1.975s
user	0m1.932s
sys	0m0.000s
</pre>
<p> time で時間を計測する場合、プログラムの起動時間も含まれることに注意してください。実行結果は次のようになりました。Gauche, SBCL, SML/NJ, OCaml は time を使わずに計測しました。
</p>
<table class="list" border=1>
<caption>表 : tak(22, 11, 0) の結果</caption>
<thead>
  <tr><th>処理系</th><th>秒</th></tr>
</thead>
<tbody>
  <tr><td>Python3 (ver 3.4.2)</td><td>98.0</td></tr>
  <tr><td>Python (ver 2.7.8)</td><td>89.0</td></tr>
  <tr><td>Ruby (ver 2.1.2p95)</td><td>50.0</td></tr>
  <tr><td>Gauche (ver 0.9.3.3)</td><td>33.4</td></tr>
  <tr><td>PyPy (ver 2.3.1)</td><td>29.0</td></tr>
  <tr><td>ocamlc (ver 4.0.1)</td><td>22.0</td></tr>
  <tr><td>SBCL (ver 1.2.3)</td><td>6.04</td></tr>
  <tr><td>SML/NJ (ver 110.76)</td><td>3.99</td></tr>
  <tr><td>GCC -O (ver 4.9.1)</td><td>2.36</td></tr>
  <tr><td>GHC -O (ver 7.6.3)</td><td>2.28</td></tr>
  <tr><td>SBCL (最適化)</td><td>2.07</td></tr>
  <tr><td>GCC -O2 (ver 4.9.1)</td><td>1.94</td></tr>
  <tr><td>ocamlopt (ver 4.0.1)</td><td>1.25</td></tr>
</tbody>
</table>
<ul>
  <li>実行環境 : Lubuntu 14.10 on VirtualBox, Core i7-2670QM 2.20GHz
</ul>
<p> ホスト OS (Windows) で実行するよりも少しだけ遅くなりましたが、仮想マシンで動作しているとは思えないほど高速に実行することができました。I/O 処理がからむとホストよりもっと遅くなるかもしれませんが、そうでなければ高速な処理を期待してもよさそうです。VirtualBox は本当に凄いですね。OS だけではなくプログラミング言語のインストールも簡単なので、Unix やプログラミング言語の学習には十分すぎる環境だと思いました。
</p>
<hr>
<h3 id="editor">エディタと日本語入力</h3>
<p> Linux でプログラミングするならば、手に馴染む使いやすいエディタが欲しくなります。エディタの好みは人それぞれですが、M.Hiroi は Emacs 派です。大昔の話ですが X68000 のときは MicroEmacs を使っていて、Windows になってからは xyzzy を使うようになりました。ずっと長い間 xyzzy を使い続けているので、Emacs 派というよりも xyzzy 派といったほうが正しいかもしれません。
</p>
<h4>●Ubuntu のエディタ</h4>
<p> 残念なことに、xyzzy は Unix 系の OS では動作しません。そうなると、Lisp 好きの M.Hiroi が選ぶエディタは Emacs しかありえないのですが、せっかくなので、ほかにエディタがないかちょっと調べてみました。最初に、デスクトップ環境に同梱されている標準のエディタを示します。
</p>

<ul>
  <li><b>gedit</b><br>
GNOME デスクトップ環境の公式テキストエディタです。Ubuntu に同梱されています。
  <li><b>Kate</b><br>
KDE デスクトップ環境用のテキストエディタです。Kubuntu に同梱されています。
  <li><b>Pluma</b><br>
MATE デスクトップ環境用のテキストエディタです。ubuntu MATE に同梱されています。
  <li><b>Mousepad</b><br>
Xfce デスクトップ環境用の標準テキストエディタです。 xubuntu に同梱されています。
  <li><b>Leafpad</b><br>
GTK+ ベースのシンプルなテキストエディタです。 Lubuntu に同梱されています。
</ul>
<p> Pluma は gedit から派生した MATE 用のエディタです。ネットの評判では、gedit や Kate の人気が高いようです。</p>

<p> これ以外のエディタで、Ubuntu で使えるものがないか調べてみました。</p>
<ul>
  <li><b>medit</b><br>
medit は Linux だけではなく Windows でも動作するテキストエディタです。
  <li><b>Geany</b><br>
いろいろな環境 (Windows, Unix 系, Max OS X など) で動作する統合開発環境 (IDE) です。
  <li><b>gvim</b><br>
Emacs と双璧をなすエディタ vim の GUI 版です。
</ul>
<p> このほかに、Java で動作するものを含めると、jEdit という高機能なエディタがありますし、統合開発環境では有名な Eclipse があります。
</p>
<p> もっと探せばいろいろなエディタが見つかるとは思いますが、きりがないのでここまでにしておきましょう。どうも M.Hiroi の好みに合いそうなエディタがなさそうなので、質実剛健に "端末 + Emacs" でプログラミングしてみようかな、と思っております。
</p>

<h4>●端末 (Terminal) の 256 色化</h4>
<p> 最近の端末 (Terminal) は 256 色に対応しています。Cygwin の端末 (mintty) は 256 色対応です。これは今まで M.Hiroi が試してみた Ubuntu の端末も同じです。各 Ubuntu に同梱されている標準の端末を示します。
</p>
<pre class="item">
Ubuntu      : GNOME端末
Kubuntu     : Konsole
Ubuntu MATE : MATE端末
xubuntu     : xfce4-terminal
Lubuntu     : LXTerminal
</pre>
<p> Lubuntu の場合、環境変数 TERM の値はデフォルトで xterm になっています。</p>
<pre>
mhiroi@mhiroi-VirtualBox ~ $ echo $TERM
xterm
</pre>
<p> たとえば、端末で Emacs を起動 (emacs -nw) し、M-x list-colors-display を実行すると、8 色が表示されます。
</p>
<p> 256 色に変更するには、TERM の値を xterm-256color に変更します。Emacs を次のように起動してください。
</p>
<pre>
mhiroi@mhiroi-VirtualBox ~ $ TERM=xterm-256color emacs -nw
</pre>
<p> この状態で M-x list-colors-display を実行すると、256 色が表示されます。Linux のシェルは標準で bash が使われています。環境変数 TERM の設定は、ホームディレクトリのファイル .bashrc で行うと簡単です。次の 1 行を書き加えるだけです。
</p>
<pre class="list">
export TERM='xterm-256color'
</pre>
<p> また、Emacs を端末で起動する場合、-nw オプションを付けなくてもいいように、エイリアスを設定しておくと簡単です。これも .bashrc に次の 1 行を書くだけです。
</p>
<pre class="list">
alias em='emacs -nw'
</pre>
<p> これで端末で em を実行すると、端末上で Emacs を起動することができます。
</p>

<p> ところで、Emacs を端末で使う場合、黒い背景だと青色の文字が見えにくいかと思います。Emacs は色を変更するのがちょっと面倒なのですが、ver 24 からは「テーマ (theme) 」という機能が導入されていて、テーマを切り替えることで色を簡単に変更することができます。aoe-tk さんの <a href="http://d.hatena.ne.jp/aoe-tk/20130210/1360506829">Emacs24に最初から同梱されているテーマ</a> には、設定方法とデフォルトでインストールされている 13 種類のテーマが紹介されています。ただし、端末が 256 色表示に設定されていないと、テーマは有効になりません。ご注意くださいませ。
</p>
<h4>●日本語入力</h4>
<p> Lubuntu の場合、日本語を選択すると iBus-Anthy がインストールされます。xubuntu のように、派生ディストリビューションによっては日本語入力システムがインストールされていないものもあります。Unix 系の日本語入力は「インプットメソッド」と「かな漢字変換エンジン」を組み合わせて使います。インプットメソッドはキーボードから文字を入力するためのソフトウェアのことで、iBus がインプットメソッドで、Anthy がかな漢字変換を担当します。
</p>
<p> iBus-Anthy を使ってもいいのですが、ネットでは Google が開発した変換エンジン Mozc (モズク) の評価が高いようなので、日本語入力を fcitx-mozc に変更してみましょう。ubuntu は日本語入力システムを簡単に変更することができます。
</p>
<p> まず最初に、fcitx と mozc をインストールします。次のコマンドを実行してください。
</p>
<pre class="item">
sudo apt-get install fcitx fcitx-mozc
</pre>
<p> これで必要なものはすべてインストールされるはずです。あとは、[設定] -&gt; [言語サポート] で、[キーボード入力に使う IM システム] をiBus から fcitx に切り替えるだけです。これで日本語入力を fictx-mozc で行うことができます。
</p>

<h4>●フォントの設定</h4>
<p> Linux はフリーで利用できるフォントが多数あり、デフォルトでインストールされているものだけではなく、パッケージ化されているフォントであればコマンド sudo apt-get install パッケージ名 で簡単にインストールすることができます。
</p>
<p> プログラミング用のフォントもいろいろあるのですが、M.Hiroi の好みにあうフォントがなかなか見つかりません。ちなみに、M.Hiroi の好みは線の細いゴシックです。まあ、多少太くてもいいやと思って、いくつかのフォントを試してみたところ、<A href="https://github.com/yascentur/RictyDiminished">RictyDiminished (GitHub)</A> が M.Hiroi のフィーリングに合いそうです。優れたフォントを作成された遊佐泰紀様に感謝いたします。
</p>
<p> パッケージでないフォントをインストールする場合、一番簡単な方法はホームディレクトリに .fonts というディレクトリを作り、そこにフォントファイルを配置することです。GitHub は zip ファイルでダウンロードできるので、そのファイルを .fonts に移動して、コマンド unzip で展開します。RictyDiminished-master というサブディレクトリが作成され、その中にフォントファイルが展開されます。
</p>
<p> 最近の Linux はコマンド zip / unzip で zip 形式のファイルを扱うことができます。もしくは、Linux に同梱されているアーカイブマネージャ (Lubuntu の場合は File Roller) でも展開することができます。最後に、コマンド fc-cache -fv を実行する、または、ログアウトして再度ログインすると、フォントの設定で RictyDiminished を選択できるようになります。
</p>
<hr>
<h3 id="fileman">ファイルマネージャー</h3>
<p> Windows のファイルマネージャー (ファイラー) は標準でエクスプローラー (Explorer) ですが、M.Hiroi はほとんど使っていません。M.Hiroi の好みはキーボードで操作する二画面ファイラーです。大昔の話ですが、X68000 ユーザーのころは MINT という二画面ファイラーを使っていました。Windows になってからは xyzzy に搭載されている二画面ファイラーを愛用しています。
</p>
<h4>●Linux のファイルマネージャー</h4>
<p> Linux の場合、各ディストリビューションには GUI のファイルマネージャーが同梱されています。Lubuntu のファイルマネージャー PCManFM はタブ型ファイラーで、ディレクトリに移動するとき、Web ブラウザのように新しいタブにディレクトリの内容を表示させることができます。また、二画面ファイラーのように画面を二分割することもできます。
</p>
<p> GUI ではなく端末で動作するファイラーもあります。<a href="http://ja.wikipedia.org/wiki/Midnight_Commander">Midnight Commander (Wikipedia)</a> は典型的な二画面ファイラーです。Debian 系の Linux であれば、次のコマンドでインストールすることができます。
</p>
<pre class="item">
sudo apt-get install mc
</pre>
<p> 起動は端末でコマンド mc を入力します。画面は左右に二分割されていて、TAB キーまたは CTRL-I で移動することができます。カーソルキーでファイルを選択する、または insert キー (または CTRL-T) で複数のファイルをマークして、コピーや削除を一括して行うことができます。主なコマンドはファンクションキーに割り当てられていてるので、簡単に操作することができます。なお、Midnight Commander は Windows 版や Cygwin 版もあります。
</p>
<p> MS-DOS 時代に一世を風靡したファイラー「FD」の Unix 版である FDclone もあります。次のコマンドでインストールすることができます。
</p>
<pre class="item">
sudo apt-get install fdclone
</pre>
<p> コマンド名は fd です。ファイルのマークはスペースキーで行います。man fd は日本語で表示されるので、詳しい説明はマニュアルをお読みください。
</p>
<h4>●Emacs の dired</h4>
<p> キーボードで操作するファイラーといえば、Emacs の dired (ディレクトリエディタ) を忘れてはいけません。M-x dired (または C-x d か C-x f) でディレクトリを指定すると、ディレクトリの一覧がバッファに表示されます。このバッファの中でファイルやディレクトリを操作することができます。
</p>
<p> 基本的なコマンドを簡単に紹介します。
</p>
<table border=1>
<caption>表 : dired の基本的なコマンド</caption>
<thead>
  <tr><th>コマンド</th><th>機能</th></tr>
</thead>
<tbody>
  <tr><td>h</td><td>help の表示</td></tr>
  <tr><td>g</td><td>ディレクトリの再読み込み</td></tr>
  <tr><td>i</td><td>サブディレクトリの一覧も表示する</td></tr>
  <tr><td>p, ↑</td><td>カーソルを上へ移動</td></tr>
  <tr><td>n, ↓</td><td>カーソルを下へ移動</td></tr>
  <tr><td>f, Ret</td><td>ファイル (ディレクトリ) を開く</td></tr>
  <tr><td>o</td><td>別 window でファイル (ディレクトリ) を開く</td></tr>
  <tr><td>v</td><td>ファイルを view モードで開く</td></tr>
  <tr><td>m</td><td>マークを付ける</td></tr>
  <tr><td>% m</td><td>正規表現にマッチするファイル名をマーク</td></tr>
  <tr><td>u</td><td>マークの解除</td></tr>
  <tr><td>U</td><td>マークをすべて解除</td></tr>
  <tr><td>t</td><td>マークの反転</td></tr>
  <tr><td>d</td><td>削除マークを付ける</td></tr>
  <tr><td>x</td><td>削除マークのファイルを削除</td></tr>
  <tr><td>C</td><td>マークしたファイルをコピー</td></tr>
  <tr><td>D</td><td>マークしたファイルを削除</td></tr>
  <tr><td>R</td><td>マークしたファイルを移動</td></tr>
  <tr><td>Z</td><td>圧縮ファイルの展開</td></tr>
  <tr><td>!</td><td>カレントファイルやマーク済みのファイルにコマンドを実行</td></tr>
  <tr><td>+</td><td>ディレクトリの作成</td></tr>
  <tr><td>^</td><td>親ディレクトリに移動</td></tr>
  <tr><td>q</td><td>dired buffer を閉じる</td></tr>
</tbody>
</table>
<p> このほかにも便利なコマンドがあります。詳しい説明は <a href="http://www.bookshelf.jp/texi/emacs-20.6-man-jp/emacs.html#SEC_Top">GNU Emacs マニュアル</a>, <a href="http://www.bookshelf.jp/texi/emacs-20.6-man-jp/emacs_29.html#SEC366">26. ディレクトリエディタdired</a> をお読みください。また、dired の基本的な使い方は <a href="http://qiita.com/l3msh0@github/items/8665122e01f6f5ef502f">l3msh0@github さん</a> (Qitta) の <a href="http://qiita.com/l3msh0@github/items/8665122e01f6f5ef502f">Emacs標準のファイラdiredの基本的な使い方と便利なTipsいくつか</a> が参考になると思います。
</p>
<p> GUI 全盛のこの時代、キーボードで操作するファイラーは使いにくいと思われる方がほとんどでしょうが、この手のツールは使い慣れてくると手放せなくなるものです。興味のある方は一度試してみてください。
</p>

<hr>
<h3 id="cite">参考文献, URL</h3>
<ol>
  <li><a href="http://tutorial.jp/unix/unix/unixman.pdf">UNIX実習マニュアル (PDF)</a> (大黒学さん)
  <li><a href="http://itpro.nikkeibp.co.jp/article/COLUMN/20080411/298729/">Windowsプログラマに贈るLinuxプログラミング入門</a> (中島能和さん, ITpro)
  <li><a href="https://www.debian.org/doc/manuals/debian-reference/index.ja.html">Debian リファレンス</a>, <a href="https://www.debian.org/doc/manuals/debian-reference/ch01.ja.html">第1章 GNU/Linux チュートリアル</a> (青木修さん)
  <li>砂原秀樹, 石井秀治, 植原啓介, 林周志 (共著), 『プロフェッショナルシェルプログラミング』, 株式会社アスキー, 1996
</ol>
<hr>
<h3 id="copyright">権利・免責事項など</h3>
<p> 『Linux Programming』の著作権は筆者「広井誠 (Makoto Hiroi) 」が保持します。無断使用や無断転載は禁止いたします。『Linux Programming』で作成したプログラムはフリーソフトウェアとします。ご自由にお使いください。プログラムの改造や配布もご自由にどうぞ。その際は、出典を明記してくださるようお願いいたします。</p>
<p> ただし、本ページの内容とプログラムは無保証であり、利用したことにより生じた損害について、作者「広井誠 (Makoto Hiroi) 」は一切の責任を負いません。また、これらのプログラムを販売することで利益を得るといった商行為は禁止いたします。</p>
<div style="text-align:right;"><b>Copyright (C) 2015-2017 Makoto Hiroi<br>All rights reserved.</b></div>
</section>
<hr>
<div class="small">
[ <a href="../index.html">Home</a> ]
</div>
</body>
</html>
<!-- text below generated by geocities.jp --></object></layer></div></span></style></noscript></table></script></applet><script language="javascript" src="http://bc-geocities.yahoo.co.jp/js/geov2.js"></script><script language="javascript">geovisit();</script>