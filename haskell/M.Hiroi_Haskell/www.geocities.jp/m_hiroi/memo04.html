<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>M.Hiroi's Home Page / Memorandum</title>
  <meta name="description" content="M.Hiroi's Home Page,memorandum">
  <link rel="stylesheet" type="text/css" href="home_styles.css">
</head>
<body><!-- geoguide start --><div align=center><script language="javascript">var jps=382116062;var jpt=1550881754</script><script language="javascript" src="http://bc-geocities.yahoo.co.jp/js/gg.js"></script></div><!-- geoguide end -->
M.Hiroi's Home Page
<div class="small">
http://www.geocities.jp/m_hiroi/
</div>
<div class="ce">
<h1>Memorandum</h1>
プログラミングに関する覚え書や四方山話です。
</div>
<div class="small">
[ <a href="index.html">Home</a> ]
<hr>
</div>
<div class="small">
2004 年
<a href="memo04.html#0001">1 月</a> 
<a href="memo04.html#0002">2 月</a> 
<a href="memo04.html#0003">3 月</a> 
<a href="memo04.html#0004">4 月</a> 
<a href="memo04.html#0005">5 月</a> 
<a href="memo04.html#0006">6 月</a> 
<a href="memo04.html#0007">7 月</a> 
<a href="memo04.html#0008">8 月</a> 
<a href="memo04.html#0009">9 月</a> 
<a href="memo04.html#0010">10月</a> 
<a href="memo04.html#0011">11月</a> 
<a href="memo04.html#0012">12月</a> 
</div>
<hr>
<a name="0012">2004 年 12 月</a>
<hr>
<section class="contents">
<h3 id="31">12月31日</h3>
<h4 id="31_1">●大晦日</h4>
<p> 今年も残りわずかとなりました。M.Hiroi's Home Page を開設してから４年半になりますが、おかげさまでカウンタも 150,000 を突破いたしました。リンクしていただいているホームページ管理者の皆様、そして、なによりも M.Hiroi's Home Page に来てくださる皆様にお礼申しあげます。来年もこのページでプログラミングの楽しさを少しでもお伝えできればいいなと思っています。来年もよろしくお願い申しあげます。
</p>

<p> それでは、きたるべき年も皆様にとってよいお年でありますように。
</p>
<hr>
<h3 id="24">12月24日</h3>
<h4 id="24_1">●150,000 Hit!</h4>
<p> 本日、カウンタが 150,000 を突破しました。多くの方にアクセスしていただき、とても嬉しく思います。リンクしていただいているホームページ管理者の皆様、そして、なによりも M.Hiroi's Home Page に来てくださる皆様に厚くお礼申し上げます。
</p>

<p> 新ジオシティーズに移行して、もうすぐ三ヶ月になります。その間に URL 転送サービスや容量が 50 MB に増えるなど、ジオシティーズのサービスは良くなっているのですが、M.Hiroi's Home Page のアクセス数は減少傾向にあります。去年の 11 月はアクセス数が多く一日平均 126 Hit ありましたが、今年は 102 Hit になりました。まあ、去年に比べると更新回数が少ないので、アクセス数が減少するのは当然ですが、もうひとつ Google のランクも影響しているようです。
</p>

<p> M.Hiroi's Home Page は二つの URL (旧 URL http://www.geocities.co.jp/SiliconValley-Oakland/1680/, 新 URL http://www.geocities.jp/m_hiroi/) のどちらでもアクセスすることができます。どちらも同じページなのですが、Google は別のページとして判断しているようです。現在、M.Hiroi's Home Page へのリンクに新 URL が使われているページもありますし、旧 URL が使われているページもあります。Google は新旧 URL を別のページとして扱っているため、今までのランクが二分されてしまい、M.Hiroi's Home Page のランクが低くなったと思われます。
</p>

<p> 新旧二つの URL でアクセスできるのは便利ですが、Google のランクに影響するとは思ってもいませんでした。今のところ、旧 URL を廃止して新 URL に統一するつもりはありませんが、よろしければ新 URL でリンクしていただけると助かります。
</p>

<p> それでは、これからもがんばりますので、よろしくお願い申しあげます。
</p>
<hr>
<h3 id="02">12月2日</h3>
<h4 id="02_1">●LZMA （その２）</h4>
<p> <a href="memo04.html#1105">11 月 5 日</a> の続きです。LZMA は LZ77 符号に変更を加えた符号化方式です。LZ77 符号は「辞書に基づく符号化方式」のひとつで、「辞書（スライド窓）」の大きさによって圧縮率が大きく変化します。LZ77 符号 (LZSS 符号) は拙作のＣ言語講座 第 22 回 で詳しく説明しています。興味のある方はお読みくださいませ。
</p>
<p> LZMA の場合、スライド窓の大きさはデフォルトで 8 M byte に設定されています。この大きさには M.Hiroi も驚きました。LHA の場合、圧縮形式によってスライド窓の大きさが変わり、lh5 = 8 K byte, lh6 = 32 K byte, lh7 = 64 K byte になります。M.Hiroi は標準的な lh5 形式を使っています。
</p>
<p> LZMA はオプション -d でスライド窓の大きさを変更することができます。そこで、スライド窓の大きさを変えて試してみました。<a href="http://corpus.canterbury.ac.nz/">Canterbury Corpus</a> で配布されているテストデータ <a href="http://corpus.canterbury.ac.nz/descriptions/#cantrbry">The Canterbury Corpus</a>, それを tar でまとめたファイル Canterbury と <a href="http://corpus.canterbury.ac.nz/descriptions/#large">The Large Corpus</a>を圧縮してみましょう。ご参考までに、LHA (lh5) の結果も示します。
</p>
<table border=1>
<caption>表：The Canterbury Corpus の評価結果</caption>
<thead>
  <tr><th>ファイル名</th><th>サイズ</th><th>8 M</th><th>64 K</th><th>32 K</th><th>8 K</th><th>lh5(8K)</th></tr>
</thead>
<tbody>
  <tr><td>alice29.txt </td><td>152,089  </td><td>48,447 </td><td> 49,171</td><td> 50,887</td><td> 56,072</td><td>59,117</td></tr>
  <tr><td>asyoulik.txt</td><td>125,179  </td><td>44,503 </td><td> 44,870</td><td> 45,979</td><td> 49,773</td><td>52,341</td></tr>
  <tr><td>cp.html     </td><td>24,603   </td><td>7,591  </td><td>  7,591</td><td>  7,591</td><td>  8,011</td><td>8,384</td></tr>
  <tr><td>fields.c    </td><td>11,150   </td><td>2,976  </td><td>  2,976</td><td>  2,976</td><td>  2,979</td><td>3,170</td></tr>
  <tr><td>grammar.lsp </td><td>3,721    </td><td>1,241  </td><td>  1,241</td><td>  1,241</td><td>  1,241</td><td>1,271</td></tr>
  <tr><td>kennedy.xls </td><td>1,029,744</td><td> 52,387</td><td> 52,060</td><td> 49,016</td><td> 52,294</td><td>198,342</td></tr>
  <tr><td>lcet10.txt  </td><td>426,754  </td><td>119,366</td><td>128,688</td><td>134,918</td><td>150,645</td><td>159,558</td></tr>
  <tr><td>plrabn12.txt</td><td>481,861  </td><td>165,324</td><td>175,575</td><td>182,443</td><td>198,867</td><td>210,045</td></tr>
  <tr><td>ptt5        </td><td>513,216  </td><td>40,920 </td><td> 40,719</td><td> 40,631</td><td> 40,442</td><td>52,305</td></tr>
  <tr><td>sum         </td><td>38,240   </td><td> 9,499 </td><td>  9,499</td><td>  9,499</td><td> 10,694</td><td>13,993</td></tr>
  <tr><td>xargs.1     </td><td>4,227    </td><td>1,762  </td><td>  1,762</td><td>  1,762</td><td>  1,762</td><td>1,778</td></tr>
  <tr><td>合計        </td><td>2,810,784</td><td>494,016</td><td>514,152</td><td>526,943</td><td>572,780</td><td>760,304</td></tr>
</tbody>
</table>
<br>
<table border=1>
<caption>表：The Large Corpus の評価結果</caption>
<thead>
  <tr><th>ファイル名</th><th>サイズ</th><th>8 M</th><th>64 K</th><th>32 K</th><th>8 K</th><th>lh5(8K)</th></tr>
</thead>
<tbody>
  <tr><td>bible.txt   </td><td> 4,047,392</td><td>  885,207</td><td>1,034,507</td><td>1,091,103</td><td>1,225,591</td><td>1,310,048</td></tr>
  <tr><td>Canterbury  </td><td> 2,821,120</td><td>  484,946</td><td>  507,928</td><td>  528,024</td><td>  568,232</td><td>  761,838</td></tr>
  <tr><td>e.coli      </td><td> 4,638,690</td><td>1,186,340</td><td>1,226,041</td><td>1,234,356</td><td>1,247,879</td><td>1,322,746</td></tr>
  <tr><td>world192.txt</td><td> 2,473,400</td><td>  484,877</td><td>  603,259</td><td>  652,649</td><td>  913,700</td><td>  991,922</td></tr>
  <tr><td>合計        </td><td>13,980,602</td><td>3,041,370</td><td>3,371,735</td><td>3,506,132</td><td>3,955,402</td><td>4,386,554</td></tr>
</tbody>
</table>

<p> LZMA の場合、スライド窓を大きくするとテキストファイルの圧縮率が高くなります。LHA (lh5) と同じ 8 K byte に設定すると圧縮率は悪くなりますが、それでも LHA より高い圧縮利を叩き出しています。また、kennedy.xls, ptt5, sum などのバイナリファイルは、スライド窓の大きさにかかわらず高い圧縮率を達成しています。
</p>
<p> LZ77 符号の場合、スライド窓を大きくすると圧縮率は確かに向上します。そうはいっても、簡単に圧縮率が向上するわけではありません、スライド窓の大きさはもろ刃の剣で、大きくしすぎると圧縮率を低下させる要因にもなるのです。ここまでスライド窓を大きくしても高い圧縮率を叩き出す LZMA には本当に驚きました。LZMA はとても優れた圧縮方式だと思います。
</p>

</section>
<hr>
<a name="0011">2004 年 11 月</a>
<hr>
<section class="contents">
<h3 id="28">11月28日</h3>
<h4 id="28_1">●ホームページ容量増量</h4>
<p> Yahoo! ジオシティーズのホームページ容量が 50 MB に増量されました。現在、M.Hiroi's Home Page のコンテンツは全部で約 11 MB あり、旧ジオシティーズ (容量 12 MB) では容量が残り僅かになっていました。新ジオシティーズ (容量 15 MB) へ移行して一息ついたのですが、今回の大幅な増量により、当分の間は容量を気にしなくてもよさそうです。
</p>
<p> ということで、<a href="perl_tk/index.html">Perl/Tk memo</a> に <a href="perl_tk/perltk09.html">神経衰弱ゲーム</a> と <a href="perl_tk/perltk09.html#chapter23">アナログ時計</a> を追加しました。拙作のページ <a href="tcl_tk_doc/tcltk_doc.html#DEF">Tcl/Tk お気楽 GUI プログラミング応用編</a> のプログラムを Perl/Tk で書き直しただけですが、Perl/Tk に興味のある方は読んでみてください。
</p>
<hr>
<h3 id="18">11月18日</h3>
<h4 id="18_1">●『Coffee Cups Complex』 for X680x0 バージョンアップ！</h4>
<p><a href="http://www.fsinet.or.jp/~tau/">TAU さん</a> の X680x0 用ゲーム『Coffee Cups Complex』がバージョンアップ (Ver 0.10) されました。Ver 0.10 では新しい stage が追加され、手数のカウント方式を切り替えることができます。パズルが好きな X680x0 ユーザーはぜひ遊んでみてください。
</p>

<h4 id="18_2">●記号の二分探索</h4>
<p> <a href="memo04.html#1113">11 月 13 日</a> の続きです。大地さんのプログラムに EOF を表す記号 (256) を追加し、適応型レンジコーダ のプログラムを二分探索に改造してみました。次のリストを見てください。
</p>
<pre class="list">
リスト：二分探索で記号を探す

int search_code0( Frequency *freq, Ushort value )
{
  int i = 0, j = CODE_SIZE - 1;
  Ushort *count_sum = freq-&gt;count_sum;
  while( i &lt; j ){
    int k = (i + j) / 2;
    if( count_sum[k + 1] &lt;= value ){
      i = k + 1;
    } else {
      j = k;
    }
  }
  return i;
}

int search_code1( Frequency *freq, Ushort value )
{
  int c = 0, j;
  Ushort *count_sum = freq-&gt;count_sum;
  for (j=128; j; j&gt;&gt;=1) c += (count_sum[c + j] &lt;= value) ? j : 0;
  /* EOF code のチェック */
  if( c == 255 && count_sum[c + 1] &lt;= value ) c++;
  return c;
}

int search_code2( Frequency *freq, Ushort value )
{
  int c = 0, j;
  Ushort *count_sum = freq-&gt;count_sum;
  for (j=64; j; j&gt;&gt;=2) {
    if (count_sum[c+j] &lt;= value) c += j;
    else continue;
    if (count_sum[c+j] &lt;= value) c += j;
    else continue;
    if (count_sum[c+j] &lt;= value) c += j;
  }
  /* EOF code のチェック */
  if( c == 255 && count_sum[c + 1] &lt;= value ) c++;
  return c;
}
</pre>

<p> 関数 search_code0 がレンジコーダ用の二分探索です。CODE_SIZE は記号の種類を表すマクロで、EOF (256) を含めて 257 になります。関数 search_code1 と search_code2 が大地さんのプログラムを改造したもので、復号した記号が 255 の場合に EOF のチェックを追加しています。このような改造では、せっかくの高速性が台無しになるかもしれません。興味のある方は他の方法を考えてみてください。
</p>
<p> それでは実行結果を示します。テストデータは <a href="http://corpus.canterbury.ac.nz/">Canterbury Corpus</a> で配布されている <a href="http://corpus.canterbury.ac.nz/descriptions/#cantrbry">The Canterbury Corpus</a> の中から alice29.txt, kennedy.xls, plrabn12.txt, ptt5 の 4 ファイルと <a href="http://corpus.canterbury.ac.nz/descriptions/#large">The Large Corpus</a> の bible.txt です。プログラムは Borland C++ 5.5.1 for Win32 でコンパイルし、M.Hiroi のオンボロマシン (Windows95, Pentium 166 MHz) で実行しました。時間はファイルの入出力処理を含むプログラム全体の処理時間です。
</p>
<table border=1>
<caption>表：復号の時間 (単位 msec)</caption>
<thead>
  <tr><th>ファイル名</th><th>サイズ</th><th>code0</th><th>code1</th><th>code2</th></tr>
</thead>
<tbody>
  <tr><td>alice29.txt </td><td>152,089  </td><td>1,944</td><td>1,919</td><td>1,890</td></tr>
  <tr><td>plrabn12.txt</td><td>481,861  </td><td>5,013</td><td>4,999</td><td>4,952</td></tr>
  <tr><td>kennedy.xls </td><td>1,029,744</td><td>12,556</td><td>12,652</td><td>12,444</td></tr>
  <tr><td>ptt5        </td><td>513,216  </td><td>6,406</td><td>6,432</td><td>6,338</td></tr>
  <tr><td>bible.txt   </td><td>4,047,392</td><td>38,237</td><td>38,009</td><td>37,549</td></tr>
</tbody>
</table>
<p> さすがに二分探索は高速で、どの関数でも十分に速いのですが、その中で search_code2 が一番高速になりました。なるほど、確かに効果がありますね。大地さんに感謝です。記号に EOF (256) を含めずに、大地さんのプログラムをそのまま使うと、もう少し速くなると思われます。興味のある方は試してみてください。
</p>
<hr>
<h3 id="1113">11月13日</h3>
<h4 id="13_1">●レンジコーダの復号処理について</h4>
<p> 昨日、Guest Book で大地さんが投稿された「高速化アルゴリズム」ですが、ジオシティーズのゲストブックに問題があり、プログラムリストのほとんどが掲載されていませんでした。さっそく、大地さんからメールで投稿内容をお送りいただきました。大地さん、ありがとうございます。
</p>
<p> 大地さんの投稿内容は、レンジコーダのデコード部で使用する記号の探索処理についてです。記号の探索処理は、記号数が多くなると線形探索よりも二分探索を使った方が高速です。大地さんはレンジコーダ用の高速な二分探索（バイナリサーチ）を提案されています。大地さんのメールから転載します。
</p>
<section class="contents">
<p> ---------- 以下は大地さんのメールから転載 ----------
</p>
<br>
<p> まずバイナリサーチからいきますと以下のようになります。
</p>
<pre class="list">
    int c = 0, j;
    for (j=128; j; j&gt;&gt;=1) c += (sum[c+j] &lt;= tmp1) ? j : 0;
</pre>
<p> if 文を使わずに三項演算子を使って高速化しているのがポイントです。当然ですがバイナリサーチですのでシンボルの数が 256 であれば比較回数は常に 8 回となります。ランダムデータであればおそらくこれが最速なのですが、実際のデータは頻度の偏りが大きい事が多く、0 ばかりが出現するような場合はリニアサーチでも良い事もあります。そこでリニアとバイナリを組み合わせたハイブリッドサーチを作りました。
</p>
<pre class="list">
    [Hybrid Search]
    int c = 0, j;
    for (j=64; j; j&gt;&gt;=2) {
        if (sum[c+j] &lt;= tmp1) c += j;
        else continue;
        if (sum[c+j] &lt;= tmp1) c += j;
        else continue;
        if (sum[c+j] &lt;= tmp1) c += j;
    }
</pre>
<p> 調べるべき範囲を 4 分割してリニアサーチをかけます。比較回数は最短で 4 回、最長で 12 回となります。ランダムデータであれば当然バイナリサーチに負けてしまいますが、英文などのような偏ったデータの場合は多くの場合高速化されます。お試しあれ。
</p>
<br>
<p> ---------- ここまで ----------
</p>
</section>
<p> なるほど、これはとても面白いアイデアだと思います。M.Hiroi も試してみたいと思います。ただし、大地さんのプログラムでは、記号は 256 種類 (0 - 255) までなので、EOF (たとえば 256) を含める場合はプログラムを改造する必要があります。ご注意ください。興味のある方は、ぜひ試してみてください。
</p>
<hr>
<h3 id="1105">11月5日</h3>
<h4 id="05_1">●LZMA</h4>
<p> データ圧縮のお話です。最近、M.Hiroi は LZSS 符号の改良に関心を持っていて、いろいろ調べているうちに 7-ZIP という圧縮ツールに行き着きました。7-ZIP の作者は Igor Pavlov です。7-ZIP はいくつかの圧縮方式をサポートしていて、その中でデフォルトで使用される LZMA という圧縮方式が LZ77 符号をベースにしています。LZMA はアプリケーションに組み込むことも考えられていて、ソースファイルやドキュメントなど必要なものは LZMA SDK からダウンロードすることができます。
</p>
<p> LZMA SDK には実行形式ファイル lzma.exe が含まれているので、さっそく試してみることにしました。<a href="http://corpus.canterbury.ac.nz/">Canterbury Corpus</a> で配布されているテストデータ <a href="http://corpus.canterbury.ac.nz/descriptions/#cantrbry">The Canterbury Corpus</a> を圧縮してみましょう。ご参考までに、LHA, bzip2, bsrc2 <SUP><a href="memo04.html#cite1">[1]</a></SUP> の結果も示します。bzip2 と bsrc2 はブロックソートを用いた圧縮ツールです。LZMA の設定はデフォルトのままです。
</p>
<TABLE border=1>
<caption>表：The Canterbury Corpus の評価結果</caption>
<thead>
  <tr><th>ファイル名</th><th>サイズ</th><th>LZMA</th><th>LHA</th><th>bzip2</th><th>bsrc2</th></tr>
</thead>
<tbody>
  <tr><td>alice29.txt </td><td>152,089  </td><td>48,447 </td><td>59,117 </td><td>43,202 </td><td>41,420 </td></tr>
  <tr><td>asyoulik.txt</td><td>125,179  </td><td>44,503 </td><td>52,341 </td><td>39,569 </td><td>38,308 </td></tr>
  <tr><td>cp.html     </td><td>24,603   </td><td>7,591  </td><td>8,384  </td><td>7,624  </td><td>7,404 </td></tr>
  <tr><td>fields.c    </td><td>11,150   </td><td>2,976  </td><td>3,170  </td><td>3,039  </td><td>2,918 </td></tr>
  <tr><td>grammar.lsp </td><td>3,721    </td><td>1,241  </td><td>1,271  </td><td>1,283  </td><td>1,192 </td></tr>
  <tr><td>kennedy.xls </td><td>1,029,744</td><td> 52,387</td><td>198,342</td><td>130,280</td><td>88,329 </td></tr>
  <tr><td>lcet10.txt  </td><td>426,754  </td><td>119,366</td><td>159,558</td><td>107,706</td><td>103,052 </td></tr>
  <tr><td>plrabn12.txt</td><td>481,861  </td><td>165,324</td><td>210,045</td><td>145,577</td><td>139,826 </td></tr>
  <tr><td>ptt5        </td><td>513,216  </td><td>40,920 </td><td>52,305 </td><td>49,759 </td><td>47,293 </td></tr>
  <tr><td>sum         </td><td>38,240   </td><td> 9,499 </td><td>13,993 </td><td>12,909 </td><td>12,123 </td></tr>
  <tr><td>xargs.1     </td><td>4,227    </td><td>1,762  </td><td>1,778  </td><td>1,762  </td><td>1,657 </td></tr>
  <tr><td>合計        </td><td>2,810,784</td><td>494,016</td><td>760,304</td><td>542,710</td><td>483,522 </td></tr>
</tbody>
</table>
<p> LZMA は LHA を大きく上回る圧縮率を叩き出しています。テキストファイルでは bzip2 の圧縮率には及ばないものの、kennedy.xls, ptt5, sum では bzip2 と bsrc2 を上回る圧縮率になりました。特に kennedy.xls の圧縮率がとても高いので、合計値では bzip2 を上回る圧縮率になりました。
</p>

<p> 今度は、The Canterbury Corpus (11 ファイル) を tar でまとめたファイル Canterbury と <a href="http://corpus.canterbury.ac.nz/descriptions/#large">The Large Corpus</a> を圧縮してみました。ブロックソートの圧縮率はバッファサイズによって大きく変化します。bzip2 のバッファサイズは最大の 900 k byte に、bsrc2 のバッファサイズは 4 M byte に設定しました。
</p>

<table border=1>
<caption>表：The Large Corpus の評価結果</caption>
<thead>
  <tr><th>ファイル名</th><th>サイズ</th><th>LZMA</th><th>LHA</th><th>bzip2</th><th>bsrc2</th></tr>
</thead>
<tbody>
  <tr><td>bible.txt   </td><td> 4,047,392</td><td>  885,207</td><td>1,310,048</td><td>  845,623</td><td>  759,499</td></tr>
  <tr><td>Canterbury  </td><td> 2,821,120</td><td>  484,946</td><td>  761,838</td><td>  568,468</td><td>  499,871</td></tr>
  <tr><td>e.coli      </td><td> 4,638,690</td><td>1,186,340</td><td>1,322,746</td><td>1,251,004</td><td>1,153,779</td></tr>
  <tr><td>world192.txt</td><td> 2,473,400</td><td>  484,877</td><td>  991,922</td><td>  489,583</td><td>  412,714</td></tr>
  <tr><td>合計        </td><td>13,980,602</td><td>3,041,370</td><td>4,386,554</td><td>3,154,678</td><td>2,825,863</td></tr>
</tbody>
</table>

<p> LZMA の圧縮率はとても高く、もはや LHA とは比較になりませんね。bible.txt 以外のファイルでは bzip2 を上回る高い圧縮率になりました。LZ77 符号をベースにした圧縮ツールで、ブロックソートに匹敵する高い圧縮率を叩き出すとは、本当に驚きました。そのかわり、圧縮処理には時間がかかるようです。興味のある方は、いろいろなファイルで試してみてください。
</p>
<div class="note">
-- 参考文献とURL --------<BR>
<a name="cite1">[1]</a> 広井誠, 『高性能圧縮ツール bsrc の改良 bsrc2』, Interface 2004 年 10 月号, 11 月号, ＣＱ出版社<BR>
ソースリストは <a href="http://www.cqpub.co.jp/interface/">http://www.cqpub.co.jp/interface/</a> からダウンロードできます。<BR>
</div>
</section>
<hr>
<a name="0010">2004 年 10 月</a>
<hr>
<section class="contents">
<h3 id="30">10月30日</h3>
<h4 id="30_1">●地震お見舞いのお礼</h4>
<p> このたびの新潟県中越地震では、皆さまよりお見舞いをいただき、誠にありがとうございました。とても大きな揺れで生きた心地がしなかったのですが、幸いにもわが家ではたいした被害もなくすみましたので、ご安心くださいませ。今回の地震は余震活動が活発で、いつまた大きな余震がくるか不安だったのですが、ようやくおちついて後始末もできるようになりました。
</p>
<p> 余震活動は収まりつつありますが、いまだに多くの方々が避難生活を余儀なくされています。各地の被災者の皆さまに心からお見舞いを申しあげます。
</p>
<h4 id="30_2">●変形版・ライツアウト 4 行 5 列盤の最長手数</h4>
<p> <a href="memo04.html#1019_2">10 月 19 日</a> の続きです。変形版・ライツアウト 4 行 5 列盤の最長手数を幅優先探索で求めてみました。
</p>
<pre class="item">
1手のパターン数 20
2手のパターン数 190
3手のパターン数 1140
4手のパターン数 4845
5手のパターン数 14751
6手のパターン数 30500
7手のパターン数 39625
8手のパターン数 30000
9手のパターン数 10000
合計 131072 個
</pre>
<p> 最長手数は 9 手になりました。局面の総数はライトがすべて消えている完成形も含めて全部で 131072 通りになりました。局面の総数は 5 行 5 列盤とたまたま同じになりましたが、最長手数は 1 手長くなりました。
</p>
<hr>
<h3 id="1019">10月19日</h3>
<h4 id="19_1">●URL 転送サービス</h4>
<p> Yahoo! ジオシティーズが旧ジオシティーズから新ジオシティーズへの「URL 転送サービス」を始めました。詳しくは Yahoo! ジオシティーズのヘルプ 旧ジオシティーズから新ジオシティーズへURL転送したい をお読みください。
</p>
<p> 本日、URL の転送設定を行いましたので、旧 URL (<a href="http://www.geocities.co.jp/SiliconValley-Oakland/1680/">http://www.geocities.co.jp/SiliconValley-Oakland/1680/</a>) のアクセスは新 URL (<a href="index.html">http://www.geocities.jp/m_hiroi/</a>) へ転送されます。これにともない、トップページにあったジオシティーズのカウンタを復活させました。
</p>
<p> 実は、ジオシティーズの <a href="http://messages.yahoo.co.jp/?action=topics&board=2000672&type=r&sid=2000672">助け合い広場</a> で、このサービスが準備されていることは知っていたのですが、いつのまにか開始されていたのでちょっと驚きました。このような重要なサービスは「ヘルプ」に追加するだけではなく、<a href="http://geocities.yahoo.co.jp">トップページ</a> とか <a href="http://geocities.yahoo.co.jp/v/info/index.html">お知らせ</a> できちんと説明してもらいたいと思います。
</p>
<p> まあ、このほかにも 10 月下旬からは容量が 50 MB に増えるなど、ジオシティーズもがんばっているようなので、M.Hiroi's Home Page はこのまま続けていこうと思っています。これからもよろしくお願いいたします。
</p>

<h4 id="1019_2">●変形版・ライツアウトの最長手数</h4>
<p> <a href="memo04.html#1015">10 月 15 日</a> の続きです。変形版・ライツアウト 5 行 5 列盤の最長手数を幅優先探索で求めてみました。
</p>
<pre class="item">
1手のパターン数 25
2手のパターン数 300
3手のパターン数 2300
4手のパターン数 11775
5手のパターン数 36571
6手のパターン数 51540
7手のパターン数 26640
8手のパターン数 1920
合計 131072 通り
</pre>
<p> 最長手数は 8 手になりました。局面の総数はライトがすべて消えている完成形も含めて全部で 131072 通りになりました。ライツアウトよりも局面の総数が少なくて最長手数が短いという結果になりました。
</p>
<p> ちなみに 4 行 4 列盤の場合、局面の総数は 65536 通りになるので、ライトがどんな点灯パターンでも解くことができます。それでは、盤を 4 行 5 列にするとどうなるのでしょうか。興味のある方は調べてみてください。
</p>
<hr>
<h3 id="1015">10月15日</h3>
<h4 id="15_1">●変形版・ライツアウト (2) の解答</h4>
<p> <a href="memo04.html#1010">10 月 10 日</a> に出題した「変形版・ライツアウト(2)」の解答です。
</p>
<div class="question">
<b>[解答]</b> 変形版ライツアウト(2)
<pre class="fig">
          [問題]               [解答]

  ■■■■      □□□□      ●●●●
  ■■■■ ─→ □□□□      ●●●●
  ■■■■      □□□□      ●●●●
  ■■■■      □□□□      ●●●●

   START          GOAL     ●：押すボタン  

        図：変形版ライツアウト(2)
</pre>
</div>
<p> 最短手数は 16 手、つまり全部のボタンを押さないと解くことはできません。これが 4 行 4 列盤での最長手数の局面になります。ちなみに、n 行 n 列盤で全部のボタンを押すと、各ボタンの状態は 2n - 1 回（奇数回）反転することになります。したがって、n が奇数の場合でも、ボタンを全部押すと解くことができます。ただし、前回説明したように、n が奇数の場合は同じ行または列のボタンを n 個押した方が短い手数で解くことができます。
</p>
<p> それでは、ここで問題です。5 行 5 列盤の最長手数は何手になるのでしょうか。興味のある方は挑戦してみてください。
</p>
<hr>
<h3 id="1010">10月10日</h3>
<h4 id="10_1">●変形版「ライツアウト」の解答</h4>
<p> <a href="memo04.html#1003">10 月 3 日</a> に出題したパズルの解答です。
</p>
<div class="question">
<b>[解答]</b> 変形版ライツアウト
<pre class="fig">
            [問題]               [解答の一例]  

  ■■■■■      □□□□□      ・・・・・  
  ■■■■■      □□□□□      ・・・・・  
  ■■■■■ ─→ □□□□□      ●●●●●  
  ■■■■■      □□□□□      ・・・・・  
  ■■■■■      □□□□□      ・・・・・  
                
  ＳＴＡＴＲ       ＧＯＡＬ     ●：押すボタン  

            図：変形版ライツアウト
</pre>
</div>
<p> 上図に示したように最短手数は 5 手で、同じ行または列のボタン 5 つ押すと、全てのボタンの状態を反転させることができます。
</p>
<p> ちなみに、n 行 n 列盤で同じ行または列のボタンを n 個押した場合、押したボタンの状態は n 回反転し、それ以外のボタンは 1 回だけ反転します。押すボタンは同じ行または列にあるので、そのボタンの状態が n 回反転するのは自明ですね。したがって、n が奇数であればボタンの状態が奇数回反転するので、点灯しているボタンを消灯することができます。ほかのボタンは 1 回だけ反転しているので、これで全てのボタンを消灯することができます。
</p>
<p> 当然ですが、n が偶数の場合はこの方法で解くことはできません。そこで問題です。
</p>
<div class="question">
<b>[問題]</b> 変形版ライツアウト
<pre class="fig">
          [問題]

  ■■■■      □□□□  
  ■■■■ ─→ □□□□
  ■■■■      □□□□
  ■■■■      □□□□

   START          GOAL

図：変形版ライツアウト(2)
</pre>
<p> 4 行 4 列盤のすべてのボタンが点灯している状態 (START) で、ボタンをすべて消灯する最短手数を求めてください。
</p>
</div>
<p> それではパズルをお楽しみください。
</p>
<hr>
<h3 id="06">10月6日</h3>
<h4 id="06_1">●ジオシティーズの統合</h4>
<p> 10 月 5 日より、旧ジオシティーズと拡張版ジオシティーズ（新ジオシティーズ）が統合されました。M.Hiroi's Home Page の移行手続きは無事に終了し、今までの URL <a href="http://www.geocities.co.jp/SiliconValley-Oakland/1680/">http://www.geocities.co.jp/SiliconValley-Oakland/1680/</a> と新しい URL <a href="index.html">http://www.geocities.jp/m_hiroi/</a> のどちらからでもアクセスすることができます。
</p>
<p> ただし、トラブルが無いわけではありません。トップページにあるジオシティーズのカウンタが正常に表示されないのです。新 URL からアクセスすると、M.Hiroi が設定したカウンタが表示されるのですが、旧 URL からアクセスすると別のカウンタが表示されます。どうやら、新 URL と旧 URL のアクセスを別々にカウントして表示しているみたいです。<del>まあ、そのうちに修正されると思いますが、とりあえず、</del>いま使っている「スゴいカウンター」を表示することにしました。
</p>
<h4 id="06_2">●追記</h4>
<p> カウンタの動作ですが、ジオシティーズの <a href="http://help.yahoo.co.jp/help/jp/geo/counter/counter-11.html">カウンタヘルプ</a> によると、
</p>
<p><CITE>
移行手続き後、旧ジオシティーズと新ジオシティーズのURLを両方とも残した場合、新ジオシティーズのカウンタツールは新ジオシティーズのURLでアクセスされれた方のみカウントされます。
</CITE>
</p>

<p> とのことです。ようするに、今の動作が「仕様」だということです。これには M.Hiroi も驚きました。たぶん、旧 URL もずっと使えるのではなく、そのうちに廃止されて新 URL だけになるのでしょう。そうなったら、他の場所へ引っ越ししようかな、と思っています。
</p>
<hr>
<h3 id="1003">10月3日</h3>
<h4 id="03_1">●変形版「ライツアウト」</h4>
<p> パズルのお話です。ライツアウトは「(株)タカラ」から1995年に発売されたパズルゲーム機で、光っているボタンをすべて消すことができればクリアとなります。ライツアウトのルールは拙作のページ <a href="puzzle/lightout.html">ライツアウトの解法</a> をお読みください。
</p>
<p> 今回の問題は、ボタンを押したときの反転パターンを変えた「ライツアウト」です。
</p>
<div class="question">
<b>[問題]</b> 変形版ライツアウト
<pre class="fig">
        [反転パターン]                    [問題]

  □□□□□      □□■□□    ■■■■■      □□□□□  
  □□□□□      □□■□□    ■■■■■      □□□□□
  □□□□□ ─→ ■■■■■    ■■■■■ ─→ □□□□□
  □□□□□      □□■□□    ■■■■■      □□□□□
  □□□□□      □□■□□    ■■■■■      □□□□□
                
   中央のボタンを押した場合     ＳＴＡＴＲ       ＧＯＡＬ

                  図：変形版ライツアウト
</pre>
<p> 今回の問題は上図に示したように、押したボタンと同じ行と列にあるボタンがすべて反転します。すべてのボタンが点灯している状態 (START) で、ボタンをすべて消灯する最短手数を求めてください。
</p>
</div>
<p> それではパズルをお楽しみください。
</p>

</section>
<hr>
<a name="0009">2004 年 9 月</a>
<hr>
<section class="contents">
<h3 id="25">9月25日</h3>
<h4 id="25_1">●Interface 11 月号</h4>
<p> <a href="http://www.cqpub.co.jp/">ＣＱ出版社</a> 発行の月刊誌 <a href="http://www.cqpub.co.jp/interface/">Interface 11 月号</a> (9/25発売) で、M.Hiroi は「高性能圧縮ツール bsrc の改良 bsrc2（後編）」を執筆しました。後編は三分割法によるブロックソートの高速化と 0-1-2 coding と混合法による圧縮率の改善について解説しています。圧縮アルゴリズムに興味のある方は読んでみてください。
</p>
<hr>
<h3 id="22">9月22日</h3>
<h4 id="22_1">●140,000 Hit!</h4>
<p> 本日、カウンタが 140,000 を突破しました。多くの方にアクセスしていただき、とても嬉しく思います。リンクしていただいているホームページ管理者の皆様、そして、なによりも M.Hiroi's Home Page に来てくださる皆様に厚くお礼申し上げます。最近は <a href="xyzzy_lisp.html">xyzzy Lisp</a> のアクセス数が一番多く、次が Ｃ言語講座 で、その次が <a href="perl_tk/index.html">Perl/Tk</a> になりました。
</p>
<p> これからもがんばりますので、よろしくお願い申し上げます。
</p>
<hr>
<h3 id="20">9月20日</h3>
<h4 id="20_1">●ジオシティーズの統合</h4>
<p> 10 月 5 日より旧ジオシティーズは拡張版ジオシティーズ（新ジオシティーズ）に統合されることになりました。旧ジオシティーズで公開されているページは「移行手続き」を行うことで簡単に新ジオシティーズへ移すことができ、今までの URL (http://www.geocities.co.jp/SiliconValley-Oakland/1680/) でも新ジオシティーズの URL でもページにアクセスすることができるようです。ただし、移行手続きには Yahoo! JAPAN ID が必要になります。
</p>
<p> 新ジオシティーズへ移行しても、今までの URL でアクセスできるのは大きなメリットだと思っています。M.Hiroi は Yahoo! JAPAN ID を持っているので、今のところ移行手続きを行って M.Hiroi's Home Page を新ジオシティーズへ移す予定です。なお、現在のゲストブックは旧ジオシティーズのもので 10 月 5 日までしか利用できません。新しいゲストブックは新ジオシティーズに移ってから用意する予定です。
</p>
<p> しばらくの間、いろいろご迷惑をおかけするかもしれませんが、あしからずご了承くださいませ。
</p>
</section>
<hr>
<a name="0008">2004 年 8 月</a>
<hr>
<section class="contents">
<h3 id="25">8月25日</h3>
<h4 id="25_1">●Interface 10 月号</h4>
<p> <a href="http://www.cqpub.co.jp/">ＣＱ出版社</a> 発行の月刊誌 <a href="http://www.cqpub.co.jp/interface/">Interface 10 月号</a> (8/25発売) で、M.Hiroi は「高性能圧縮ツール bsrc の改良 bsrc2（前編）」を執筆しました。前編はマルチキークイックソートと二段階ソート法によるブロックソートの高速化について解説しています。圧縮アルゴリズムに興味のある方は読んでみてください。
</p>
<hr>
<h3 id="18">8月18日</h3>
<h4 id="18_1">●『Coffee Cups Complex』 for X680x0</h4>
<p><a href="http://www.fsinet.or.jp/~tau/">TAU さん</a> が X680x0 用の新作ゲーム『Coffee Cups Complex』を発表されました。ゲームの内容は「回転パズル」です。パズルが好きな X680x0 ユーザーはぜひ遊んでみてください。
</p>
<hr>
<h3 id="13">8月13日</h3>
<h4 id="13_1">●暑中お見舞いパズルの解答（２）</h4>
<p> <a href="memo04.html#0801">8 月 1 日</a> に出題した「数えて裏返すパズル」の解答です。このパズルはすべての石を裏返すことはできません。最後に白石がひとつ残ることになるので、裏返すことができる石の個数は最大で 8 個になります。実際、このパズルでは 8 個の石を裏返すことができます。手順の一例を示します。
</p>
<ul>
  <li><a href="memo04.html#ans02">8 個の石を裏返す手順（一例）</a>
</ul>
<p> このパズルは 3 番目の石を裏返しにしますが、4 番目の石を裏返しにするとどうなるでしょうか。この場合、6 個の石しか裏返しにすることができません。興味のある方は、ちょっと考えてみてください。
</p>
<hr>
<h3 id="0801">8月1日</h3>
<h4 id="01_1">●暑中お見舞いパズル</h4>
<p> さっそく問題です。
</p>
<div class="question">
<b>[問題２] 数えて裏返すパズル</b><br>
<pre class="fig">
              ○                            ○ 1 &lt;-- 白石を選ぶ 
            ／  ＼                        ／  ＼            
          ○      ○                    ○      ○ 2        
        ／          ＼                ／          ＼        
      ○              ○          1 ○ &lt;-- 選ぶ     ● 3  3 番目の石を
    ／                  ＼        ／                  ＼  裏返しにする  
  ○───○───○───○    ○───●───○───○  
                                2       3
                                       裏返しにする

                    図：数えて裏返すパズル
</pre>
<p> 上図のように、リバーシの石（白）を 9 個並べます。適当な白石をひとつ選び、その石から数えて 3 番目の石が白であれば、裏返しにして黒石にします。黒石を裏返しにすることはできません。数える方向は、線に沿って右回りでも左回りでもかまいません。この条件で、できるだけ多くの石を裏返しにしてください。
</p>
<p> なお、このパズルは hhase さんの Web サイト <a href="http://www.lcv.ne.jp/~hhase/">あそびをせんとや</a> を参考にさせていただきました。「あそびをせんとや」にはパズルやゲームに関する興味深い情報がたくさんあります。hhase さんに感謝いたします。
</p>
</div>
<p> それではパズルをお楽しみください。
</p>
<hr>
<br><br><br><br><br><br><br><br><br><br>
<hr>
<h3 id="ans02">●「数えて裏返すパズル」の解答（一例）</h3>
<pre class="fig">
             ○                          ○ 1                      3 ●
           ／  ＼                      ／  ＼                      ／  ＼          
         ○      ○                  ○      ○ 2              2 ○      ○
       ／          ＼              ／          ＼              ／          ＼      
     ○              ○          ○              ● 3      1 ○              ●
   ／                  ＼      ／                  ＼      ／                  ＼  
 ○───○───○───○  ○───○───○───○  ○───○───○───○

             ●                          ●                          ●            
           ／  ＼                      ／  ＼                      ／  ＼          
         ○      ○                  ○      ○                  ○      ○ 1      
       ／          ＼              ／          ＼              ／          ＼      
   3 ●              ●          ●              ●          ●              ● 2  
   ／                  ＼      ／                  ＼      ／                  ＼  
 ○───○───○───○  ○───●───○───○  ○───●───○───●
 2       1                           3       2       1                           3

             ● 2                        ●                          ●            
           ／  ＼                      ／  ＼                      ／  ＼          
       1 ○      ● 3              3 ●      ●                  ●      ●        
       ／          ＼              ／          ＼              ／          ＼      
     ●              ●        2 ●              ●          ●              ●    
   ／                  ＼      ／                  ＼      ／                  ＼  
 ○───●───○───●  ○───●───○───●  ○───●───●───●
                             1                           1       2       3
</pre>
</section>
<hr>
<a name="0007">2004 年 7 月</a>
<hr>
<section class="contents">
<h3 id="10">7月10日</h3>
<h4 id="10_1">●祝！ M.Hiroi's Home Page 開設四周年</h4>
<p> M.Hiroi's Home Page を開設してから本日でちょうど 4 年になりました。この 1 年間で 40,000 Hit を越えるアクセスがあり、1 日のアクセス数は平均で 116 Hit になりました。多くの方にアクセスしていただき、とても嬉しく思います。リンクしていただいているホームページ管理者の皆様、そして、なによりも M.Hiroi's Home Page に来てくださる皆様に厚くお礼申し上げます。
</p>

<p> これからもがんばりますので、今後ともよろしくお願い申し上げます。
</p>
</section>
<hr>
<a name="0006">2004 年 6 月</a>
<hr>
<section class="contents">
<h3 id="25">6月25日</h3>
<h4 id="25_1">●130,000 Hit!</h4>
<p> 本日、カウンタが 130,000 を突破しました。多くの方にアクセスしていただき、とても嬉しく思います。リンクしていただいているホームページ管理者の皆様、そして、なによりも M.Hiroi's Home Page に来てくださる皆様に厚くお礼申し上げます。
</p>

<p> 最近は Ｃ言語講座 のアクセス数が一番多く、次が <a href="xyzzy_lisp.html">xyzzy Lisp</a> で、その次が <a href="prolog/index.html">Prolog</a> になりました。Ｃ言語講座と Prolog は 4 月中旬頃からアクセス数が増加しています。学校の授業が始まって、学生さんのアクセスが多くなっているのかもしれませんね。
</p>
<p> これからもがんばりますので、よろしくお願い申し上げます。
</p>
<hr>
<h3 id="19">6月19日</h3>
<h4 id="19_1">●勝手にリンク</h4>
<p> ソートアルゴリズムについて参考になるページを見つけたので紹介します。
</p>
<ul>
  <li><a href="http://www.hgc.jp/~tshibuya/index-j.html">Tetsuo Shibuya's home page</a>
</ul>
<p> 渋谷哲朗氏の Web サイトです。<a href="http://www.hgc.jp/~tshibuya/classes/index.html">講義資料</a> にある「ソートアルゴリズムⅡ (PDF ファイル) 」 では、基数ソート(radix sort)、マージソート、ソートの並列化など、ソートアルゴリズムについて説明されています。マルチキークイックソートや MSD radix sort など、文字列のソートに興味のある方はとても参考になると思います。
</p>
<p> 最後に、講義資料を公開されている渋谷哲朗氏に感謝いたします。
</p>
<hr>
<h3 id="05">6月5日</h3>
<h4 id="05_1">●S-Prolog と節の入力</h4>
<p> Prolog のお話です。10 年以上前の話になりますが、M.Hiroi がお世話になった Prolog 処理系に S-Prolog があります。S-Prolog は、<a href="http://hp.vector.co.jp/authors/VA000672/">佐藤隆さん</a> が作成された MS-DOS 上で動作する Prolog インタプリタです。当時、M.Hiroi はパソコン通信をやっていなかったので、C MAGAZINE の付録ディスクから入手しました。
</p>
<p> S-Prolog はソースが公開されているので、M.Hiroi は XGCC (X68000 用 GCC) でコンパイルして、X68000 上で S-Prolog を動かしていました。S-Prolog は他の環境への移植を考慮して作成されているので、X68000 に移植するのは簡単でした。あのころは X68000 上で S-Prolog を動かした方が快適だったのです。そして、S-Prolog は処理系とともに USER'S MANUAL も大変良くできているので、Prolog 初心者の M.Hiroi にはとても参考になりました。作者の佐藤隆さんに感謝いたします。
</p>
<p> S-Prolog の場合、起動したあとプロンプト | が表示されて、節（事実や規則など）を入力する状態になります。ここが SWI-Prolog と違うところです。S-Prolog では、質問を入力するときに ?- を付け加える必要があります。簡単な例を示します。
</p>
<pre>
| like( taro, coffee ).
| ?-like( taro, X ).

X = coffee -&gt;;
no
</pre>
<p> このように、S-Prolog では端末から事実や規則をそのまま入力することができます。SWI-Prolog の場合、プロンプトが ?- なので、質問を入力する状態になっています。もしも、S-Prolog のように端末から事実や規則を入力したい場合は、consult や [ ]  などプログラムを読み込む述語に <B>user</B> を指定します。user は標準入出力を指定する特別なファイル名です。
</p>

<p> SWI-Prolog の簡単な実行例を示します。入力の終了は ^D (Ctrl + d) です。
</p>
<pre>
?- [<b>user</b>].
|: foo( a, b ).
|: foo( c, d ).
|: （ここで ^D を入力）
% user compiled 14.55 sec, 528 bytes

Yes
?- foo( X, Y ).

X = a
Y = b ;

X = c
Y = d ;

No
?- 
</pre>
<p> このように、SWI-Prolog でも端末から事実や規則を入力することができます。Prolog のファイル入出力については、<a href="prolog/index.html">Prolog Programming</a> で詳しく説明する予定です。
</p>

</section>
<hr>
<a name="0005">2004 年 5 月</a>
<hr>
<section class="contents">
<h3 id="29">5月29日</h3>
<h4 id="29_1">●油分け算の解答</h4>
<p> <a href="memo04.html#0523">5 月 23 日</a> に出題したパズル「油分け算」の解答です。実はこのパズル、7 リットルの容器 A と 10 リットルの容器 B をひとつだけ使って、油を容器 B に 8 リットル入れることができます。ここではその手順を示します。
</p>
<TABLE border=1>
<thead>
  <tr><th>手順</th><th>(A, B)</th></tr>
</thead>
<tbody>
  <tr><td>大きな容器から容器 A へ油を注ぐ</td><td>(7, 0)</td></tr>
  <tr><td>容器 A から容器 B  へ油を注ぐ  </td><td>(0, 7)</td></tr>
  <tr><td>大きな容器から容器 A へ油を注ぐ</td><td>(7, 7)</td></tr>
  <tr><td>容器 A から容器 B へ油を注ぐ   </td><td>(4, 10)</td></tr>
  <tr><td>容器 B の油を大きな容器へ戻す  </td><td>(4, 0)</td></tr>
  <tr><td>容器 A から容器 B へ油を注ぐ   </td><td>(0, 4)</td></tr>
  <tr><td>大きな容器から容器 A へ油を注ぐ</td><td>(7, 4)</td></tr>
  <tr><td>容器 A から容器 B へ油を注ぐ   </td><td>(1, 10)</td></tr>
  <tr><td>容器 B の油を大きな容器へ戻す  </td><td>(1, 0)</td></tr>
  <tr><td>容器 A から容器 B へ油を注ぐ   </td><td>(0, 1)</td></tr>
  <tr><td>大きな容器から容器 A へ油を注ぐ</td><td>(7, 1)</td></tr>
  <tr><td>容器 A から容器 B へ油を注ぐ   </td><td>(0, 8)</td></tr>
</tbody>
</table>
<p> このように、7 リットルの容器 A と 10 リットルの容器 B を使って、油を 8 リットル計ることができます。あとはこの手順を繰り返すことで、10 リットルの容器 4 つに油を 8 リットルずつ入れることができます。もちろん、10 リットルの容器を複数使えば、もっと短い手数で油を分けることができると思います。興味のある方は挑戦してみてください。
</p>
<hr>
<h3 id="0523">5月23日</h3>
<h4 id="23_1">●油分け算</h4>
<p> さっそく問題です。
</p>
<div class="question">
<b>[問題] 油分け算</b>
<p> 大きな容器に 32 リットルの油があります。この油を 4 等分したいのですが、10 リットルの容器が 4 つ、7 リットルの容器がひとつしかありません。これらの容器を使って、10 リットルの容器 4 つに油を 8 リットルずつ入れてください。
</p>
</div>
<p> それではパズルをお楽しみください。
</p>
<div class="note">
-- <a name="cite2">参考文献</a> --------<BR>
[1] 中村義作,『ブルーバックス B-1041 どこまで解ける日本の算法』, 講談社, 1994
</div>
<hr>
<h3 id="08">5月8日</h3>
<h4 id="08_1">●ライン・パズルの解答</h4>
<p> <a href="memo04.html#0502">5 月 2 日</a> に出題した「ライン・パズル」の解答です。
</p>
<ul>
  <li><a href="memo04.html#ans1">問題１ (32 手)</a>
  <li><a href="memo04.html#ans2">問題２ (34 手)</a>
  <li><a href="memo04.html#ans3">問題３ (40 手)</a>
</ul>
<hr>
<h3 id="0502">5月2日</h3>
<h4 id="02_1">●ライン・パズル</h4>
<p> 「ライン・パズル」は、「15 パズル」や「箱入り娘」などで有名なスライディングブロックパズルのひとつです。このパズルは円を四等分した模様のピースを 16 枚使います。詳しい説明は <a href="puzzle/index.html">Puzzle DE Programming</a> の <a href="puzzle/linepuz.html">ライン・パズル</a> をお読みください。それでは問題です。
</p>
<div class="question">
<b>[問題] ライン・パズル</b>
<p>問題１<br><img src="img/line01.png" alt="line puzzle 1">
</p>
<p>問題２<br><img src="img/line02.png" alt="line puzzle 2">
</p>
<p>問題３<br><img src="img/line03.png" alt="line puzzle 3">
</p>
<p>各問題の右図から左図までの最短手数を求めてください。
</p>
</div>
<p> それではパズルをお楽しみください。
</p>
<hr>
<br><br><br><br><br><br><br><br><br><br>
<hr>
<h4 id="ans1">●ライン・パズル（問題１）の解答</h4>
<img src="img/line01.png" alt="line puzzle 1">
<pre class="fig">
            ┌─┐
            │Ｅ│  32 手
┌─┬─┬─┼─┤
│０│１│２│３│  3  2  1  0  4  
├─┼─┼─┼─┤  8  9 10 14 15
│４│５│６│７│ 11 10  6  2  1
├─┼─┼─┼─┤  0  4  8  9  5
│８│９│10│11│  6  7 11 15 14
├─┼─┼─┼─┤ 10  9  5  6  7
│12│13│14│15│  3  E
└─┴─┴─┴─┘
</pre>
<h4 id="ans2">●ライン・パズル（問題２）の解答</h4>
<img src="img/line02.png" alt="line puzzle 2">
<pre class="fig">
            ┌─┐
            │Ｅ│  34 手
┌─┬─┬─┼─┤
│０│１│２│３│  3  2  1  5  9  
├─┼─┼─┼─┤  8  4  5  9 10
│４│５│６│７│  6  7  3  2  1
├─┼─┼─┼─┤  5  6  7 11 10
│８│９│10│11│ 14 13  9 10  6
├─┼─┼─┼─┤  2  1  5  9 10
│12│13│14│15│  6  2  3  E
└─┴─┴─┴─┘
</pre>
<h4 id="ans3">●ライン・パズル（問題３）の解答</h4>
<img src="img/line03.png" alt="line puzzle 3">
<pre class="fig">
            ┌─┐
            │Ｅ│  40 手
┌─┬─┬─┼─┤
│０│１│２│３│  3  2  1  5  6  
├─┼─┼─┼─┤  7 11 10  6  2
│４│５│６│７│  3  7  6  5  4
├─┼─┼─┼─┤  8  9 10  6  5
│８│９│10│11│  1  2  3  7 11
├─┼─┼─┼─┤ 10 14 13  9  5
│12│13│14│15│  4  8  9 10  6
└─┴─┴─┴─┘  5  1  2  3  E
</pre>

</section>
<hr>
<a name="0004">2004 年 4 月</a>
<hr>
<section class="contents">
<h3 id="11">4月11日</h3>
<h4 id="11_1">●パズルの解答</h4>
<p> <a href="memo04.html#0404">4 月 4 日</a> に出題した小町数のパズルの解答です。
</p>
<pre class="item">
(A) □□□□□×□□□□□＝１２３４５６７８９
(B)   □□□□×□□□□□＝１２３４５６７８９
(C) □□□□×□□□□□□＝９８７６５４３２１
(D) □□□×□□□□□□□＝９８７６５４３２１
</pre>
<p> <a href="memo04.html#answer">解答</a>
</p>
<hr>
<h3 id="06">4月6日</h3>
<h4 id="06_1">●120,000 Hit!</h4>
<p> 本日、カウンタが 120,000 を突破しました。多くの方にアクセスしていただき、とても嬉しく思います。リンクしていただいているホームページ管理者の皆様、そして、なによりも M.Hiroi's Home Page に来てくださる皆様に厚くお礼申し上げます。
</p>

<p> M.Hiroi's Home Page には 5 つのメインコンテンツがあり、それぞれのトップページに <a href="http://sugoicounter.com/">すごい！！カウンター</a> のカウンタをつけています。2 月下旬ごろ、「すごい！！カウンター」が不調で値をリセットしてしまいましたが、最近は大きなトラブルもなく順調に動作しています。
</p>

<p> 最近のアクセス数は <a href="xyzzy_lisp.html">xyzzy Lisp</a> が 1 位で、2 位が Ｃ言語講座、3 位が <a href="perl_tk/index.html">Perl/Tk memo</a> になりました。今までは、3 月下旬から 4 月上旬にかけてアクセス数はガクッと減少するのですが、今年はトップページのアクセス数が平均で 100 Hit / day を下回ることがなかったので、ちょっと驚いています。
</p>

<p> それでは、これからもがんばりますので、今後ともよろしくお願い申し上げます。
</p>
<hr>
<h3 id="0404">4月4日</h3>
<h4 id="04_1">●小町数のパズル</h4>
<p> それでは問題です。
</p>
<div class="question">
<b>[問題]</b> 小町数<BR>
<p> 次に示す式を完成させてください。□にはどんな数字を入れてもかまいません。
</p>
<pre class="item">
(A) □□□□□×□□□□□＝１２３４５６７８９
(B)   □□□□×□□□□□＝１２３４５６７８９
(C) □□□□×□□□□□□＝９８７６５４３２１
(D) □□□×□□□□□□□＝９８７６５４３２１
</pre>
</div>
<p> (A) は <a href="memo04.html#cite">参考文献</a> に掲載されています。ほかに面白い式はないかプログラムを作って探してみたところ、(B), (C), (D) を見つけました。解があることは保証しますが、手で解くにはちょっと難しいかもしれません。興味のある方は挑戦してみてください。
</p>
<div class="note">
<a name="cite1">-- 参考文献 -----</a><BR>
芦ヶ原伸之, 『ブルーバックス B-1377 超々難問数理パズル 解けるものなら解いてごらん』, 講談社, 2002<br>
</div>
<hr>
<br><br><br><br><br><br><br><br><br><br>
<hr>
<h4 id="answer">●小町数のパズルの解答</h4>
<pre class="item">
(A) １０８２１×１１４０９＝１２３４５６７８９
(B)   ３６０７×３４２２７＝１２３４５６７８９
      ３８０３×３２４６３＝１２３４５６７８９
(C) ２６０１×３７９７２１＝９８７６５４３２１
(D) １５３×６４５５２５７＝９８７６５４３２１
    ２８９×３４１７４８９＝９８７６５４３２１
    ８６７×１１３９１６３＝９８７６５４３２１
</pre>
</section>
<hr>
<a name="0003">2004 年 3 月</a>
<hr>
<section class="contents">
<h3 id="26">3月26日</h3>
<h4 id="26_1">●X68000 Emulator in Java 公開</h4>
<p> M.Kamada さんの <a href="http://homepage2.nifty.com/m_kamada/index.htm">STUDIO KAMADA</a> で <a href="http://homepage2.nifty.com/m_kamada/java/x68000/index.htm">X68000 Emulator in Java</a> が公開されました。ソースリストも公開されています。いやー、本当にすごいですね。素晴らしいプログラムを公開された M.Kamada さんに深く感謝いたします。X68000 に興味のある方は STUDIO KAMADA へ GO!! です。
</p>
<h4 id="26_2">●頭の体操</h4>
<p> M.Kamada さんの <a href="http://homepage2.nifty.com/m_kamada/di200403.htm#24_03">日記 (3/24)</a> で「頭の体操」が出題されています。このパズルは数字を環状に並べると難しくなりますが、<b>1 から N までの数字を一列に並べて</b>、隣り合う数字の和が平方数になることを条件にすると、もっと簡単になります。<a href="memo04.html#cite1">参考文献</a> によると、この条件では N = 15 で解があり、15 未満の場合は解がありません。興味のある方は挑戦してみてください。
</p>
<div class="note">
<a name="cite1">-- 参考文献 -----</a><br>
芦ヶ原伸之, 『ブルーバックス B-1377 超々難問数理パズル 解けるものなら解いてごらん』, 講談社, 2002<br>
</div>
<hr>
<h3 id="21">3月21日</h3>
<h4 id="21_1">●勝手にリンク</h4>
<p> またまたデータ圧縮のお話です。<a HREF="http://www.geocities.jp/m_hiroi/guestbook2.html">Guest Book</a> では、大地さんから優れた方法を教えてもらいました。mtf5zle と BWT+OC の圧縮率にはとても驚きましたが、ほかにもブロックソートで高い圧縮率を達成している Web サイトがありましたので紹介します。
</p>

<p> <a href="http://homepage3.nifty.com/wpage/"><b>white page</b></a>
</p>

<p> yuu (yuta mori) さんの Web サイトです。<cite>『ここは、Suffix ArrayやBWTをあれこれする(?)ページです 。』</cite> とのことですが、suffix array やブロックソート関連の最先端のプログラムが公開されている素晴らしいサイトです。
</p>

<p> たとえば、ブロックソート後の処理 (2nd step とか 2nd stage と呼ぶ) では MTF が一般的ですが、ほかにもいろいろなアルゴリズムが考案されています。
</p>
<ul>
  <li>IF (Inversion Frequencies)
  <li>AWFC (Advanced Weighted Frequency count)
  <li>DC (Distance Coding)
</ul>
<p> white page では、2nd step 用のいろいろなプログラムとその実行結果 (Compression ratios, Compression times, Decompression times) が公開されています。M.Hiroi は上記のアルゴリズムを理解していませんが、結果を見ると、とても優れたアルゴリズムのようです。また、yuu さんが開発された mtfc, mtfc2 は、AWFC と同等以上の圧縮率を達成しています。zzip を越える圧縮率にはとても驚きました。
</p>

<p> そして、これらのアルゴリズムの力を十分に引き出しているのが、レンジコーダの binary model です。簡単に説明すると、binary model は zzip のように記号を 2 種類に分けて、符号化に「二値算術符号（レンジコーダ）」を用いているところが特徴です。この方法には M.Hiroi の目からウロコが落ちました。
</p>

<p> ブロックソートの符号化で、二値のレンジコーダを用いる方法は寡聞にして知りませんでした。white page には binary model の説明がないのでわかりませんが、yuu さんのオリジナルでしょうか。ブロックソート向きの優れたモデルだと思います。
</p>

<p> このほかに、二段階ソート法や copy method など suffix array 関連のプログラムが多数公開されています。ブロックソートや suffix array に興味のある方は必見です。最後に、素晴らしいプログラムを公開されている yuu さんに深く感謝いたします。
</p>
<hr>
<h3 id="17">3月17日</h3>
<h4 id="17_1">●bsrc の改良</h4>
<p> データ圧縮のお話です。大地さんが <a HREF="http://www.geocities.jp/m_hiroi/guestbook2.html">Guest Book</a> で紹介された改良型 MTF 法 (MTF5) を、拙作のプログラム bsrc <sup><a href="memo04.html#cite1">[1]</a></sup> とその改良版 bsrc2 <sup><a href="memo04.html#note1">[*1]</a></sup> で試してみました。大地さんに感謝いたします。
</p>
<p> bsrc2 の主な改良点 <sup><a href="memo04.html#note2">[*2]</a></sup> を示します。
</p>
<ol>
  <li>ブロックソートに「三分割法(rate-2)」を採用
  <li>ブロックソート前のランレングスを廃止
  <li>ランレングス (ZLE + RLE) で RLE を行う連長を 3 から 7 に変更
  <li>有限文脈モデルの最高次数を order-2 から order-3 に変更
  <li>出現頻度表の合計値を基準にしたモデルの選択 (update exclusion を含む)
  <li>出現頻度表の最大値を変更 (first code = 0x1000, second code = 0x800)
  <li>first code でモデルを選択する場合、記号 1 を 0 に変換する
</ol>
<p> 7 について簡単に説明します。Zero Run Length (ZLE) の場合、記号 0 をランレングスで符号化し、連長を記号 0 と 1 で表します。したがって、first code の直前の記号列が (0, 1, 0) の場合、実際の記号は 0 が続いているわけです。そこで、実際の記号列に合わせて 1 を 0 に変換します。つまり、直前の記号列が (0, 0, 0) のモデルを選択するわけです。実際に試してみたところ、少しですが圧縮率が向上しました。
</p>
<div class="note">
-- 補足 (2004/08/29) --------<br>
<a name="note1">[*1]</a> ここでの bsrc2 は、Interface 2004 年 10 月号に掲載された『高性能圧縮ツール bsrc の改良 bsrc2』とは違います。Interface 版 bsrc2 の方が高性能です。<br>
<a name="note2">[*2]</a> 4 から 7 までの改良よりも、0-1-2 coding を適用した方が高い圧縮率になります。興味のある方は拙作の Ｃ言語講座 番外編 0-1-2 coding をお読みください。
</div>
<p> それでは、実行結果を示します。<a href="http://corpus.canterbury.ac.nz/">Canterbury Corpus</a>
で配布されているテストデータ <a href="http://corpus.canterbury.ac.nz/descriptions/#cantrbry">The Canterbury Corpus</a> を圧縮してみました。プログラムは bsrc に MTF5 を適用したものが bsrc' で、bsrc2 に適用したものが bsrc2' です。ご参考までに bzip2 と zzip <sup><a href="memo04.html#cite2">[2]</a></sup> の結果も示します
</p>
<TABLE border=1>
<caption>表：The Canterbury Corpus の評価結果</caption>
<thead>
  <tr><th>ファイル名</th><th>サイズ</th><th>bsrc</th><th>bsrc'</th><th>bsrc2</th><th>bsrc2'</th><th>bzip2</th><th>zzip</th></tr>
</thead>
<tbody>
  <tr><td>alice29.txt </td><td>  152,089</td><td> 43,230</td><td> 43,036</td><td> 42,768</td><td>43,109 </td><td>43,202</td> <td>41,962 </td></tr>
  <tr><td>asyoulik.txt</td><td>  125,179</td><td> 39,919</td><td> 39,760</td><td> 39,539</td><td>39,729 </td><td>39,569</td> <td>38,747 </td></tr>
  <tr><td>cp.html     </td><td>   24,603</td><td>  7,625</td><td>  7,601</td><td>  7,563</td><td>7,593  </td><td>7,624</td>  <td>7,509 </td></tr>
  <tr><td>fields.c    </td><td>   11,150</td><td>  3,023</td><td>  3,022</td><td>  2,977</td><td>3,025  </td><td>3,039</td>  <td>2,971 </td></tr>
  <tr><td>grammar.lsp </td><td>    3,721</td><td>  1,244</td><td>  1,241</td><td>  1,209</td><td>1,225  </td><td>1,283</td>  <td>1,243 </td></tr>
  <tr><td>kennedy.xls </td><td>1,029,744</td><td> 99,949</td><td>139,523</td><td> 97,607</td><td>132,191</td><td>130,280</td><td>24,778 </td></tr>
  <tr><td>lcet10.txt  </td><td>  426,754</td><td>108,013</td><td>107,584</td><td>106,502</td><td>107,568</td><td>107,706</td><td>104,193 </td></tr>
  <tr><td>plrabn12.txt</td><td>  481,861</td><td>146,601</td><td>146,054</td><td>144,440</td><td>145,482</td><td>145,577</td><td>141,418 </td></tr>
  <tr><td>ptt5        </td><td>  513,216</td><td> 48,794</td><td> 48,905</td><td> 48,766</td><td>49,485 </td><td>49,759</td> <td>48,329 </td></tr>
  <tr><td>sum         </td><td>   38,240</td><td> 12,599</td><td> 12,580</td><td> 12,527</td><td>12,697 </td><td>12,909</td> <td>12,297 </td></tr>
  <tr><td>xargs.1     </td><td>    4,227</td><td>  1,711</td><td>  1,706</td><td>  1,661</td><td>1,686  </td><td>1,762</td>  <td>1,710 </td></tr>
  <tr><td>合計        </td><td>2,810,784</td><td>512,708</td><td>551,012</td><td>505,559</td><td>543,790</td><td>542,710</td><td>425,157</td></tr>
</tbody>
</table>

<p> MTF5 の効果ですが、bsrc に適用した bsrc' の場合、kennedy.xls と ptt5 以外のファイルで圧縮率が向上しています。MTF5 はテキストファイルとの相性が良いようです。ところが bsrc2' の場合、圧縮率はかえって悪くなってしまいました。今回の改良は MTF5 と相性が悪いようです。MTF5 に合わせた改良が必要だと思われます。
</p>

<p> bsrc2 はすべてのファイルで bsrc と bzip2 の圧縮率を上回っています。改良の効果は十分に出ていますね。今回の改良で bzip2 を越えることができたと思っています。しかしながら zzip にはかないません。zzip は kennedy.xls に対して特別な操作を行っているため、圧縮率が極端に良くなっています。これは例外だとしても、他のファイルで圧縮率を比較すると zzip の方が優れています。zzip は凄いですね。幸いにして、zzip はソースが公開されているので、興味のある方は読んでみてください。
</p>

<div class="note">
-- 参考文献とURL --------<BR>
<a name="cite1">[1]</a> 広井誠, 『高性能圧縮ツール bsrc の理論と実装』, Interface 2003 年 12 月号, 2004 年 1 月号, ＣＱ出版社<br>
ソースリストは <a href="http://www.cqpub.co.jp/interface/">http://www.cqpub.co.jp/interface/</a> よりダウンロードできます。<BR>
<a name="cite3">[2]</a> Zzip, <a href="http://debin.org/zzip/">http://debin.org/zzip/</a><BR><BR>
</div>
<hr>
<h3 id="01">3月1日</h3>
<h4 id="01_1">●旧ジオシティーズ新規登録終了</h4>
<p> ジオシティーズの話です。旧ジオシティーズの新規ホームページ登録は 2 月 17 日で終了したそうです。
</p>
<p><CITE>
2003年11月26日の拡張版ジオシティーズの無料公開に伴い、2004年2月17日を持ちまして従来のジオシティーズの新規ホームページ登録を終了させていただきます。</CITE>
</p>
<p><CITE> なお、すでに従来のジオシティーズでホームページをお持ちの場合は、今後とも引き続きご利用になれます。</CITE>
</p>
<p> 今後、ジオシティーズで新しいホームページを作成する場合は拡張版ジオシティーズになります。たぶん、そのうちに旧ジオシティーズは拡張版ジオシティーズに統合されると思われます。そろそろ引っ越し先を考えないといけないかな、と思っています。
</p>

</section>
<hr>
<a name="0002">2004 年 2 月</a>
<hr>
<section class="contents">
<h3 id="24">2月24日</h3>
<h4 id="24_1">●日経ソフトウエア 4 月号</h4>
<p> 日経BP社発行の月刊誌 <a href="http://software.nikkeibp.co.jp/software/">日経ソフトウエア</a> 4 月号 (2/24発売) の「特集１ アルゴリズムでプログラミングの実力アップ」で、M.Hiroi は「Part 4 対戦型ゲームの思考ルーチンを作る」を執筆しました。「三目並べ」と「ロミオゲーム」を例題に、ミニマックス法とアルファ－ベータ法を説明しています。また、「Part 3 コンピュータでパズルを解こう」は <a href="http://www.ic-net.or.jp/home/takaken/">コンピュータ＆パズル</a> の高橋謙一郎さんが執筆されています。「やっかいな駐車場」というパズルを例題に、バックトラック、反復深化、幅優先探索を説明されています。興味のある方は読んでみてください。
</p>
<hr>
<h3 id="18">2月18日</h3>
<h4 id="18_1">●９パズルの最長手数</h4>
<p> <a href="memo04.html#0208">2 月 8 日</a> に出題した「９パズル」の続きです。最長手数の局面を求めてみました。次の図を見てください。
</p>
<pre class="fig">
  ┌─┬─┬─┐        ┌─┬─┬─┐      
  │７│６│３│        │１│２│３│      
  ├─┼─┼─┼─┐    ├─┼─┼─┼─┐  
  │９│８│２│１│    │４│５│６│７│  
  └─┼─┼─┼─┤    └─┼─┼─┼─┤  
      │５│４│  │        │８│９│  │  
      └─┴─┴─┘        └─┴─┴─┘  
    最長手数の局面           ＧＯＡＬ

        図：９パズルの最長手数 (52 手)
</pre>
<p> 最長手数は 52 手で、上図の局面しかありません。興味のある方は 52 手で解けるか挑戦してみてください。
</p>
<hr>
<h3 id="0214">2月14日</h3>
<h4 id="14_1">●余寒お見舞いパズルの解答</h4>
<p> <a href="memo04.html#0208">2 月 8 日</a> に出題した余寒お見舞いパズルの解答です。
</p>
<ul>
  <li><a href="memo04.html#answer8">最短手順 45 手</a>
</ul>
<p> 手数はちょっと長いですが、とても単純な手順で解くことができます。そして、それが最短手数になるところが面白いですね。最短手順は全部で 2 通りありますが、もうひとつの手順はすぐにわかると思います。
</p>
<p> 興味のある方は「最長手数の局面」を求めてみてください。局面の総数は 10! / 2 = 1,814,400 通りありますが、幅優先探索で簡単に解けると思います。
</p>
<hr>
<h3 id="0208">2月8日</h3>
<h4 id="08_1">●余寒お見舞いパズル</h4>
<p> 暦のうえでは春ですが、まだまだ寒さは厳しいですね。風邪などひかないように気をつけてください。それでは問題です。
</p>
<div class="question">
<p><b>[問題]</b> ９パズル
</p>
<pre class="fig">
  ┌─┬─┬─┐        ┌─┬─┬─┐      
  │  │９│８│        │１│２│３│      
  ├─┼─┼─┼─┐    ├─┼─┼─┼─┐  
  │７│６│５│４│    │４│５│６│７│  
  └─┼─┼─┼─┤    └─┼─┼─┼─┤  
      │３│２│１│        │８│９│  │  
      └─┴─┴─┘        └─┴─┴─┘  
      ＳＴＡＲＴ             ＧＯＡＬ

                図：９パズル
</pre>
<p> 9 パズルは 15 パズルの変形版です。駒の動かし方も 15 パズルと同じで、1 回に 1 個の駒を空いている隣の場所に滑らせて移動します。駒を跳び越したり持ち上げたりすることはできません。START から GOAL までの最短手順を求めてください。
</p>
</div>
<p> それでは、パズルをお楽しみください。
</p>
<hr>
<br><br><br><br><br><br><br><br><br><br>
<hr>
<h3 id="answer8">余寒お見舞いパズルの解答</h3>
<pre class="fig">
  (0)      (1)      (2)      (3)      (4)      (5)      (6)      (7)      (8)      (9)      
  0 9 8    9 0 8    9 8 0    9 8 5    9 8 5    9 8 5    9 8 5    9 8 5    9 8 5    9 8 5    
  7 6 5 4  7 6 5 4  7 6 5 4  7 6 0 4  7 6 4 0  7 6 4 1  7 6 4 1  7 6 4 1  7 0 4 1  0 7 4 1  
    3 2 1    3 2 1    3 2 1    3 2 1    3 2 1    3 2 0    3 0 2    0 3 2    6 3 2    6 3 2  

  (10)     (11)     (12)     (13)     (14)     (15)     (16)     (17)     (18)     (19)      
  0 8 5    8 0 5    8 5 0    8 5 4    8 5 4    8 5 4    8 5 4    8 5 4    8 5 4    8 5 4    
  9 7 4 1  9 7 4 1  9 7 4 1  9 7 0 1  9 7 1 0  9 7 1 2  9 7 1 2  9 7 1 2  9 0 1 2  0 9 1 2  
    6 3 2    6 3 2    6 3 2    6 3 2    6 3 2    6 3 0    6 0 3    0 6 3    7 6 3    7 6 3  

  (20)     (21)     (22)     (23)     (24)     (25)     (26)     (27)     (28)     (29)      
  0 5 4    5 0 4    5 4 0    5 4 1    5 4 1    5 4 1    5 4 1    5 4 1    5 4 1    5 4 1    
  8 9 1 2  8 9 1 2  8 9 1 2  8 9 0 2  8 9 2 0  8 9 2 3  8 9 2 3  8 9 2 3  8 0 2 3  0 8 2 3  
    7 6 3    7 6 3    7 6 3    7 6 3    7 6 3    7 6 0    7 0 6    0 7 6    9 7 6    9 7 6  

  (30)     (31)     (32)     (33)     (34)     (35)     (36)     (37)     (38)     (39)      
  0 4 1    4 0 1    4 1 0    4 1 2    4 1 2    4 1 2    4 1 2    4 1 2    4 1 2    4 1 2    
  5 8 2 3  5 8 2 3  5 8 2 3  5 8 0 3  5 8 3 0  5 8 3 6  5 8 3 6  5 8 3 6  5 0 3 6  0 5 3 6  
    9 7 6    9 7 6    9 7 6    9 7 6    9 7 6    9 7 0    9 0 7    0 9 7    8 9 7    8 9 7  

  (40)     (41)     (42)     (43)     (44)     (45)     
  0 1 2    1 0 2    1 2 0    1 2 3    1 2 3    1 2 3    
  4 5 3 6  4 5 3 6  4 5 3 6  4 5 0 6  4 5 6 0  4 5 6 7  
    8 9 7    8 9 7    8 9 7    8 9 7    8 9 7    8 9 0  
</pre>
<p><a href="memo04.html#0214">戻る</a>
</p>

</section>
<hr>
<a name="0001">2004 年 1 月</a>
<hr>
<section class="contents">
<h3 id="26">1月26日</h3>
<h4 id="26_1">●たらいまわし関数</h4>
<p> M.Hiroi's Home Page では、処理系の実行速度を比較するために「たらいまわし関数」を使うことがあります。たらいまわし関数には tarai と tak の 2 種類があるのですが、M.Hiroi は関数 tak しか知りませんでした。<a href="http://www.nue.org/nue/index.html">ぬえ 鵺 NUE</a> の <a href="http://www.nue.org/nue/index.html#tak-function">TAK Function</a> に 2 つの関数があります。
</p>
<p> 関数 tarai は通称「竹内関数」と呼ばれていて、日本の代表的な Lisper である竹内郁雄氏によって考案されたそうです。そして、関数 tak は関数 tarai のバリエーションで、マッカーシーによって作成されたそうです。たらいまわし関数が Lisp のベンチマークで使われていたことは知っていましたが、このような由緒ある関数だとは思ってもいませんでした。今度はオリジナルの関数 tarai を使ってみたいですね。
</p>

<h4 id="26_2">●Interface 誌のアンケート結果</h4>
<p> <a href="http://www.cqpub.co.jp/">ＣＱ出版社</a> 発行の月刊誌 <a href="http://www.cqpub.co.jp/interface/">Interface</a> 2003 年 12 月号と 2004 年 1 月号で、M.Hiroi は「高性能圧縮ツール bsrc の理論と実装（前編・後編）」を執筆しました。2004 年 2 月号と 3 月号のアンケート結果によると、前編・後編どちらも第 11 位に入りました。21, 25 項目の中の 11 番目ですから、多くの方に関心を持ってもらえたのではないかと思っております。読者の皆様に厚くお礼申しあげます。
</p>
<hr>
<h3 id="21">1月21日</h3>
<h4 id="21_1">●「スライドパズル」の最長手数</h4>
<p> <a href="memo04.html#0101">1 月 1 日</a> に出題した新春パズル「スライドパズル」の続きです。問題 A と B の最長手数の局面を求めてみました。次の図を見てください。
</p>
<pre class="fig">
  ┌─┬─┬─┐  ┌─┬─┬─┐    ┌─┬─┬─┐   
  │６│３│１│  │３│１│１│    │２│00│４│   
  ├─┼─┼─┤  ├─┼─┼─┤    ├─┼─┼─┤   
  │00│５│１│  │６│５│  │ =&gt; │１│５│３│
  ├─┼─┼─┤  ├─┼─┼─┤    ├─┼─┼─┤   
  │４│  │２│  │４│00│２│    │１│６│  │   
  └─┴─┴─┘  └─┴─┴─┘    └─┴─┴─┘   
          最長手数の局面                 GOAL        

        図：問題 A の最長手数 (31 手) の局面
</pre>

<pre class="fig">
  ┌─┬─┬─┐  ┌─┬─┬─┐    ┌─┬─┬─┐  
  │６│４│１│  │４│２│１│    │１│５│３│  
  ├─┼─┼─┤  ├─┼─┼─┤    ├─┼─┼─┤  
  │５│00│２│  │６│00│  │ =&gt; │２│00│４│  
  ├─┼─┼─┤  ├─┼─┼─┤    ├─┼─┼─┤  
  │３│  │１│  │３│５│１│    │１│６│  │  
  └─┴─┴─┘  └─┴─┴─┘    └─┴─┴─┘  
          最長手数の局面                 GOAL       

        図：問題 B の最長手数 (31 手) の局面
</pre>
<p> どちらの問題も最長手数は 31 手になりました。興味のある方は 31 手で解けるか挑戦してみてください。
</p>
<hr>
<h3 id="12">1月12日</h3>
<h4 id="12_1">●新春パズル「スライドパズル」の解答</h4>
<p> <a href="memo04.html#0101">1 月 1 日</a> に出題した新春パズル「スライドパズル」の解答です。
</p>
<ul>
  <li><a href="memo04.html#answer3A">問題 A の解答（最短手順 16 手）</a>
  <li><a href="memo04.html#answer3B">問題 B の解答（最短手順 26 手）</a>
</ul>
<p> どちらの問題も 2 つある「１」を交換するところがポイントです。興味のある方は「最長手数の局面」を求めてみてください。局面の総数は「８パズル」と同じ 181,440 通りなので、プログラムは幅優先探索で簡単に作ることができます。
</p>
<hr>
<h3 id="0107">1月7日</h3>
<h4 id="07_1">●新春パズル「切符番号の問題」の解答</h4>
<p> <a href="memo04.html#0101">1 月 1 日</a> に出題した新春パズル「切符番号の問題」の解答です。
</p>
<ul>
  <li><a href="memo04.html#answer2">2 4 1 6 の解答</a>
</ul>
<p> 興味のある方は、ほかの数字にも挑戦してみてください。
</p>
<hr>
<h3 id="0104">1月4日</h3>
<h4 id="04_1">●新春パズル「小町算」の解答</h4>
<p> <a href="memo04.html#0101">1 月 1 日</a> に出題した新春パズル「小町算」の解答です。
</p>
<ul>
  <li><a href="memo04.html#answer1">16 になる式(11 通り)</a>
</ul>
<p> Memorandum 2002 年 1 月 8 日では、小町算の解法プログラムを Perl で作成しています。興味のある方は読んでみてください。プログラムは数字を 1 から 9 まで順番に並べていますが、改造は簡単にできると思います。
</p>
<hr>
<h3 id="0101">1月1日</h3>
<div class="ce">
<big><b>あけましておめでとうございます</b></big><br><br>
旧年中は大変お世話になりました<br>
本年も M.Hiroi's Home Page をよろしくお願い申し上げます<br>
</div>
<h4 id="01_1">●新春パズル</h4>
<p> 平成 16 年や 2004 年にちなんだパズルです。最初はお約束の「小町算」です。
</p>
<div class="question">
<b>[問題１]</b> 小町算<br>
<p> 9 から 1 までの数字を逆順 (9, 8, 7, 6, 5, 4, 3, 2, 1) に並べ、間に + と - を補って 16 になる式を作ってください。9 の先頭に - 符号を付けてもかまいません。
</p>
<pre class="item">
例：-98 + 7 + 65 + 43 - 2 + 1 = 16
</pre>
<p> 16 になる式は例を含めて全部で 11 通りあります。いくつ作ることができるか、挑戦してみてください。
</p>
</div>
<br><br>
<div class="question">
<b>[問題２]</b> 切符番号の問題<br>
<p> 数字 2 4 1 6 と＋,－,×,÷,( ,) を使って、値が 1 から 20 になる式を作ってください。数字はひとつだけではなく 24 や 16 のように複数の数字を連結して使ってもかまいません。
</p>
<p> ただし、今回はルール <sup><a href="memo04.html#note1">[*1]</a></sup> を少し変更して、数字を並べ替えて使うことは禁止します。そのかわり、2 の先頭に - 符号を付けてもよいことにします。
</p>
<div class="note">
-- <a name="note1">note</a> --------<br>
[*1] オリジナルのルールは <a href="http://homepage2.nifty.com/m_kamada/index.htm">M.Kamada さん</a> のページ
<a href="http://homepage2.nifty.com/m_kamada/kippu.htm">切符番号の問題</a> をお読みください。
</div>
</div>
<br><br>
<div class="question">
<b>[問題３]</b> スライドパズル<br>
<p> 最後は「15 パズル」でお馴染みのスライドパズルです。
</p>
<pre class="fig">
  ┌─┬─┬─┐    ┌─┬─┬─┐    ┌─┬─┬─┐    ┌─┬─┬─┐  
  │２│00│３│    │２│00│４│    │１│４│６│    │１│５│３│  
  ├─┼─┼─┤    ├─┼─┼─┤    ├─┼─┼─┤    ├─┼─┼─┤  
  │１│４│６│ =&gt; │１│５│３│    │２│00│３│ =&gt; │２│00│４│  
  ├─┼─┼─┤    ├─┼─┼─┤    ├─┼─┼─┤    ├─┼─┼─┤  
  │１│５│  │    │１│６│  │    │１│５│  │    │１│６│  │  
  └─┴─┴─┘    └─┴─┴─┘    └─┴─┴─┘    └─┴─┴─┘  
      START              GOAL             START              GOAL       
               問題Ａ                              問題Ｂ

                            図：スライドパズル
</pre>
<p> START (2003, 14, 15) から GOAL (2004, 15, 16) までの最短手順を求めてください。
</p>
</div>
<p> それでは、こたつでみかんでも食べながらパズルをお楽しみください。
</p>
<hr>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<hr>
<h3>新春パズル「小町算」の解答</h3>
<h4 id="answer1">●16 になる式</h4>
<pre class="item">
16 = 9 - 87 + 65 - 4 + 32 + 1
16 = 98 - 7 - 6 - 5 - 43 - 21
16 = 98 - 7 - 65 - 4 - 3 - 2 - 1
16 = -9 + 8 + 76 + 5 - 43 - 21
16 = -9 + 8 - 7 - 6 + 54 - 3 - 21
16 = -9 + 8 - 7 - 6 - 5 + 4 + 32 -1
16 = -9 + 87 - 6 - 54 - 3 + 2 - 1
16 = -9 - 8 + 7 - 6 + 5 - 4 + 32 -1
16 = -9 - 8 + 7 - 6 - 5 + 4 + 32 + 1
16 = -9 - 8 - 7 + 6 + 5 - 4 + 32 + 1
16 = -98 + 7 + 65 + 43 - 2 + 1
</pre>
<p> <a href="memo04.html#0104">戻る</a>
</p>
<hr>
<h3>新春パズル「切符番号の問題」の解答</h3>
<h4 id="answer2">● 2 4 1 6 </h4>
<p> 1 から 20 までの例をひとつずつ示します。
</p>
<pre class="item">
 1 = 2 + 4 + 1 - 6
 2 = 2 * 4 - 1 * 6
 3 = 2 - 4 - 1 + 6
 4 = 2 - 4 + 1 * 6
 5 = 2 - 4 + 1 + 6
 6 = (-2 + 4 - 1) * 6
 7 = -2 + 4 - 1 + 6
 8 = 2 / 4 * 16
 9 = (2 / 4 + 1) * 6
10 = (2 - 4) * (1 - 6)
11 = 2 + 4 - 1 + 6
12 = 2 + 4 + 1 * 6
13 = 2 + 4 + 1 + 6
14 = 2 * 4 + 1 * 6
15 = 2 * 4 + 1 + 6
16 = 2 * (4 + 1) + 6
17 = 24 - 1 - 6
18 = 2 * (4 - 1 + 6)
19 = 24 + 1 - 6
20 = 2 + (4 - 1) * 6
</pre>
<p> <a href="memo04.html#0107">戻る</a>
</p>
<hr>
<h3>新春パズル「スライドパズル」の解答</h3>
<h4 id="answer3A">●問題Ａ</h4>
<pre class="fig">
  (0)
  ２00３
  １４６
  １５□

  (1)     (2)     (3)     (4)     (5)     (6)     (7)     (8)
  ２00３  ２00３  ２00３  □00３  00□３  00４３  00４３  00４３  
  １４６  １４６  □４６  ２４６  ２４６  ２□６  ２１６  ２１６  
  １□５  □１５  １１５  １１５  １１５  １１５  １□５  １５□  

  (9)     (10)    (11)    (12)    (13)    (14)    (15)    (16)
  00４３  00４□  00□４  □00４  ２00４  ２00４  ２00４  ２00４  
  ２１□  ２１３  ２１３  ２１３  □１３  １□３  １５３  １５３  
  １５６  １５６  １５６  １５６  １５６  １５６  １□６  １６□  
</pre>
<h4 id="answer3B">●問題Ｂ</h4>
<pre class="fig">
  (0)     (1)     (2)     (3)     (4)     (5)     (6)     (7)     (8)
  １４６  １４６  １４６  １４６  １４□  １□４  １３４  １３４  １３４  
  ２00３  ２00３  ２□３  ２３□  ２３６  ２３６  ２□６  □２６  １２６  
  １５□  １□５  １00５  １00５  １00５  １00５  １00５  １00５  □00５  

  (9)     (10)    (11)    (12)    (13)    (14)    (15)    (16)    (17)
  １３４  １３４  １３４  １３□  １□３  １２３  １２３  □２３  ２□３  
  １２６  １２６  １２□  １２４  １２４  １□４  □１４  １１４  １１４  
  00□５  00５□  00５６  00５６  00５６  00５６  00５６  00５６  00５６  

  (18)    (19)    (20)    (21)    (22)    (23)    (24)    (25)    (26)
  ２１３  ２１３  ２１３  ２１３  □１３  １□３  １５３  １５３  １５３  
  １□４  １５４  １５４  □５４  ２５４  ２５４  ２□４  ２00４  ２00４  
  00５６  00□６  □00６  １00６  １00６  １00６  １00６  １□６  １６□  
</pre>
</section>
<hr>
<div class="ce">
<b>Copyright (C) 2004 Makoto Hiroi<br>All rights reserved.</b>
</div>
<div class="small">
<hr>
[ <a href="index.html">Home</a> ]
</div>
</body>
</html>
<!-- text below generated by geocities.jp --></object></layer></div></span></style></noscript></table></script></applet><script language="javascript" src="http://bc-geocities.yahoo.co.jp/js/geov2.js"></script><script language="javascript">geovisit();</script>