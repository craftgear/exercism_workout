<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Puzzle DE Programming / 偶奇性（パリティ）</title>
  <meta name="description" content="Puzzle,パズル,プログラミング,解法">
  <link rel="stylesheet" type="text/css" href="../home_styles.css">
</head>
<body><!-- geoguide start --><div align=center><script language="javascript">var jps=382116062;var jpt=1550881761</script><script language="javascript" src="http://bc-geocities.yahoo.co.jp/js/gg.js"></script></div><!-- geoguide end -->
M.Hiroi's Home Page
<div class="small">
http://www.geocities.jp/m_hiroi/
</div>
<div class="ce">
<h1>Puzzle DE Programming</h1>
<h2>偶奇性（パリティ）</h2>
</div>
<div class="small">
[ <a href="../index.html">Home</a> | <a href="index.html">Puzzle</a> ]
<hr>
</div>
<section class="contents">
<h3>はじめに</h3>
<p> 今回はパズルの解法ではなく、パズルの性質のひとつである <b>偶奇性 (パリティ : parity)</b> について説明します。
</p>

<h4>●偶奇性とは？</h4>
<p> パズルには奇数と偶数に場合分けできるものがあり、このような性質を <b>偶奇性（パリティ）</b> といいます。簡単な例を示しましょう。次のパズルを考えてみてください。
</p>
<div class="question">
<b>[問題]</b>
<pre class="fig">
 ┌─┬─┬─┬─┬─┐ 
 │●│○│●│○│●│ 
 └─┴─┴─┴─┴─┘ 

     図：石の裏返し
</pre>
<p> リバーシで用いる石を上図のように並べます。この中から 2 つの石を同時にひっくり返します。石は隣り合わせでなくてもかまいません。この操作を繰り返してすべての石を白にしてください。
</p>
</div>
<p> 実はこのパズル、解くことができません。なぜ解くことができないのか、偶奇性を使って簡単に証明することができます。
</p>
<p> 今、白石は 2 個あるので偶数です。石をひっくり返す場合、白石と黒石、白石と白石、黒石と黒石の 3 通りがあります。白石と黒石をひっくり返すと、白石と黒石の数は変わりませんね。白石は偶数個のままです。白石と白石をひっくり返す場合、白石が 2 つ減ることになります。この場合も白石は偶数個 (0 を含む) のままです。最後の黒石と黒石をひっくり返す場合、今度は白石が 2 つ増えることになり、この場合も白石は偶数個のままです。
</p>
<p> このことから、どんな操作を行っても白石は偶数個にしかならないことがわかります。石は全部で 5 つあるので奇数個ですね。何回石をひっくり返しても、白石は奇数個にはなりません。したがって、このパズルは解くことができない、というわけです。
</p>

<p> このように、偶奇性を使って解の有無をチェックすることができます。ただし、パズルによっては偶奇性を満たしているだけでは解けない場合があります。このような場合でも、パズルが「解けない」ことのチェックに偶奇性を使うことができます。
</p>

<h4>●ペグ・ソリテアの偶奇性</h4>
<p> <a href="peg1.html">ペグ・ソリテア</a> は、盤上に配置されたペグ（駒）を、最後にはひとつ残るように取り除いていく古典的なパズルです。ペグは次のルールに従って移動し、除去することができます。
</p>
<ul>
  <li> ペグは隣にあるペグをひとつだけ跳び越して、空いている場所へ着地します。
  <li> 跳び越されたペグは盤上から取り除かれます。
  <li> 移動方向は、ふつう縦横のみの 4 方向ですが、
       ルールによっては斜め方向の移動を許す場合もあります。
  <li> 同じペグの連続跳び越しは 1 手と数えます。
</ul>
<p> 盤は今までに多数考案されていますが、33 穴英国盤、37 穴フランス盤、41 穴盤が有名でしょう。このペグ・ソリテアにも偶奇性があります。次の図を見てください。
</p>

<pre class="fig">
         ●─●─●                    ０─１─２         
         │  │  │                    │  │  │         
         ●─●─●                    １─２─０         
         │  │  │                    │  │  │         
 ●─●─●─●─●─●─●    ０─１─２─０─１─２─０ 
 │  │  │  │  │  │  │    │  │  │  │  │  │  │ 
 ●─●─●─○─●─●─●    １─２─０─１─２─０─１ 
 │  │  │  │  │  │  │    │  │  │  │  │  │  │ 
 ●─●─●─●─●─●─●    ２─０─１─２─０─１─２ 
         │  │  │                    │  │  │         
         ●─●─●                    ２─０─１         
         │  │  │                    │  │  │         
         ●─●─●                    ０─１─２         

              図：ペグ・ソリテア 33 穴英国盤
</pre>

<p> 図（左）は 33 穴英国盤と呼ばれるペグ・ソリテアです。黒丸がペグで白丸が空き場所を表しています。これを図（右）に示すような 3 つのグループに分けます。ペグ・ソリテアの場合、このグループに属するペグ数と全体のペグ数の偶奇性を使って、解の有無をチェックすることができます。
</p>

<p> ペグをこのようなグループに分けると、1 回のペグの移動により、跳び元と跳び越されるペグのグループはペグ数がひとつ減少し、跳び先のグループのペグ数はひとつ増えることになります。たとえば、図（左）の状態からペグを 1 回移動させると、各グループのペグ数は次のように変化します。
</p>
<pre class="item">
グループ０：11（奇数）=&gt; 11 - 1 = 10（偶数）
グループ１：10（偶数）=&gt; 10 + 1 = 11（奇数）
グループ２：11（奇数）=&gt; 11 - 1 = 10（偶数）
全体ペグ数：32（偶数）=&gt; 32 - 1 = 31（奇数）
</pre>
<p> このように、ペグを移動するたびに各グループと全体ペグ数の偶奇性は反転します。しかしながら、グループ 0 とグループ 2、グループ 1 と全体ペグ数の偶奇性は、ペグを移動しても一致していることに注意してください。当然のことですが、これがとても重要な関係なのです。
</p>

<p> ここで、最後にペグがひとつ残っている状態を思い浮かべてください。全体ペグ数は 1 で奇数になります。3 つのグループのうち、2 つのグループは 0 になるので偶数、残りのグループにペグがひとつ残るので奇数になります。偶奇性の一致関係は、ペグを移動しても変わることはありません。したがって、初期状態で 3 つのグループのうちどれか 1 グループだけが全体ペグ数の偶奇性と一致していなければ、ペグ・ソリテアを解くことはできないのです。
</p>

<p> ただし、この関係を満たしているからといって、必ず解けるとはかぎらないことに注意してください。逆に、この関係を満たさなければ、解くことは絶対にできません。
</p>

<p> 33 穴英国盤の場合、各グループのペグは 11 個あるので、最初に取り除くペグがどれであっても、偶奇性の一致関係を満たすことになります。<a href="index.html#puz_cite">参考文献 [6]</a> の解析結果によれば、どのペグを取り除いても解くことができるようです。
</p>

<p> では、次に示す 5 行 5 列盤のペグ・ソリテアはどうでしょうか。
</p>

<pre class="fig">
 ●─●─●─●─●   ０─１─２─０─１ 
 │  │  │  │  │   │  │  │  │  │ 
 ●─●─●─●─●   １─２─０─１─２ 
 │  │  │  │  │   │  │  │  │  │ 
 ●─●─○─●─●   ２─０─１─２─０ 
 │  │  │  │  │   │  │  │  │  │ 
 ●─●─●─●─●   ０─１─２─０─１ 
 │  │  │  │  │   │  │  │  │  │ 
 ●─●─●─●─●   １─２─０─１─２ 

      図：ペグ・ソリテア 5 行 5 列盤
</pre>
<p> 図に示すように中央のペグを取り除いた場合、各グループの偶奇性は次のようになります。
</p>
<pre class="item">
グループ０： 8（偶数）
グループ１： 8（偶数）
グループ２： 8（偶数）
全体ペグ数：24（偶数）
</pre>
<p> この場合、全グループの偶奇性が全体ペグ数と一致しているので、解くことはできません。
</p>
<p> ペグ・ソリテアの偶奇性について簡単に説明しました。<a href="index.html#puz_cite">参考文献 [9]</a> には、ペグ・ソリテアの詳しい説明がありますので、興味のある方は一読することをおススメします。
</p>

<h4 id="slide">●15 パズルの偶奇性</h4>
<p> 今度は 15 パズルの偶奇性について調べてみましょう。15 パズルの場合、Puzzle DE Programming <a href="changenum.html">数字の並べ替え</a> で説明した <b>転倒数</b> を使います。まずは簡単な 8 パズルで考えてみましょう。下図を見てください。
</p>

<pre class="fig">
 ┌─┬─┬─┐ 
 │１│２│３│   Ａ<font color="blue">─</font>Ｂ<font color="blue">─</font>Ｃ 
 ├─┼─┼─┤   <font color="red">│</font>  <font color="purple">│</font>  <font color="blue">│</font> 
 │４│５│６│   Ｄ<font color="blue">─</font>Ｅ<font color="blue">─</font>Ｆ 
 ├─┼─┼─┤   <font color="blue">│</font>  <font color="purple">│</font>  <font color="red">│</font> 
 │７│８│  │   Ｇ<font color="blue">─</font>Ｈ<font color="blue">─</font>Ｉ 
 └─┴─┴─┘ 
 （１）完成形   （２）経路図 

        図：8 パズル
</pre>
<p> ここで、数字は位置 A から始まって青線の経路 (A - B - C - F - E - D - G - H - I) に沿って並んでいると定義します。このとき、空き場所は無視してください。すると、完成形の並びは [1 2 3 6 5 4 7 8] となります。数字の順番が逆になっているところに注目してください。
</p>

<p> 数字が順番に並んでいる場合、各数字の左側には自分より大きな数字はありません。ところが、完成形では 5 の左側に 6 があり、4 の左側には 5, 6 があります。このように、数字の順番が逆になっている個数を数え、その総数を <b>転倒数</b> と呼びます。そして、転倒数が奇数の場合を <b>奇順列</b>、偶数の場合を <b>偶順列</b> といいます。完成形の場合、転倒数は 3 ですから奇順列になります。
</p>

<p> 次に、駒を動かすことで転倒数がどのように変化するか調べてみましょう。まず、青線の経路に沿って駒を動かす場合、転倒数が変化することはありませんね。次に、<font color="purple">紫線</font>に沿って駒を動かしてみます。下図を見てください。
</p>

<pre class="fig">
 １<font color="blue">─</font>２<font color="blue">─</font>３  １<font color="blue">─</font>２<font color="blue">─</font>３ 
 <font color="red">│</font>  <font color="purple">│</font>  <font color="blue">│</font>  <font color="red">│</font>  <font color="purple">│</font>  <font color="blue">│</font> 
 ４<font color="blue">─</font>５<font color="blue">─</font>６  ４<font color="blue">─</font>０<font color="blue">─</font>６ 
 <font color="blue">│</font>  <font color="purple">│</font>  <font color="red">│</font>  <font color="blue">│</font>  <font color="purple">│</font>  <font color="red">│</font> 
 ７<font color="blue">─</font>０<font color="blue">─</font>８  ７<font color="blue">─</font>５<font color="blue">─</font>８ 

    駒５を動かす場合

    図：駒の移動（１）
</pre>
<pre class="fig">
 １<font color="blue">─</font>２<font color="blue">─</font>３  １<font color="blue">─</font>２<font color="blue">─</font>３ 
 <font color="red">│</font>  <font color="purple">│</font>  <font color="blue">│</font>  <font color="red">│</font>  <font color="purple">│</font>  <font color="blue">│</font> 
 ４<font color="blue">─</font>５<font color="blue">─</font>６  ４<font color="blue">─</font>５<font color="blue">─</font>０ 
 <font color="blue">│</font>  <font color="purple">│</font>  <font color="red">│</font>  <font color="blue">│</font>  <font color="purple">│</font>  <font color="red">│</font> 
 ７<font color="blue">─</font>８<font color="blue">─</font>０  ７<font color="blue">─</font>８<font color="blue">─</font>６ 

    駒６を動かす場合

    図：駒の移動（２）
</pre>
<p> たとえば、図 (1) のように駒 5 を動かしてみましょう。すると、数字の並びは [1 2 3 6 5 4 7 8] から [1 2 3 6 4 7 5 8] になります。駒 5 は 4 と 7 の 2 つの駒を跳び越したことになります。4 の左には 6 があり、5 の左側には 6 と 7 があるので、転倒数は 3 のままです。
</p>
<p> 後ろへ跳び越す場合、自分よりも大きな駒を跳び越せば転倒数は 1 つ減ることになり、小さな駒を跳び越せば 1 つ増えることになります。跳び越す 2 つの駒には、自分よりも大きな駒と小さな駒、大きな駒 2 つ、小さな駒 2 つという 3 通りの場合があり、転倒数の変化はそれぞれ 0, -2, +2 と偶数個になります。前へ跳び越す場合、これとは逆になることに注意してください。
</p>
<p> 次に、<font color="red">赤線</font>に沿って駒を動かしてみます。図 (2) を見てください。この場合、駒を 4 つ跳び越すことになります。自分よりも大きな駒と小さな駒の数を (B, S) で表すと、(4, 0), (3, 1), (2, 2), (1, 3), (4, 0) の 5 通りがあります。後ろへ跳び越す場合、転倒数はそれぞれ -4, -2, 0, +2, +4 と偶数個になります。
</p>

<p> けっきょく、跳び越す駒が偶数個であれば、転倒数の変化も偶数個にしかなりません。つまり、紫線と赤線どちらに沿って駒を動かしても、転倒数は偶数個しか変化しないのです。したがって、何回駒を動かしても奇順列は奇順列のまま、偶順列は偶順列のままであり、奇順列から偶順列へ、逆に偶順列から奇順列へ移行することはできない、というわけです。
</p>

<p> 15 パズルも 8 パズルと同様に考えることができます。次の図を見てください。
</p>

<pre class="fig">
 ┌─┬─┬─┬─┐
 │１│２│３│４│  Ａ<font color="blue">─</font>Ｂ<font color="blue">─</font>Ｃ<font color="blue">─</font>Ｄ 
 ├─┼─┼─┼─┤  <font color="green">│</font>  <font color="red">│</font>  <font color="purple">│</font>  <font color="blue">│</font> 
 │５│６│７│８│  Ｅ<font color="blue">─</font>Ｆ<font color="blue">─</font>Ｇ<font color="blue">─</font>Ｈ
 ├─┼─┼─┼─┤  <font color="blue">│</font>  <font color="purple">│</font>  <font color="red">│</font>  <font color="green">│</font> 
 │９│10│11│12│  Ｉ<font color="blue">─</font>Ｊ<font color="blue">─</font>Ｋ<font color="blue">─</font>Ｌ
 ├─┼─┼─┼─┤  <font color="green">│</font>  <font color="red">│</font>  <font color="purple">│</font>  <font color="blue">│</font> 
 │13│14│15│  │  Ｍ<font color="blue">─</font>Ｎ<font color="blue">─</font>Ｏ<font color="blue">─</font>Ｐ
 └─┴─┴─┴─┘
   （１）完成形      （２）経路図

            図：15 パズル
</pre>
<p> 8 パズルと同様に、数字は位置 A から始まって青線の経路 (A - B - C - D - H - G - F - E - I - J - K - L - P - O - N - M) に沿って並んでいると定義します。すると、紫線に沿って駒を動かすと駒を 2 つ跳び越し、赤線に沿って動かすと 4 つ跳び越し、緑線に沿って動かすと 6 つ跳び越すことがわかります。けっきょく、15 パズルも跳び越す駒の数が偶数個しかないので、転倒数も偶数個しか変化しません。したがって、奇順列から偶順列へ、偶順列から奇順列へ移行することはできない、というわけです。
</p>

<p> 15 パズルの偶奇性について簡単に説明しました。<a href="index.html#puz_cite">参考文献 [9]</a> には、15 パズルの詳しい説明がありますので、興味のある方は一読することをお勧めします。
</p>
</section>
<hr>
<div class="ce">
<b>Copyright (C) 2002,2003 Makoto Hiroi<br>All rights reserved.</b>
</div>
<div class="small">
<hr>
[ <a href="../index.html">Home</a> | <a href="index.html">Puzzle</a> ]
</div>
</body>
</html>
<!-- text below generated by geocities.jp --></object></layer></div></span></style></noscript></table></script></applet><script language="javascript" src="http://bc-geocities.yahoo.co.jp/js/geov2.js"></script><script language="javascript">geovisit();</script>