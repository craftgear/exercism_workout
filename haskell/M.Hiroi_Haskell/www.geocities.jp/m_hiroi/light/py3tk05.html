<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>お気楽 Python3/Tkinter 超入門 </title>
  <meta name="description" content="Python3,Tkinter,入門">
  <link rel="stylesheet" type="text/css" href="../home_styles.css">
</head>
<body><!-- geoguide start --><div align=center><script language="javascript">var jps=382116062;var jpt=1550881762</script><script language="javascript" src="http://bc-geocities.yahoo.co.jp/js/gg.js"></script></div><!-- geoguide end -->
M.Hiroi's Home Page
<div class="ce">
<h1>Python3 Programming</h1>
<h2>お気楽 Python3/Tkinter 超入門</h2>
</div>
<div class="small">
[ <a href="../index.html">Home</a> | <a href="index.html">Light</a> | <a href="python3.html#python3_tkinter">Python3</a> ]
<hr>
</div>
<section class="contents">
<h4 id="chap28">●スピンボックス</h4>
<ul>
  <li>スピンボックス (spinbox) はエントリー (entry) ウィジェットを拡張したウィジェット</li>
  <li>スピンボックスはエントリーの右側に上下のボタンが付いていろ</li>
  <li>エントリーで値を直接入力するだけではなく、上下のボタンを押すことで値を選択することができる</li>
  <li>スピンボックスは Spinbox() で生成する</l>
  <li>主なオプションを以下に示す</li>
  <ul>
    <li>from_ = n, to = m, increment = i<br>
      選択できる数値の範囲を n から m までに設定する。ボタンを押したときの増分値は i になる。<br>i が浮動小数点数の場合、表示も浮動小数点数になる。
    <li>format = 書式文字列<br>
      選択する数値が浮動小数点数の場合、表示方法を書式文字列で指定する。<br>書式は書式文字列の変換指示子 %f と同じ。
    <li>value = タプル<br>
      選択する項目をタプルで設定する。
    <li>state = 状態<br>
      スピンボックスの状態 (normal, readonly, disabled) を設定する。
  </ul>
  <li>数値はオプション from_ = n, to = m, increment = i で簡単に設定することができる</li>
  <li>数値が浮動小数点数の場合、オプション format で表示方法を設定することができる</li>
  <li>数値以外の場合はオプション value を使う</li>
  <li>state を readonly にすると、エントリーによる入力が禁止され、ボタンだけで値を選択することになる</li>
</ul>
<ul>
  <li>簡単な使用例</li>
<pre class="list">
リスト : スピンボックス

from Tkinter import *

root = Tk()
root.option_add('*font', ('FixedSys', 14))

v = ('apple', 'banana', 'cherry', 'grape', 'orange')

s1 = Spinbox(root, from_ = 1, to = 10, increment = 1, width = 10)
s2 = Spinbox(root, from_ = 1, to = 5, increment = 0.5, format = '%05.2f', width = 10)
s3 = Spinbox(root, value = v, width = 10, state = 'readonly')

for w in (s1, s2, s3):
    w.pack(padx = 5, pady = 5)

root.mainloop()
</pre>
  <ul>
    <li>スピンボックスを 3 つ作る</li>
    <li>s1 は 1 から 10 までの数値で、increment は 1 にする</li>
    <li>s2 は 1 から 5 までの数値ですが、increment は 0.5 なので浮動小数点数で表示される</li>
    <li>format の指定が %05.2f なので、表示は 01.50 のようになる</li>
    <li>s3 は apple, banana, cherry, grape, orange から選択する</li>
    <li>state に readonly を指定したので、エントリーから入力することはできない</li>
  </ul>
</ul>
<p>1. <img src="py3_img/spinbox0.png"> 2. <img src="py3_img/spinbox1.png"> 3. <img src="py3_img/spinbox2.png">
</p>
<ol>
  <li>実行した直後の状態</li>
  <li>アップボタンを 1 回押した状態</li>
  <li>もう一回アップボタンを押した状態</li>
</ol>
<h4 id="chap29">●テキストウィジェット</h4>
<ul>
  <li>テキスト (text) ウィジェットはスクリーンエディタに相当する</li>
  <li>テキストウィジェットには標準動作が用意されていて、それだけでテキスト編集が可能</li>
  <li>マウスの操作は、左クリックでカーソル位置の変更、ドラッグで範囲の選択、ダブルクリックで単語の選択が行える</li>
  <li>また、トリプルクリックで行の選択ができる</li>
</ul>
<ul>
  <li>テキストウィジェットは Text() で生成する</li>
  <li>テキストウィジェットの場合、オプション width と height は桁数と行数を表す</li>
  <li>使用するフォントによってウィンドウのサイズが変わることに注意</li>
  <li>オプション state に disabled を設定すると、テキストの変更を禁止することができる</li>
  <li>これはキーボートからの入力だけでなく、プログラムによる挿入や削除も禁止される</li>
  <li>必要なテキストデータをウィジェットに挿入してから、state を disabled に設定すること</li>
  <li>オプション wrap で行の折り畳みを設定することができる</li>
  <li>none を指定すると折り畳みは行われない</li>
  <li>char は文字の切れ目で、word は単語の切れ目で折り畳む</li>
</ul>
<ul>
  <li>テキストウィジェットはスクロールバーと組み合わせて表示範囲を変更することができる</li>
  <li>垂直スクロールバー付きのテキストウィジェットはモジュール scrolledtext を使うと簡単</li>
  <li>文字列の挿入、削除、検索といった、テキストエディタとして必要なメソッドが多数用意されている</li>
  <li>詳細は Tkinter のマニュアルを参照</li>
  <li>また、多くのメソッドで位置の指定が必要になる</li>
  <li>位置の基本的な指定方法を下表に示す</li>
</ul>
<table border=1>
<caption>表 : 位置の基本指定</caption>
<tbody>
<tr><td>N.M</td><td>N 行の M 文字目</td></tr>
<tr><td>@x,y</td><td>テキスト内の (x,y) の位置にある文字</td></tr>
<tr><td>end</td><td>テキスト末尾</td></tr>
<tr><td>マーク名</td><td>その名前のマークをつけた位置</td></tr>
<tr><td>タグ名.first</td><td>その名前のタグの最初の位置</td></tr>
<tr><td>タグ名.last</td><td>その名前のタグの最後の位置</td></tr>
</tbody>
</table>
<ul>
  <li>テキストウィジェットでは、行は 1 から数えるが、文字は 0 から数える</li>
  <li>この基本指定に加えて、次に示す相対指定を組み合わせることができる</li>
</ul>
<table border=1>
<caption>表 : 位置の相対指定</caption>
<tbody>
<tr><td>+Nchars, -Nchars</td><td>そこから N 文字先、手前</td></tr>
<tr><td>+Nlines, -Nlines</td><td>そこから N 行先、手前</td></tr>
<tr><td>linestart, lineend</td><td>その行の先頭、末尾</td></tr>
<tr><td>wordstart, wordend</td><td>その単語の先頭、末尾</td></tr>
</tbody>
</table>
<ul>
  <li>簡単な使用例 (1)</li>
<pre class="list">
リスト : テキストファイルを表示する

import tkinter as tk
import tkinter.filedialog as fd
import tkinter.scrolledtext as st
import sys, os.path

# MainWindow
root = tk.Tk()
root.option_add('*font', ('', 12))
root.title('Text Viewer')

# Global
path_name = os.getcwd()

# Text
t0 = st.ScrolledText()
t0.pack()

# File Select
def load_file():
    global path_name
    filename = fd.askopenfilename(filetypes = [('Text Files', ('.txt', '.py'))],
                                  initialdir = path_name)
    if filename != "":
        path_name = os.path.dirname(filename)
        fi = open(filename, encoding = 'utf-8')
        t0.delete('1.0', 'end')
        for x in fi:
            t0.insert('end', x)
        fi.close()
        t0.mark_set(tk.INSERT, '1.0')
        t0.focus_set()

# Menu
m0 = tk.Menu(root);
root.configure(menu = m0);

m1 = tk.Menu(m0, tearoff = 0)
m1.add_command(label = 'Open', under = 0, command = load_file)
m1.add_separator
m1.add_command(label = 'Exit', under = 0, command = sys.exit)
m0.add_cascade(label = 'File', under = 0, menu = m1 )

root.mainloop()
</pre>
  <ul>
    <li>メニューの設定とファイルの選択は <a href="py3tk02.html#chap17">ファイルの選択</a> で作成した画像ローダーと同じ</li>
    <li>テキストウィジェットは ScrolledText() で生成する</li>
    <li>ファイルの読み込みは関数 load_file() で行う</li>
    <li>askopenfilename() でファイル選択ダイアログを表示してファイル名を取得する</li>
    <li>utf-8 で書かれたファイルをオープンする場合、Windows では encoding の指定が必要になる</li>
    <ul>
      <li>Windows の場合、文字コードのデフォルトは cp932 (shift_jis)</li>
      <li>ファイルを読み込むとき、Python 内部で cp932 を utf-8 に変換する処理が行われる</li>
      <li>cp932 以外のコードで書かれたファイルを読み込むと変換時にエラーが発生することがある</li>
    </ul>
    <li>テキストウィジェットにデータを挿入するメソッドが insert()</li>
    <li>削除するメソッドが delete()</li>
    <li>最初に表示しているテキストを delete() で削除する</li>
    <li>1.0 は 1 行目の 0 文字、つまりテキストの先頭を表す</li>
    <li>insert() の位置指定は end なので、データはテキストウィジェットの最後に追加される</li>
    <li>メソッド mark_set() でカーソルを先頭に移動し、focus_set() でフォーカスを設定する</li>
    <li>マークはあとで説明する</li>
  </ul>
</ul>
<p> <img src="py3_img/text00.png" ALT="テキストウィジェット"> テキストウィジェット
</p>
<p> <img src="py3_img/text01.png" ALT="ファイルの表示"> ファイルの表示
</p>
<ul>
  <li>簡単な使用例 (2)</li>
<pre class="list">
リスト : 行番号の挿入と削除

import tkinter as tk
import tkinter.filedialog as fd
import tkinter.scrolledtext as st
import sys, os.path

# MainWindow
root = tk.Tk()
root.option_add('*font', ('', 12))
root.title('Text Viewer')

# Global
path_name = os.getcwd()

# Text
t0 = st.ScrolledText()
t0.pack()

#
num_flag = tk.BooleanVar()
num_flag.set(False)

# Change Number
def change_number():
    line = int(float(t0.index('end')))
    if num_flag.get():
        for x in range(1, line):
            t0.insert('{}.0'.format(x), '{:6d}:'.format(x))
    else:
        for x in range(1, line):
            t0.delete('{}.0'.format(x), '{}.7'.format(x))

# File Select
def load_file():
    global path_name
    filename = fd.askopenfilename(filetypes = [('Text Files', ('.txt', '.py'))],
                                  initialdir = path_name)
    if filename != "":
        path_name = os.path.dirname(filename)
        fi = open(filename, encoding = 'utf-8')
        t0.delete('1.0', 'end')
        for x in fi:
            t0.insert('end', x)
        fi.close()
        if num_flag.get(): change_number()
        t0.mark_set(tk.INSERT, '1.0')
        t0.focus_set()

# Menu
m0 = tk.Menu(root);
root.configure(menu = m0);

m1 = tk.Menu(m0, tearoff = 0)
m1.add_command(label = 'Open', under = 0, command = load_file)
m1.add_checkbutton(label = 'Number', under = 0, variable = num_flag, command = change_number)
m1.add_separator
m1.add_command(label = 'Exit', under = 0, command = sys.exit)
m0.add_cascade(label = 'File', under = 0, menu = m1 )

root.mainloop()
</pre>
  <ul>
    <li>メニューに次の項目を追加する</li>
<pre class="item">
m1.add_checkbutton(label = 'Number', under = 0, variable = num_flag, command = change_number)
</pre>
    <li>Number がチェックされていれば行番号を表示し、そうでなければ行番号を表示しない</li>
    <li>チェックボタンの値はグローバル変数 num_flag に格納し、行番号の処理は関数 change_number() で行う</li>
    <li>最初に行数を index() メソッドで求める</li>
    <li>index() はテキストの位置を line.char の形式の文字列で返す</li>
    <li>end を指定することで最終行の次の行を求めることができる</li>
    <ul>
      <li>たとえば、ファイルの行数が 55 行であれば、index('end') は '56.0' を返す</li>
      <li>int(float('56.0')) で整数値に変換すればファイルの行数を求めることができる</li>
    </ul>
    <li>行番号は行の先頭に挿入することで表示する</li>
    <li>変数 x は行番号を表し、挿入する文字列を '{:6d}:'.format(x) で作成する</li>
    <li>この場合、先頭に空白を含めて 7 文字挿入することになる</li>
    <li>行番号の削除は行の先頭から 7 文字削除するだけ</li>
    <li>テキストウィジェットのメソッドで範囲指定を指定する場合、終了位置の文字は範囲に含まれないことに注意</li>
    <li>ファイルを読み込んだあとで num_flag が真であれば、change_number() を呼び出して行番号を挿入する</li>
  </ul>
</ul>
<p><img src="py3_img/text03.png" alt="行番号の表示"> 行番号の表示
</p>

<h4 id="chap30">●テキストウィジェット : マークとタグ</h4>
<ul>
  <li>マークはテキストの位置を表す名前のこと</li>
  <li>マークは文字自体につけられるのではなく、文字と文字の間に設定される</li>
  <li>マークで指定した位置に文字列を挿入する場合はとても便利</li>
  <li>テキストを操作するメソッドで、位置の指定にマークを使うこともできる</li>
  <li>マークを操作するおもなメソッドを下表に示す</li>
</ul>
<table border=1>
<caption>表 : マーク操作用のおもなメソッド</caption>
<tbody>
<tr><td>mark_set(markname, index)</td><td>マークの設定</td></tr>
<tr><td>mark_unset(*markname)</td><td>マークの削除</td></tr>
<tr><td>mark_names()</td><td>定義されているすべてのマークを返す</td></tr>
<tr><td>mark_gravity(markname, left_or_right)</td><td>マークのつき方を left と right で指定</td></tr>
<tr><td>mark_next(index)</td><td>index より後ろにあるマークを返す</td></tr>
<tr><td>mark_previous(index)</td><td>index より前にあるマークを返す</td></tr>
</tbody>
</table>
<ul>
  <li>マークの設定は mark_set() メソッドで行う</li>
  <li>マークは指定した位置の文字とその前の文字の間に設定される</li>
  <ul>
    <li>たとえば '1.3' と指定すると、1 行目の 2 文字目と 3 文字目の間にマークが設定される</li>
    <li>文字は 0 から数えることに注意</li>
    <li>テキストウィジェットの 1 行目に abcdefg が書き込まれている状態で、first という名前のマークを設定する</li>
<pre class="item">
t0.mark_set(first, '1.3')
</pre>
    <li>マーク first は 1 行目の 2 文字目 (c) と 3 文字目 (d) の間に設定される</li>
  </ul>
  <li>文字 d が移動すれば、その文字とともにマークも移動する</li>
  <ul>
    <li>この状態で 1 行目の先頭文字 a を削除すると文字 d は 2 文字目になる</li>
    <li>first の位置は 1.3 ではなく 1.2 に変わる</li>
    <li>また、行頭に文字 A を挿入すれば d は 4 文字目になる</li>
    <li>first は 1.3 から 1.4 に変わる</li>
  </ul>
  <li> マークの位置に文字列を挿入する場合、マークは挿入した文字列の左右どちらかにつく</li>
  <li>mark_gravity() メソッドは、文字列を挿入したときのマークのつき方を指定する</li>
  <li>left であれば挿入した文字列の左側に、right であれば右側にマークが設定される</li>
  <ul>
    <li>デフォルトの設定は right</li>
    <li>たとえば、first の位置に文字列 1234 を挿入するには、次のように行う</li>
<pre class="item">
t0.insert(first, '1234')
</pre>
    <li>first の位置が c と d の間であれば、文字列は abc1234defg になる</li>
    <li>このとき、マークが挿入した文字列の左側につく場合は c と 1 の間にマークが設定される</li>
    <li>逆に、右側につく場合は 4 と d の間に設定される</li>
    <li>ここでもう一度 first に文字列 5678 を挿入すると、文字列は abc12345678defg となる</li>
  </ul>
  <li>特別なマークとしてカーソル位置を表す tk.INSERT と、マウスカーソルが指す文字位置を表す tk.CURRENT がある</li>
  <li>たとえば、カーソルの位置に文字列を挿入したい場合は、次のように行う</li>
<pre class="item">
t0.insert(tk.INSERT, 'string')
</pre>
  <li>これで指定した string がカーソル位置に挿入される</li>
  <li>また、mark_set(tk.INSERT, index) でカーソルを指定した index に移動することができる</li> 
</ul>
<ul>
  <li>テキストウィジェットのタグは指定した文字列に名前 (タグ名) をつける機能</li>
  <li>タグごとにフォントや色などの表示属性やバインディングを設定することができる</li>
  <li>たとえば、ある単語をクリックしたら別のテキストを表示する、といったハイパーテキストを構成するも可能</li>
  <li>タグを操作するおもなメソッドを下表に示す</li>
</ul>
<table border=1>
<caption>表 : タグ操作用のおもなメソッド</caption>
<tbody>
<tr><td>tag_add(tagname, index1, index2)</td><td>指定した範囲に対して、タグ tagname を設定</td></tr>
<tr><td>tag_delete(*tagname)</td><td>タグの削除</td></tr>
<tr><td>tag_names(index)</td><td>index の位置にある文字と関連するすべてのタグを返す</td></tr>
<tr><td>tag_cget(tagname, option)</td><td>タグ tagname のオプションの値を返す</td></tr>
<tr><td>tag_configure(tagname, option, value)</td><td>タグ tagname のオプションを設定する</td></tr>
<tr><td>tag_bind(tagname, event, callback)</td><td>タグ tagname にバインドを設定する</td></tr>
</tbody>
</table>
<ul>
  <li>簡単な使用例</li>
<pre class="list">
リスト : 行番号に色をつける

def change_number():
    line = int(float(t0.index('end')))
    if num_flag.get():
        for x in range(1, line):
            t0.insert('{}.0'.format(x), '{:6d}:'.format(x), 'LINENUM')
    else:
        for x in range(1, line):
            t0.delete('{}.0'.format(x), '{}.7'.format(x))
</pre>
  <ul>
    <li>テキストを表示するプログラムで、行番号を赤く表示する</li>
    <li>行番号を表す文字列にタグ LINENUM を指定し、色をオプションで設定する</li>
    <li>オプションの設定はメソッド tag_configure() で行う</li>
<pre class="item">
t0.tag_configure('LINENUM', foreground = 'red')
</pre>
    <li>文字の色はオプション foreground で指定する</li>
    <li>また、オプション background で背景色も指定することができる</li>
    <li>このオプションが指定されていると、borderwidth でふちの幅を、relief で形状を指定することができる</li>
    <li>行番号のタグは insert() メソッドで指定する</li>
<pre class="item">
t0.insert(index, string, tagname, ...)
</pre>
    <li>これで行番号が赤く表示される</li>
  </ul>
</ul>
<p><img src="py3_img/text04.png" alt="行番号を赤く表示"> 行番号を赤く表示する
</p>

<h4 id="chap31">●テキストウィジェット : ウィジェットの表示</h4>
<ul>
  <li>テキストウィジェットはテキストだけではなく他のウィジェットも表示することができる</li>
  <li>これを「埋め込みウィンドウ」という</li>
  <li>埋め込みウィンドウ用のメソッドを以下に示す</li>
  <ul>
    <li>window_create(index, option = value, ...)<br>
      オプション window で指定したウィジェットを表示する。
    <li>window_names()<br>
      テキストウィジェットに表示されているほかのウィジェットをリストで返す。
    <li>window_configure(index, option = value)<br>
        window_cget(index, option)<br>
      位置 index にあるウィジェットのオプションの設定 (window_configure()) と値の取得 (window_cget()) を行う。
  </ul>
  <li>window_create() メソッド で使用するオプションを下表に示す</li>
</ul>
<table border=1>
<caption>表 : windowCreate メソッドのオプション</caption>
<tbody>
<tr><td>window</td><td>ウィジェット名</td></tr>
<tr><td>create</td><td>ウィジェットを生成するコマンドを指定（window を指定しない場合のみ有効）</td></tr>
<tr><td>align</td><td>上下方向の揃え指定 (baseline, top, bottom, center) </td></tr>
<tr><td>stretch</td><td>上下方向の引き延ばし</td></tr>
<tr><td>padx, pady</td><td>スペースの指定</td></tr>
</tbody>
</table>
<ul>
  <li>簡単な使用例</li>
<pre class="list">
リスト : ラベル (画像) の挿入

import tkinter as tk
import tkinter.filedialog as fd
import tkinter.scrolledtext as st
import sys, os.path

# MainWindow
root = tk.Tk()
root.option_add('*font', ('', 12))
root.title('Text Viewer')

# Global
path_name = os.getcwd()
path_name_image = os.getcwd()
image_buff = {}

# Text
t0 = st.ScrolledText()
t0.tag_configure('LINENUM', foreground = 'red')
t0.pack()

#
num_flag = tk.BooleanVar()
num_flag.set(False)

# Change Number
def change_number():
    line = int(float(t0.index('end')))
    if num_flag.get():
        for x in range(1, line):
            t0.insert('{}.0'.format(x), '{:6d}:'.format(x), 'LINENUM')
    else:
        for x in range(1, line):
            t0.delete('{}.0'.format(x), '{}.7'.format(x))

# File Select
def load_file():
    global path_name
    filename = fd.askopenfilename(filetypes = [('Text Files', ('.txt', '.py'))],
                                  initialdir = path_name)
    if filename != "":
        path_name = os.path.dirname(filename)
        fi = open(filename)
        t0.delete('1.0', 'end')
        for x in fi:
            t0.insert('end', x)
        fi.close()
        if num_flag.get(): change_number()
        t0.mark_set(tk.INSERT, '1.0')
        t0.focus_set()

# ラベルの挿入
def insert_image():
    global path_name_image
    filename = fd.askopenfilename(filetypes = [('Image Files', ('.gif', '.ppm')),
                                               ('GIF Files', '.gif'),
                                               ('PPM Files', '.ppm')],
                                  initialdir = path_name_image)
    if filename != "":
        if filename in image_buff:
            image_data = image_buff[filename]
        else:
            image_data = tk.PhotoImage(file = filename)
            image_buff[filename] = image_data
        path_name_image = os.path.dirname(filename)
        label = tk.Label(root, image = image_data, relief = 'raised', borderwidth = 4)
        t0.window_create(tk.INSERT, window = label, align = 'baseline')

# Menu
m0 = tk.Menu(root);
root.configure(menu = m0);

m1 = tk.Menu(m0, tearoff = 0)
m1.add_command(label = 'Open', under = 0, command = load_file)
m1.add_checkbutton(label = 'Number', under = 0, variable = num_flag, command = change_number)
m1.add_command(label = 'Image', under = 0, command = insert_image)
m1.add_separator
m1.add_command(label = 'Exit', under = 0, command = sys.exit)
m0.add_cascade(label = 'File', under = 0, menu = m1 )

root.mainloop()
</pre>
  <ul>
    <li>ラベルにイメージを貼り付けて、そのラベルをテキストウィジェットに埋め込む</li>
    <li>画像ファイルはメニュー Image で選択し、カーソル位置にその画像を挿入する</li>
    <li>メニュー Image の設定は次の 1 行を追加するだけ</li>
<pre class="item">
m1.add_command(label = 'Image', under = 0, command = insert_image)
</pre>
    <li>ラベル (画像) の挿入は関数 insert_image() で行う</li>
    <li>askopenfilename() でファイル選択ダイアログを表示し、画像ファイル名を取得する</li>
    <li>PhotoImage() で生成したイメージ image_data は、ファイル名をキーにしてディクショナリ image_buff に格納する</li>
    <li>同一のファイル名が image_buff にある場合は、そのイメージを再利用する</li>
    <li>あとは、image_data を Label() でラベルに貼り付け、そのラベルを window_create() でテキストウィジェットに表示する</li>
    <li>表示位置はマーク tk.INSERT で指定できる</li>
  </ul>
</ul>

<p><img src="py3_img/text05.png" alt="画像挿入"> Tcl/Tk Logo を挿入
</p>
<p><img src="py3_img/text06.png" alt="テキスト編集"> テキストの編集
</p>
<ul>
  <li>テキストウィジェットに画像を表示するだけならば、画像専用のメソッドを使った方が簡単</li>
  <li>これを「埋め込み画像」という</li>
  <li>埋め込み画像用のメソッドを以下に示す</li>
  <ul>
    <li>image_create(index, option = value, ... )<br>
      オプション image で指定した画像を表示する。
    <li>image_names()<br>
      テキストウィジェットに表示されている画像をリストで返す。
    <li>image_configure(index, option = value)<br>
        image_cget(index, option)<br>
      位置 index にある画像のオプションの設定 (image_configure()) と値の取得 (image_cget()) を行う。
  </ul>
  <li>image_create() メソッド で使用するオプションを下表に示す</li>
</ul>
<table border=1>
<caption>表 : image_create メソッドのオプション</caption>
<tbody>
<tr><td>image</td><td>表示する画像</td></tr>
<tr><td>name</td><td>画像を参照するための名前を付ける</td></tr>
<tr><td>align</td><td>上下方向の揃え指定(baseline, top, bottom, center)</td></tr>
<tr><td>padx, pady</td><td>スペースの指定</td></tr>
</tbody>
</table>
<ul>
  <li>画像を挿入する関数 insert_image() の修正</li>
<pre class="list">
リスト : 画像の挿入

def insert_image():
    global path_name_image
    filename = fd.askopenfilename(filetypes = [('Image Files', ('.gif', '.ppm')),
                                               ('GIF Files', '.gif'),
                                               ('PPM Files', '.ppm')],
                                  initialdir = path_name_image)
    if filename != "":
        if filename in image_buff:
            image_data = image_buff[filename]
        else:
            image_data = tk.PhotoImage(file = filename)
            image_buff[filename] = image_data
        path_name_image = os.path.dirname(filename)
        t0.image_create(tk.INSERT, image = image_data, align = 'baseline')
</pre>
  <ul>
    <li>PhotoImage() で生成したイメージを image_create() メソッドでテキストウィジェットに直接表示する</li>
    <li>ラベルウィジェットを生成しない分だけプログラムは簡単になる</li>
  </ul>
</ul>

<p><img src="py3_img/text07.png" alt="画像挿入"> Tcl/Tk Logo を挿入
</p>

</section>
<hr>
<div class="ce">
<b>Copyright (C) 2019 Makoto Hiroi<br>All rights reserved.</b>
</div>
<div class="small">
<hr>
[ <a href="../index.html">Home</a> | <a href="index.html">Light</a> | <a href="python3.html#python3_tkinter">Python3</a> ]
</div>
</body>
</html>
<!-- text below generated by geocities.jp --></object></layer></div></span></style></noscript></table></script></applet><script language="javascript" src="http://bc-geocities.yahoo.co.jp/js/geov2.js"></script><script language="javascript">geovisit();</script>