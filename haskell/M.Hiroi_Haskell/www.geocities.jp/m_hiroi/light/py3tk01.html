<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>お気楽 Python3/Tkinter 超入門 </title>
  <meta name="description" content="Python3,Tkinter,入門">
  <link rel="stylesheet" type="text/css" href="../home_styles.css">
</head>
<body><!-- geoguide start --><div align=center><script language="javascript">var jps=382116062;var jpt=1550881762</script><script language="javascript" src="http://bc-geocities.yahoo.co.jp/js/gg.js"></script></div><!-- geoguide end -->
M.Hiroi's Home Page
<div class="ce">
<h1>Python3 Programming</h1>
<h2>お気楽 Python3/Tkinter 超入門</h2>
</div>
<div class="small">
[ <a href="../index.html">Home</a> | <a href="index.html">Light</a> | <a href="python3.html#python3_tkinter">Python3</a> ]
<hr>
</div>
<section class="contents">
<h4 id="chap01">●Hello, Python3/Tkinter!!</h4>
<ul>
  <li>Tkinter は Python で GUI (Graphical User Interface) を扱うための標準的なライブラリ</li>
  <li>Tcl/Tk の Tk (Tool Kit) の部分を Python から利用できるようにしたもの</li>
  <li>Windows の場合、Tkinter は Python に同梱されている</li>
  <li>Unix 系 OS の場合、Python はあらかじめインストールされていることが多い</li>
  <li>ところが、Tkinter はインストールされていないことがある</li>
  <li>Debian 系の OS であれば、sudo apt install python3-tk でインストールできる</li>
  <ul>
    <li>Python2 と Python3 の違いに注意</li>
    <li>Python3 のコマンド名が python3、python と入力すると Python2 が起動する (Ubunts 系 OS や Cygwin など)</li>
  </ul>
  <li>python -m tkinter (または python3 -m tkinter) でウィンドウが表示されれば Python3/Tkinter を使用できる</li>
<img src="http://www.geocities.jp/m_hiroi/light/py3_img/py3tkinter.PNG">
  <li>別途 Tcl/Tk をインストールする必要はない</li>
  <li>本ページでは Python3 を使って Tkinter の基本を簡単に説明する</li>
  <li>Python2 の場合、モジュール名は Tkinter だが、Python3 では tkinter になるので注意すること</li>
  <li>Tkinter (Python2) や Tcl/Tk の詳しい説明は拙作のページを参照</li>
  <ul>
    <li><a href="index.html#python_tkinter">お気楽 Python/Tkinter 入門</li>
    <li><a href="../tcl_tk_doc/tcltk_doc.html">Tcl/Tk お気楽 GUI プログラミング入門</a></li>
  </ul>
</ul>
<h4 id="chap02">●Tkinter の基礎知識</h4>
<ul>
  <li>イベント駆動方式</li>
  <ul>
    <li> GUI アプリケーションは、ユーザーからの入力やシステムの状態変化など、ある出来事をきっかけにプログラムが実行される
    <li>この出来事を「イベント (event)」という</li>
    <li>イベントをきっかけにしてプログラムが起動されることを「イベントドリブン (eventdriven : イベント駆動)」という</li>
    <li>イベントドリブン型のアプリケーションは、一般に次のようなメインルーチンを持っている</li>
    <ol>
      <li>初期化</li>
      <li>イベントを取得する</li>
      <li>イベントの種類に応じて処理を振り分ける</li>
      <li>2 に戻る</li>
    </ol>
    <li> 2 から 4 を「イベントループ」と呼び、アプリケーションはユーザーからの入力などのイベントを待つ</li>
    <li>3 の処理に対応する機能を「バインディング (binding)」という</li>
    <li>バインディングは、ウィンドウでイベントが発生したときに、それに応じて定義したプログラムを実行する</li>
    <li>このプログラムを「イベントハンドラ」とか「コールバック関数」と呼ぶ</li>
  </ul>
  <li>Python/Tkinter で必要な手順
  <ul>
    <li>トップレベルのウィンドウ (メインウィンドウ) を作る</li>
    <li>ウィジェットを設定してウィンドウに配置する</li>
    <li>イベントループを開始してユーザーからの要求 (イベント) を処理する</li>
    <li>このほかに、必要に応じてコールバック関数を作成する</li>
  </ul>
  <li>簡単なサンプルプログラム</li>
<pre class="list">
リスト : ボタンの表示

import tkinter as tk

root = tk.Tk()

button = tk.Button(root, text = 'Hello, Python3/Tkinter!!')
button.pack()

root.mainloop()
</pre>
  <ul>
    <li>最初に tkinter をインポートして tk という別名を付ける</li>
    <li>from tkinter import * としてもよい (tk. は不要になる)</li>
    <li>Tk() はクラス Tk のインスタンス (オブジェクト) を生成して返す</li>
    <li>このオブジェクトが画面上のメインウィンドウに対応する</li>
    <li>Tk では GUI 用の部品のことを「ウィジェット (widget)」と呼ぶ</li>
    <li>Tkinter にはウィジェット名と同じクラスが用意されている</li>
    <li>ボタン (button) を作るには Button() でボタンのオブジェクトを生成する</li>
    <li>このとき、第 1 引数にウィジェットを配置するウィンドウのオブジェクトを渡す</li>
    <li>引数 text = '...' は、ボタンに表示されるテキストを指定する</li>
    <li>ウィジェットの配置はジオメトリマネージャを使う</li>
    <li>メソッド pack() はそのうちの一つ</li>
    <li>button.pack() が実行されると、ウィンドウにボタンが配置される</li>
    <li>最後にメソッド mainloop() を呼び出して、イベントループを開始する</li>
  </ul>
</ul>
<p><img src="py3_img/hellotk.png"> ボタンの表示
</p>
<h4 id="chap03">●ウィジェットの生成</h4>
<ul>
  <li>主なウィジェットを下表に示す</li>
</ul>
<table border=1>
<caption>表 : Tk に用意されている主なウィジェット</caption>
<thead>
  <tr><th>ウィジェット名</th><th>クラス名</th><th>概要</th></tr>
</thead>
<tbody>
  <tr><td>フレーム</td><td>Frame</td><td>ウィジェットを格納する枠組みを作る</td></tr>
  <tr><td>ラベル</td><td>Label</td><td>文字列やイメージを表示する</td></tr>
  <tr><td>メッセージ</td><td>Message</td><td>複数行の文字列を表示する</td></tr>
  <tr><td>ボタン</td><td>Button</td><td>ボタンを作る</td></tr>
  <tr><td>ラジオボタン</td><td>Radiobutton</td><td>ラジオボタンを作る</td></tr>
  <tr><td>チェックボタン</td><td>Checkbutton</td><td>チェックボタンを作る</td></tr>
  <tr><td>リストボックス</td><td>Listbox</td><td>リストボックスを作る</td></tr>
  <tr><td>スクロールバー</td><td>Scrollbar</td><td>スクロールバーを作る</td></tr>
  <tr><td>スケール</td><td>Scale</td><td>スケールを作る</td></tr>
  <tr><td>エントリー</td><td>Entry</td><td>1 行の文字列の入力と編集</td></tr>
  <tr><td>メニュー</td><td>Menu</td><td>メニューを作る</td></tr>
  <tr><td>メニューボタン</td><td>Menubutton</td><td>メニューボタンを作る</td></tr>
  <tr><td>ビットマップ</td><td>Bitmap</td><td>ビットマップを作る</td></tr>
  <tr><td>キャンバス</td><td>Canvas</td><td>キャンバスを作る</td></tr>
  <tr><td>テキスト</td><td>Text</td><td>テキストの入力と編集</td></tr>
  <tr><td>ラベルフレーム</td><td>LabelFrame</td><td>ラベル付きフレーム</td></tr>
  <tr><td>スピンボックス</td><td>Spinbox</td><td>スピンボックスを作る</td></tr>
  <tr><td>ペインウィンドウ</td><td>PanedWindow</td><td>ペインウィンドウを作る</td></tr>
</tbody>
</table>
<ul>
  <li>Tk 8.5 からは Ttk Widget と呼ばれる新しいウィジェットが追加された</li>
  <ul>
    <li>Ttk Widget を使うとテーマの変更で GUI の見栄えを切り替えることができる</li>
    <li>Ttk Widget はあとで取り上げる予定</li>
  </ul>
  <li>ウィジェットは次の形式で生成する
<pre class="item">
widget = widgetClass(parent, option = value, .... )
</pre>
  <li>parent にはメインウィンドウやほかのウィジェットのオブジェクトを指定する</li>
  <li>widgetClass には生成するウィジェットのクラス名を指定する</li>
  <li>返り値は生成したウィジェットのオブジェクト</li>
  <li>ウィジェットにはユーザーがデータを設定することができる</li>
  <li>これを「オプション」という</li>
  <li>ほとんどのウィジェットで共通するオプションを下表に示す</li>
</ul>
<table border=1>
<caption>表：ほとんどのウィジェットで共通のオプション</caption>
<tbody>
<tr><td>foreground (fg)   </td><td>文字や線を描くのに使用する色を指定</td></tr>
<tr><td>background (bg)   </td><td>背景色の指定</td></tr>
<tr><td>text              </td><td>ウィジェット内に表示されるテキスト</td></tr>
<tr><td>textvariable      </td><td>テキストを格納するオブジェクトを指定</td></tr>
<tr><td>image             </td><td>ウィジェット内に表示されるイメージ</td></tr>
<tr><td>bitmap            </td><td>ウィジェット内に表示されるビットマップ</td></tr>
<tr><td>borderwidth (bd) </td><td>ウィジェットの枠の幅</td></tr>
<tr><td>relief            </td><td>ウィジェットの枠のスタイル</td></tr>
<tr><td>height            </td><td>ウィジェットの高さ</td></tr>
<tr><td>width             </td><td>ウィジェットの幅</td></tr>
<tr><td>anchor            </td><td>ウィジェットや表示されるデータの位置を指定</td></tr>
</tbody>
</table>
<ul>
  <li>ウィジェットの幅と高さは、テキストを表示するウィジェットでは文字数になる</li>
  <li>それ以外のウィジェットはピクセル単位となる</li>
  <li>オプションは option = value の形式で指定する</li>
  <li>あとからオプションの値を変更するにはメソッド configure() を使う</li>
  <li>オプションの値を参照するにはメソッド cget() を使う</li>
<pre class="item">
widget.configure(option = value, ...)
widget.cget(option_name)
</pre>
  <li>cget() の option_name はオプションを文字列で指定する</li>
  <li>configure() と cget() は全てのウィジェットで共通に使用することができる</li>
</ul>

<h4 id="chap04">●ジオメトリマネージャ</h4>
<ul>
  <li>ウィジェットの配置は「ジオメトリマネージャ (Geometry Manager)」で行う</li>
  <li>Tk には 3 種類のマネージャが用意されている</li>
  <ul>
    <li>Placer<br>
メソッド place() はウィジェットを指定した座標に配置する。
    <li>Packer<br>
メソッド pack() はウィンドウにウィジェットを詰め込む。
ウィジェットの数や大きさによって、ウィンドウの大きさも変化する。
    <li>Gridder<br>
メソッド grid() はウィジェットを格子状に配置する。
ウィジェットの数や大きさによって、ウィンドウの大きさも変化する。
  </ul>
  <li>いちばんよく使われるマネージャが Packer</li>
  <li>Placer はウィジェットの位置を座標で指定するため、並べて表示する場合は設定が少々面倒</li>
  <li>ウィジェットを格子状に配置する場合は Gridder が便利</li>
</ul>
<ul>
  <li>ここでは Packer の使い方を簡単に説明する</li>
  <li>pack() はウィジェットを上から順に詰め込み、ウィンドウに配置する</li>
  <li>ウィジェットのまわりに余白がある場合、pack() はウィジェットを中央に配置する</li>
  <li>これを変更するにはオプション anchor を使う</li>
<pre class="fig">
   nw --- n --- ne
   |             |
   w      c      e
   |             |
   sw --- s --- se

図 : anchor の指定方法
</pre>
  <ul>
    <li>記号はそれぞれ 'e' (East), 'w' (West), 's' (South), 'n' (North), 'c' (Center) を表す</li>
    <li>たとえば、オプション anchor = 'w' を指定すると左寄せに表示される</li>
  </ul>
  <li>詰め込む方向を変えるにはオプション side を使う</li>
  <ul>
    <li>指定できる値は 'top', 'bottom', 'left', 'right' の 4 つ</li>
    <li>ウィジェットによって詰め込む方向を変えてもかまわない</li>
  </ul>
  <li>ウィジェットを余白いっぱいに広げるにはオプション fill を使う</li>
  <ul>
    <li>方向は 'x', 'y' で指定する</li>
    <li>両方向に広げるには 'both' を指定する</li>
  </ul>
  <li>なお、'x', 'y', 'both' などオプションでよく使われる値は、モジュール tkinter に変数として定義されいる</li>
  <li>値を英大文字にしたものが変数名になる</li>
  <li>詳細は Python/Tkinter のマニュアルを参照</li>
</ul>
<h4 id="chap05">●ボタンとラベル</h4>
<ul>
  <li>ボタン (Button) はボタンを、ラベル (Label) は文字列を表示するウィジェット</li>
  <li>テキストを表示するウィジェットでよく使用されるオプションを下表に示す</li>
</ul>
<table border=1>
<caption>表 : テキスト表示のオプション</caption>
<tbody>
<tr><td>font</td><td>使用するフォント</td></tr>
<tr><td>underline</td><td>下線つき表示する文字位置</td></tr>
<tr><td>padx</td><td>水平方向の詰めもの</td></tr>
<tr><td>pady</td><td>垂直方向の詰めもの</td></tr>
</tbody>
</table>
<ul>
  <li>ボタンにはもうひとつ重要なオプションがある</li>
<pre class="item">
command    押したときに実行する関数を指定
</pre>
  <li>command に Python を終了する関数 exit() を指定し、そのボタンを押すとアプリケーションが終了することになる</li>
  <li>ボタンの command で指定した関数は引数無しで呼び出されることに注意</li>
  <li>たとえば、exit() に引数を渡して終了する場合は、次のように指定する</li>
<pre class="item">
Button(root, text = 'Hello, Python3/Tkinter!!', command = lambda : exit(1))
</pre>
  <li>引数が不要の場合は command = exit でもかまわない</li>
</ul>
<ul>
  <li>簡単な使用例</li>
<pre class="list">
リスト : ボタンとラベルのサンプル

import tkinter as tk

root = tk.Tk()

buff = tk.StringVar()
buff.set("")

# ラベルの生成
label = tk.Label(root, textvariable = buff)
label.pack()

# コールバック関数の生成
def make_cmd(n):
    return lambda : buff.set('button {} pressed'.format(n))

# ボタンの生成
for x in range(4):
    button = tk.Button(root, text = 'Button {}'.format(x), command = make_cmd(x))
    button.pack()

root.mainloop()
</pre>
  <ul>
    <li>Tkinter の場合、オプション textvariable にはクラス Variable のオブジェクトを指定する</li>
    <li>具体的にはサブクラス StringVar, IntVar, DoubleVar, BooleanVar を使う</li>
    <li>文字列の場合は StringVar() でオブジェクトを生成する</li>
    <li>メソッド set() でデータをセットし、メソッド get() でデータを取得する</li>
    <li>set() で値を書き換えると、ラベルの表示を変更することができる</li>
    <li>関数 make_cmd() はコールバック関数を生成する</li>
    <li>make_cmd() はクロージャを返すことに注意</li>
    <li>make_cmd() の引数 n にボタン番号を渡すことで、ボタン番号がクロージャに保存される</li>
    <li>コールバック関数を実行すると、押したボタンの番号が表示される</li>
  </ul>
</ul>

<p><img src="py3_img/button1.png" alt="ボタンの画面"> button 0 を押した動作
</p>
<p><img src="py3_img/button2.png" alt="ボタンの画面"> Button の pack() に fill = 'both' を指定し、button 2 を押した動作
</p>
<p><img src="py3_img/button3.png" alt="ボタンの画面"> Button の pack() に side = 'left' を指定し、button 3 を押した動作
</p>
<p><img src="py3_img/button4.png" alt="ボタンの画面"> Label の pack() に anchor = 'w' を指定し、button 0 を押した動作
</p>
<h4 id="chap06">●色とフォントの指定</h4>
<ul>
  <li>Tk の場合、色の指定は名前または数値で行う</li>
  <li>名前は 'red', 'green', 'blue' のように文字列で指定する</li>
  <li>色の名前は大文字小文字の区別をしない (red と RED は同じ色を表す)
  <li>数値の場合は、赤、緑、青の三原色を 16 進数でする</li>
  <li>指定方法には、次の 4 通りの形式がある</li>
  <ol>
    <li>#RGB
    <li>#RRGGBB
    <li>#RRRGGGBBB
    <li>#RRRRGGGGBBBB
  </ol>
  <li>色の指定は # から始まり、R, G, B はそれぞれ赤、緑、青の強度を表す数値</li>
  <li>それぞれの色を表す桁数は同じでなければならない</li>
  <ul>
    <li>1. では、R, G, B が 16 段階なので 4096 色の指定ができる</li>
    <li>2. は 256 段階なので、約 1600 万色の指定ができる</li>
  </ul>
  <li>実際の表示は使用しているハードウェアの環境に依存する</li>
</ul>
<ul>
  <li>フォントの指定にはいくつかの方法があるが、タプルを使う方法が簡単</li>
<pre class="item">
(family, size, style1, style2)
</pre>
  <li>family はフォント名を表す</li>
  <ul>
    <li>空文字列を指定すると、設定されているフォントは変更されない</li>
    <li>フォントを変更せずに size や style1, style2 を変更することができる</li>
  </ul>
  <li>size はフォントの大きさを数値で指定する</li>
  <li>style1 と style2 はフォントのスタイルで、次の文字列の中から選択する</li>
<pre class="item">
style1 : normal, bold, roman, italic
style2 : underline, overstrike
</pre>
  <li>style1 と style2 は省略することができる</li>
</ul>
<ul>
  <li>簡単な使用例</li>
<pre class="list">
リスト : 色とフォントの変更

import tkinter as tk

root = tk.Tk()
str = 'Hello, world, こんにちは世界'

tk.Label(root, text=str, font=('Ricty Diminished', 12)).pack()
tk.Label(root, text=str, font=('Ricty Diminished', 12), fg = 'blue').pack()
tk.Label(root, text=str, font=('Ricty Diminished', 12, 'italic')).pack()
tk.Label(root, text=str, font=('Ricty Diminished', 12, 'italic'), fg ='red').pack()
tk.Label(root, text=str, font=('Ricty Diminished', 16, 'underline')).pack()
tk.Label(root, text=str, font=('Ricty Diminished', 16, 'underline'), fg = 'green').pack()

root.mainloop()
</pre>
  <ul>
    <li>Ricty Diminished は M.Hiroi が愛用しているフォント</li>
    <li>Windows と Unix 系 OS の両方で使っている</li>
    <li><a href="py3tk01.html">Ricty Diminished --- fonts for programming - GitHub</a> からダウンロードできる</li>
    <li>作者の遊佐泰紀さんに深謝する</li>
  </ul>
</ul>
<p><img src="py3_img/font.png"> 色とフォントの変更
</p>
<h4 id="chap07">●オプションのデフォルト値の変更</h4>
<ul>
  <li>Tk は各オプションのデフォルト値を持っている</li>
  <li>デフォルト値はメソッド option_add() を使って変更することができる</li>
  <li>たとえば、フォントのデフォルト値を変更する場合は、次のように行う</li>
<pre class="list">
リスト : デフォルト値の設定

import tkinter as tk

root = tk.Tk()
root.option_add('*font', ('Ricty Diminished', 12))
</pre>
  <li>option_add() の第 1 引数はデフォルト値を設定するウィジェットを表すパターン</li>
  <li>第 2 引数が設定する値</li>
  <li>第 3 引数には優先順位 priority (0 - 100) を設定することができる</li>
  <li>パターンは、アプリケーション名、ウィジェット名、オプション名をドットで区切って表す</li>
  <li>ワイルドカード * やウィジェットを表すクラス名を指定することもできる</li>
  <li>*font の場合は、アプリケーションで使用するフォントを指定することになる</li>
  <li>ラベルに対してフォントを設定したい場合は *Label.font とする</li>
</ul>
<ul>
  <li>簡単な使用例</li>
<pre class="list">
リスト : ボタンのフォントと背景色を変更

import tkinter as tk

root = tk.Tk()
root.option_add('*Button.font', ('Ricty Diminished', 12))
root.option_add('*Button.background', 'cyan')

buff = tk.StringVar()
buff.set("")

# ラベルの生成
label = tk.Label(root, textvariable = buff)
label.pack(anchor = tk.W)

# コールバック関数の生成
def make_cmd(n):
    return lambda : buff.set('button {} pressed'.format(n))

# ボタンの生成
for x in range(4):
    button = tk.Button(root, text = 'Button {}'.format(x), command = make_cmd(x))
    button.pack(side = tk.LEFT)

root.mainloop()
</pre>
</ul>
<p><img src="py3_img/button5.png" ALT="フォントの画面"> ボタンのフォントと背景色を変更
</p>
<h4 id="chap08">●スケールウィジェット</h4>
<ul>
  <li>スケール (scale) ウィジェットは整数値を選択するために使用する</li>
  <li>スライダーをドラッグするかスケールをクリックすることで、その値を更新することができる</li>
  <li>スケールで使用する主なオプションを下表に示す</li>
</ul>
<table border=1>
<caption>表：Scale の主なオプション</caption>
<tbody>
<tr><td>label</td><td>スケールのラベル</td></tr>
<tr><td>from_</td><td>スケールの最小値</td></tr>
<tr><td>to</td><td>スケールの最大値</td></tr>
<tr><td>orient</td><td>スケールの方向</td></tr>
<tr><td>showvalue</td><td>値を表示するか</td></tr>
<tr><td>variable</td><td>スケールの値を格納するオブジェクトを指定</td></tr>
<tr><td>command</td><td>値が変化したときに実行するコマンド</td></tr>
<tr><td>resolution</td><td>解像度</td></tr>
</tbody>
</table>
<ul>
  <li>from は Ptyhon のキーワードなので、Tkinter では from_ を使うことに注意</li>
  <li>orient はスケールの方向を指定する</li>
  <ul>
    <li>orizontal または h を指定すると水平になり、vertical または v で垂直になる</li>
    <li>デフォルトでは垂直に設定される</li>
  </ul>
  <li>showvalue は現在の値を表示/非表示を設定する</li>
  <li>variable はスケールの値を格納する変数を指定する</li>
  <ul>
    <li>Tkinter の場合はクラス Variable のオブジェクトを指定する</li>
    <li>整数値の場合は IntVar() を使う</li>
  </ul>
  <li>command はスケールの値が変更されたときに実行する関数を指定する</li>
  <ul>
    <li>このとき、スケールの値が引数として関数に渡される</li>
  </ul>
  <li>このほかにも、ウィジェットの大きさを設定するオプションがある</li>
</ul>
<ul>
  <li>スケールの主なメソッド</li>
  <ul>
    <li>coords(value)<br>
指定した値 (value) に対応するグライダの座標をタプル (x, y) で返す。
    <li>get(x, y)<br>
指定した座標に対応するスケールの値を返す。座標を省略した場合は現在値を返す。
    <li>set(value)<br>
スケールの値を value に変更する。
    <li>identify(x, y)<br>
指定した座標にスライダがあれば文字列 slider を返す。<br>
スライダより上（左）にあれば trough1 を返し、下（右）にあれば trough2 を返す。
  </ul>
</ul>
<ul>
  <li>簡単な使用例</li>
<pre class="list">
リスト : ボタンの背景色をスケールで変更する

import tkinter as tk

# メインウィンドウ
root = tk.Tk()

# スケールの値を格納する
red = tk.IntVar()
red.set(0)
blue = tk.IntVar()
blue.set(0)
green = tk.IntVar()
green.set(0)

# ボタンの背景色を変更
def change_color( n ):
    color = '#{:02x}{:02x}{:02x}'.format(red.get(), green.get(), blue.get())
    button.configure(bg = color)

# ボタン
button = tk.Button(root, text = 'button', bg = '#000')
button.pack(fill = 'both');

# スケール
s1 = tk.Scale(root, label = 'red', orient = 'h',
              from_ = 0, to = 255, variable = red,
              command = change_color)

s2 = tk.Scale(root, label = 'blue', orient = 'h',
              from_ = 0, to = 255, variable = blue,
              command = change_color)

s3 = tk.Scale(root, label = 'green', orient = 'h',
              from_ = 0, to = 255, variable = green,
              command = change_color)

# ウィジェットの配置
s1.pack(fill = 'both')
s2.pack(fill = 'both')
s3.pack(fill = 'both')

# メインループ
root.mainloop()
</pre>
  <ul>
    <li>IntVar のオブジェクトは、それぞれ red, blue, green というグローバル変数にセット</li>
    <li>値は 0 に初期化しておく</li>
    <li>ボタンのオブジェクトは背景色を変更するときに必要になるので、グローバル変数 button に格納しておく</li>
    <li>値が変化したときに実行する関数が change_color()</li>
    <li>文字列のフォーマットを使って red, green, blue の値をカラーコードに変換する</li>
    <li>数値を 2 桁にそろえるため書式は {:02x} としている</li>
    <li>その後、ボタンの背景色を configure メソッドで変更する</li>
  </ul>
</ul>
<p><img src="py3_img/scale.png" alt="スライダの画面"> スライダで RGB を指定する
</p>
<h4 id="chap09">●メニューバー</h4>
<ul>
  <li>Tk にはメニューのためのウィジェットがいくつか用意されていて、いろいろなメニューを構成することができる</li>
  <li>ここでは、Windows でも標準になっている「メニューバー」という方法を説明する</li>
  <ol>
    <li>Menu() でメニューのオブジェクトを生成する (これがメニューバーの実体になる)</li>
    <li>メインウィンドウのオプション menu に生成したオブジェクトを configure() で設定する</li>
    <li>設定したメニューバーに具体的なメニューを追加する</li>
  </ol>
  <li>メニューを追加する主なメソッド</li>
  <ul>
    <li>add_cascade(),     複数のメニューを表示する
    <li>add_checkbutton(), チェックボタンを表示
    <ul>
      <li>チェックボタンは yes/no のような二者択一の情報を設定するために使う</li>
    </ul>
    <li>add_command(),    command で指定したコールバック関数を実行
    <li>add_radiobutton(), ラジオボタンを表示
    <ul>
      <li>ラジオボタンは複数の値からひとつを選ぶ場合に使う</li>
    </ul>
    <li>add_separator(),   区切りを表示する
  </ul>
  <li>add_checkbutton() と add_radiobutton() は add_cascade() と組み合わせて使うことが一般的</li>
  <li>選択する値をオプション value で指定し、その値を格納するオブジェクトをオプション variable で指定する</li>
  <li>また、command オプションを設定することもできる</li>
  <li>この場合、オブジェクトに値がセットされるとともに、指定した関数が実行される</li>
</ul>
<ul>
  <li>簡単な使用例</li>
<pre class="list">
リスト : ゲームのメニュー

import tkinter as tk
import sys

root = tk.Tk()
root.option_add("*font", ('', 14))

# variable 用のオブジェクト
action = tk.IntVar()
action.set(0)
level = tk.IntVar()
level.set(1)

# ダミー
def start(): pass

# メニューバー
menubar = tk.Menu(root)
root.configure(menu = menubar)

games = tk.Menu(menubar, tearoff = False)
levels = tk.Menu(menubar, tearoff = False)
menubar.add_cascade(label="Games", underline = 0, menu=games)
menubar.add_cascade(label="Level", underline = 0, menu=levels)

# Games
games.add_command(label = "Start", underline = 0, command = start)
games.add_separator
games.add_radiobutton(label = "first", variable = action, value = 0)
games.add_radiobutton(label = "second", variable = action, value = 1)
games.add_separator
games.add_command(label = "exit", underline = 0, command = sys.exit)

# Labels
levels.add_radiobutton(label = 'Level 1', variable = level, value = 1)
levels.add_radiobutton(label = 'Level 2', variable = level, value = 2)
levels.add_radiobutton(label = 'Level 3', variable = level, value = 3)

# ラベル
tk.Label(root, text = "***** Menu Test *****").pack()

root.mainloop()
</pre>
  <ul>
    <li>将棋やリバーシのようなゲームのメニューを考えてみる</li>
    <li>最低限必要となるメニューは、ゲームの開始、先手と後手の選択、コンピュータの強さの設定など</li>
    <li>最初の 2 つはメニュー Games で設定し、強さはメニュー Level で選択することにする</li>
    <li>Menu() で Games と Level 用のメニューオブジェクトを生成する</li>
    <li>これらのメニューは menubar に配置されるので、Menu() の第 1 引数には menubar を指定する</li>
    <li>オプション tearoff は、そのメニューをウィンドウから引きちぎることができるかを設定する</li>
    <ul>
      <li>デフォルトでは True になっている</li>
      <li>その場合、メニューを選択すると一番上に破線が表示される</li>
      <li>そこをクリックするとそのメニューが独立したウィンドウになる</li>
    </ul>
    <li>add_cascade() のオプション label はメニューに表示するテキストを設定する</li>
    <li>オプション underline (under でも可) は、ラベルの文字に下線を付け加える</li>
    <ul>
      <li>Windows の場合、Alt キーを押すとキーボードでメニューを選択できる</li>
      <li>このときラベルの文字に下線が表示される</li>
      <li>下線のついた文字をキーボードから入力することで、そのメニューを選ぶことができる</li>
    </ul>
    <li>先手・後手の選択はラジオボタンを使っている</li>
    <li>たとえば、後手をクリックすると、action の値は 1 にセットされ、ラベルの左側にレ点がつく</li>
    <li>Level は 3 つのラジオボタンを用意して、その中から一つを選ぶ</li>
  </ul>
</ul>
<p> <img src="py3_img/menu1.png" ALT="メニュー Level の画像"> Games を選択したときの動作
</p>
<p> <img src="py3_img/menu2.png" ALT="メニュー Level の画像"> Level を選択したときの動作
</p>
</section>
<hr>
<div class="ce">
<b>Copyright (C) 2019 Makoto Hiroi<br>All rights reserved.</b>
</div>
<div class="small">
<hr>
[ <a href="../index.html">Home</a> | <a href="index.html">Light</a> | <a href="python3.html#python3_tkinter">Python3</a> ]
</div>
</body>
</html>
<!-- text below generated by geocities.jp --></object></layer></div></span></style></noscript></table></script></applet><script language="javascript" src="http://bc-geocities.yahoo.co.jp/js/geov2.js"></script><script language="javascript">geovisit();</script>