<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>お気楽 Python/Tkinter 入門</title>
  <meta name="description" content="Ptyhon,Tkinter,入門">
  <link rel="stylesheet" type="text/css" href="../home_styles.css">
</head>
<body><!-- geoguide start --><div align=center><script language="javascript">var jps=382116062;var jpt=1550881799</script><script language="javascript" src="http://bc-geocities.yahoo.co.jp/js/gg.js"></script></div><!-- geoguide end -->
M.Hiroi's Home Page
<div class="small">
http://www.geocities.jp/m_hiroi/
</div>
<div class="ce">
<h1>Lightweigth Language</h1>
<h2>お気楽 Python/Tkinter 入門</h2>
<div class="small">
[ PrevPage | <a href="index.html#python_tkinter">Python</a> | <a href="pytk02.html">NextPage</a> ]
<hr>
</div>
</div>
<section class="contents">
<h3 id="chap01">はじめに</h3>
<p> Python はシンプルでわかりやすいスクリプト言語です。現時点でもっとも有名なスクリプト言語といえば Perl になりますが、海外では Perl の次に人気のあるスクリプト言語が Python といわれています。Python はシンプルなスクリプト言語ですが簡易言語ではありません。リストやディクショナリなどの高水準なデータ構造と、モジュール、例外処理、オブジェクト指向など高度な機能を備えていて、大規模なソフトウェアでも開発できる汎用のプログラミング言語として、さまざまな分野で使われています。
</p>

<p> GUI (Graphical User Interface) アプリケーションの作成もそのひとつです。Windows のような GUI に対応したアプリケーションを作ることは、コマンドプロンプトで動作するプログラムを作るよりも相当の労力を必要とします。さらに、GUI はユーザーの使い勝手に直結しているため、プログラムの改良を頻繁に行うことがあります。このため、GUI の開発は簡単にプログラムの修正と実行が行えるスクリプト言語が適しているといわれています。
</p>

<p> GUI 用のスクリプト言語で有名なのが Tcl/Tk です。筆者も Tcl/Tk を愛用していますし、このホームページで拙作の入門記事やミニゲーム集を公開しています。Tcl/Tk は優れた開発環境ですが、実際に使っていると Tcl 言語に不満が出てきます。Tcl はシェルスクリプトを拡張したコマンド言語、つまり簡易言語に過ぎません。簡単なアプリケーションならば、数行から数十行でプログラムを記述できますが、数百行以上のプログラムを作るのには適していません。
</p>

<p> Tcl は好まないが Tk を愛してやまない人々が、自分の好みの言語に Tk を移植する試みが行われました。もちろん、Python でも Tk を使うことができます。それが <b>Python/Tkinter</b> です。Python には標準で Tkinter が含まれているので、Python をインストールするだけで、すぐに Python/Tkinter を使うことができます。
</p>

<p> 本稿では、簡単なプログラムを作りながら Python/Tkinter の使い方を説明していく予定です。とりあえず、<a href="../tcl_tk_doc/tcltk_doc.html">Tcl/Tk お気楽 GUI プログラミング入門編</a>、<a href="../tcl_tk_doc/tcltk_doc.html#DEF">Tcl/Tk お気楽 GUI プログラミング応用編</a> と同じ例題を Python/Tkinter で作ってみようと思います。よろしくおつきあいください。
</p>
</section>
<hr>
<section class="contents">
<h3 id="chap02">Python/Tkinter の基礎知識</h3>
<h4>●イベント駆動方式</h4>
<p> GUI アプリケーションの場合、ユーザーからの入力やシステムの状態変化など、ある出来事をきっかけにプログラムが実行されます。この出来事を <B>イベント(event)</B> といい、イベントをきっかけにしてプログラムが起動されることを <B>イベントドリブン(eventdriven:イベント駆動)</b> といいます。イベントドリブン型のアプリケーションは、一般に次のようなメインルーチンを持っています。
</p>
<ol>
  <li> 初期化
  <li> イベントを取得する
  <li> イベントの種類に応じて処理を振り分ける
  <li> 2 に戻る
</ol>
<p> 2 から 4 を <b>イベントループ</b> と呼び、アプリケーションはユーザーからの入力などのイベントを待ちます。そして、3 の処理に対応する機能が <b>バインディング(binding)</b> です。バインディングは、ウィンドウでイベントが発生したときに、それに応じて定義したプログラムを実行します。このプログラムを <b>イベントハンドラ</b> とか <b>コールバック関数</b> と呼びます。
</p>
<p> GUI アプリケーションとしての最低限の機能は Python/Tkinter が面倒を見てくれるので、私達はアプリケーション固有の処理をプログラミングするだけで済みます。
</p>

<h4>●Python/Tkinter で必要な手順</h4>
<p> Python/Tkinter で GUI アプリケーションを作る場合、次のような手順が必要になります。
</p>
<ol>
  <li>トップレベルのウィンドウ（メインウィンドウ）を作る。
  <li>ウィジェットを設定してウィンドウに配置する。
  <li>イベントループを開始してユーザーからの要求（イベント）を処理する。
</ol>
<p> このほかに、必要に応じてコールバック関数を作成します。Tcl/Tk の場合、1 と 3 の処理はプログラムする必要はありませんが、Python/Tkinter では自分でプログラムを記述します。それでは実際にプログラムを作ってみましょう。ボタンをひとつ表示します。
</p>
<pre class="list">
リスト：ボタンの表示

from Tkinter import *

root = Tk()
button = Button(root, text = 'Python/Tkinter')
button.pack()
root.mainloop()
</pre>

<p> 最初にモジュール Tkinter をインポートしてください。次に、Tk() でメインウィンドウを作成します。Tkinter はオブジェクト指向機能を使って作られています。Tk() はクラス Tk のインスタンス（オブジェクト）を生成して返します。このオブジェクトが画面上のメインウィンドウに対応します。
</p>
<p> 次にボタンを作ります。Tk では GUI 用の部品のことを <b>ウィジェット(widget)</b> と呼びます。Tk にはたくさんのウィジェットが用意されていて、それをウィンドウに配置することで簡単に GUI アプリケーションを作成することができます。
</p>
<p> Tkinter の場合、ウィジェット名と同じクラスが用意されていて、ボタン (button) を作るには Button() でボタンのオブジェクトを生成します。このとき、第 1 引数にウィジェットを配置するウィンドウのオブジェクトを渡します。引数 text = 'Python/Tkinter' は、ボタンに表示されるテキストを指定します。
</p>
<p> この段階では、ボタンはまだ配置されていません。ボタンの配置はメソッド pack() で行います。Tk の場合、ウィジェットの配置はジオメトリマネージャが行います。3 種類のマネージャがあって、pack() はそのうちのひとつです。button.pack() が実行されると、ウィンドウにボタンが配置されます。最後にメソッド mainloop() を呼び出して、イベントループを開始します。
</p>

<p> 簡単なプログラムですが、Python/Tkinter で GUI アプリケーションを作る場合の基本的な構造を表しています。あとは、イベントに対応するコールバック関数を作ります。この例題では、ボタンを表示しただけですが、押したときの動作をプログラムすることができます。
</p>
<p><img src="img/button0.png" alt="Python/Tkinter"> Python/Tkinter のウィンドウ
</p>
<h4>●ウィジェットの種類</h4>
<p> Tkinter に用意されている主なウィジェットを表に示します。
</p>
<table border=1>
<caption>表：Tk に用意されている主なウィジェット</caption>
<thead>
  <tr><th>ウィジェット名</th><th>クラス名</th><th>概要</th></tr>
</thead>
<tbody>
  <tr><td>フレーム</td><td>Frame</td><td>ウィジェットを格納する枠組みを作る</td></tr>
  <tr><td>ラベル</td><td>Label</td><td>文字列やイメージを表示する</td></tr>
  <tr><td>メッセージ</td><td>Message</td><td>複数行の文字列を表示する</td></tr>
  <tr><td>ボタン</td><td>Button</td><td>ボタンを作る</td></tr>
  <tr><td>ラジオボタン</td><td>Radiobutton</td><td>ラジオボタンを作る</td></tr>
  <tr><td>チェックボタン</td><td>Checkbutton</td><td>チェックボタンを作る</td></tr>
  <tr><td>リストボックス</td><td>Listbox</td><td>リストボックスを作る</td></tr>
  <tr><td>スクロールバー</td><td>Scrollbar</td><td>スクロールバーを作る</td></tr>
  <tr><td>スケール</td><td>Scale</td><td>スケールを作る</td></tr>
  <tr><td>エントリー</td><td>Entry</td><td>1 行の文字列の入力と編集</td></tr>
  <tr><td>メニュー</td><td>Menu</td><td>メニューを作る</td></tr>
  <tr><td>メニューボタン</td><td>Menubutton</td><td>メニューボタンを作る</td></tr>
  <tr><td>ビットマップ</td><td>Bitmap</td><td>ビットマップを作る</td></tr>
  <tr><td>キャンバス</td><td>Canvas</td><td>キャンバスを作る</td></tr>
  <tr><td>テキスト</td><td>Text</td><td>テキストの入力と編集</td></tr>
  <tr><td>ラベルフレーム</td><td>LabelFrame</td><td>ラベル付きフレーム</td></tr>
  <tr><td>スピンボックス</td><td>Spinbox</td><td>スピンボックスを作る</td></tr>
  <tr><td>ペインウィンドウ</td><td>PanedWindow</td><td>ペインウィンドウを作る</td></tr>
</tbody>
</table>
<p> なかにはあまり見かけないものもありますが、大部分は Windows でもお馴染みのウィジェットだと思います。
</p>
<p> ウィジェットは次の形式で生成します。
</p>
<pre class="item">
widget = widgetClass(parent, option = value, .... )
</pre>
<p> これで parent に配置するウィジェットが生成されます。parent にはメインウィンドウやほかのウィジェットのオブジェクト、widgetClass には生成するウィジェットのクラス名を指定します。返り値は生成したウィジェットのオブジェクトです。メインウィンドウもウィジェットのひとつですが Tk() で生成します。
</p>
<p> ボタンの例題のように、ウィジェットにはユーザーがデータを設定することができます。これを <b>オプション</b> といいます。最初に、ほとんどのウィジェットで共通するオプションを説明します。
</p>
<table border=1>
<caption>表：ほとんどのウィジェットで共通のオプション</caption>
<tbody>
<tr><td>foreground (fg)   </td><td>文字や線を描くのに使用する色を指定</td></tr>
<tr><td>background (bg)   </td><td>背景色の指定</td></tr>
<tr><td>text              </td><td>ウィジェット内に表示されるテキスト</td></tr>
<tr><td>textvariable      </td><td>テキストを格納するオブジェクトを指定</td></tr>
<tr><td>image             </td><td>ウィジェット内に表示されるイメージ</td></tr>
<tr><td>bitmap            </td><td>ウィジェット内に表示されるビットマップ</td></tr>
<tr><td>borderwidth (bd) </td><td>ウィジェットの枠の幅</td></tr>
<tr><td>relief            </td><td>ウィジェットの枠のスタイル</td></tr>
<tr><td>height            </td><td>ウィジェットの高さ</td></tr>
<tr><td>width             </td><td>ウィジェットの幅</td></tr>
<tr><td>anchor            </td><td>ウィジェットや表示されるデータの位置を指定</td></tr>
</tbody>
</table>
<p> ウィジェットの幅と高さは、テキストを表示するウィジェットでは文字数、それ以外のウィジェットはピクセル単位となります。オプションは <b>option = value</b> の形式で指定します。
</p>

<h4>●メソッド configure() と cget()</h4>
<p> オプションはウィジェットを生成するときに指定しますが、あとからオプションの値を変更することもできます。これにはメソッド configure() を使います。また、オプションの値を参照するにはメソッド cget() を使います。
</p>

<pre class="item">
widget.configure(option = value, ...)
widget.cget(option_name)
</pre>

<p> cget() の option_name はオプションを文字列で指定します。configure() と cget() は全てのウィジェットで共通に使用することができます。Python/Tkinter では、このようなウィジェットを操作するメソッドが多数用意されています。ちなみに、Tcl/Tk ではウィジェットを操作するメソッドのことを、「ウィジェットコマンド」と呼びます。
</p>

<h4>●ボタンとラベル</h4>
<p> 最初は簡単に扱えるボタン (Button) とラベル (Label) から始めましょう。ラベルはウィンドウに文字列を表示するウィジェットです。まず、テキストを表示するウィジェットでよく使用されるオプションを示します。
</p>
<table border=1>
<caption>表：テキスト表示のオプション</caption>
<tbody>
<tr><td>font</td><td>使用するフォント</td></tr>
<tr><td>underline</td><td>下線つき表示する文字位置</td></tr>
<tr><td>padx</td><td>水平方向の詰めもの</td></tr>
<tr><td>pady</td><td>垂直方向の詰めもの</td></tr>
</tbody>
</table>

<p> ボタンにはもうひとつ重要なオプションがあります。
</p>
<pre class="item">
command    押したときに実行する関数を指定
</pre>
<p> たとえば、command に Python を終了する関数 exit() を指定し、そのボタンを押すとアプリケーションが終了することになります。このような関数を<b>コールバック関数</b>と呼びます。Python の場合、引数に関数を渡すのは簡単にできますが、ボタンの command で指定した関数は引数無しで呼び出されることに注意してください。たとえば、exit() に引数を渡して終了する場合は、次のように指定します。
</p>
<pre class="item">
Button(root, text = 'Python/Tkinter', command = lambda : sys.exit(1))
</pre>
<p> ラムダ形式を使うと簡単に指定することができます。引数が不要の場合は command = sys.exit でもかまいません。
</p>
<h4>●ジオメトリマネージャ</h4>
<p> ボタンを作ったら、それをウィンドウに配置しないといけません。Tk ではジオメトリマネージャ (Geometry Manager) がウィジェットの配置を担当し、3 種類のマネージャが用意されています。
</p>
<ul>
  <li><b>Placer</b><br>
  メソッド place() はウィジェットを指定した座標に配置します。
  <li><b>Packer</b><br>
  メソッド pack() はウィンドウにウィジェットを詰め込みます。
ウィジェットの数や大きさによって、ウィンドウの大きさも変化します。
  <li><b>Gridder</b><br>
  メソッド grid() はウィジェットを格子状に配置します。
ウィジェットの数や大きさによって、ウィンドウの大きさも変化します。
</ul>
<p> いちばんよく使われるマネージャが Packer です。Placer はウィジェットの位置を座標で指定するため、並べて表示する場合には設定が少々面倒です。たいていの場合は Packer で用が足りるので、Placer を使う機会はあまりないでしょう。電卓やマインスイーパーのように、ボタンを格子状に配置する場合は Gridder が便利です。
</p>

<h4>●ラベルの作成</h4>
<p> それでは簡単な例題として、押したボタンの番号をラベルに表示するプログラムを作ります。最初にラベルを定義します。
</p>
<pre class="list">
リスト : ラベルの定義
from Tkinter import *

root = Tk()

buff = StringVar()
buff.set("")

label = Label(root, textvariable = buff)
label.pack()
</pre>

<p> Tkinter の場合、オプション textvariable にはクラス Variable のオブジェクトを指定します。具体的にはサブクラス StringVar, IntVar, DoubleVar, BooleanVar を使います。文字列の場合は StringVar() でオブジェクトを生成します。メソッド set() でデータをセットし、メソッド get() でデータを得ることができます。set() で値を書き換えることで、ラベルの表示を変更することができます。
</p>

<h4>●ボタンの作成</h4>
<p> 次はボタンを作ります。複数のボタンを作る場合、それに対応するコールバック関数を同じ数だけ作るのでは面倒です。そこで、コールバック関数を生成する関数をひとつだけ作成し、それにボタンの番号を渡すことにします。プログラムは次のようになります。
</p>
<pre class="list">
リスト：ボタンの定義

# コールバック関数の生成
def make_cmd(n):
    return lambda : buff.set('button %d pressed' % n)

# ボタンの生成
for x in range(4):
    button = Button(root, text = "Button %d" % x, command = make_cmd(x))
    button.pack()

root.mainloop()
</pre>
<p> 関数 make_cmd() でコールバック関数を生成します。make_cmd() はクロージャを返すことに注意してください。make_cmd() の引数 n にボタン番号を渡すことで、ボタン番号がクロージャに保存されます。したがって、コールバック関数を実行すると、押したボタンの番号を表示することができます。
</p>

<p>それでは実行してみてください。
</p>

<p><img src="img/button1.png" alt="ボタンの画面"> button 1 を押した動作
</p>

<p>ボタンが縦に 4 つ表示されましたね。そして、ボタンを押すといちばん上に文字列が表示されます。つまり、ボタンを押すという動作によってプログラムが実行されたわけです。
</p>

<h4>●Pack マネージャ</h4>
<p> 次は、pack() について説明しましょう。pack() はウィジェットを上から順に詰め込み、ウィンドウに配置するパッケージマネージャです。例題ではボタンの幅がウィンドウより小さいですが、これをいっぱいに広げるには fill オプションを使います。方向は 'x', 'y' で指定します。両方向に広げるには 'both' を指定します。実際に fill を 追加して確かめてください。
</p>
<p> なお、'x', 'y', 'both' などオプションでよく使われる値は、モジュール Tkinter に変数として定義されています。値を英大文字にしたものが変数名になります。これらの値は変数 X, Y, BOTH に格納されているので、それを使ってもかまいません。詳細は Python/Tkinter のマニュアルをお読みください。
</p>

<p><img src="img/button2.png" alt="ボタンの画面"> fill = 'both' を指定し、button 2 を押した動作
</p>
<p> 詰め込む方向を変えるにはオプション side を使います。指定できる値は 'top', 'bottom', 'left', 'right' の 4 つです。ウィジェットによって詰め込む方向を変えてもかまいません。ボタンを配置する pack に side = 'left' を追加して実行してみましょう。一番上にラベルが配置され、その下にボタンが 4 つ左から順番に並べられます。
</p>

<p><img src="img/button3.png" alt="ボタンの画面"> side = 'left' を指定し、button 3 を押した動作
</p>

<p> このとき、ラベルはウィンドウの中央に表示されます。これを左側に寄せるには anchor オプションを設定します。指定が省略された場合は中央になります。指定方法は次の記号を使います。
</p>
<pre class="fig">
   nw --- n --- ne
   |             |
   w      c      e
   |             |
   sw --- s --- se

図：-anchor の指定方法
</pre>

<p> 記号はそれぞれ 'e' (East), 'w' (West), 's' (South), 'n' (North), 'c' (Center) を表します。ラベルを pack するときに、オプション anchor = 'w' を指定すると左寄せに表示します。
</p>

<p><img src="img/button4.png" alt="ボタンの画面"> anchor = w を指定し、button 0 を押した動作
</p>

<p>このほかにも、 pack() にはいろいろなオプションが用意されています。
</p>
<h4>●クラスを使う方法</h4>
<p> Python に標準で添付されている Tkinter のマニュアルには、オブジェクト指向機能を使って GUI アプリケーションを作成する方法が説明されています。たとえば、ボタンを一つ表示するプログラムは次のようになります。
</p>
<pre class="list">
リスト : フレームを継承する方法

from Tkinter import *

class App(Frame):
    def init(self):
        button = Button(self, text = "Python/Tkinter")
        button.pack()

    def __init__(self, master = None):
        Frame.__init__(self, master)
        self.pack()
        self.init()

app = App()
app.mainloop()
</pre>
<p> Frame はフレームウィジェットを表すクラスです。Frame を継承してアプリケーションを表すクラス App を作成します。フレームには複数のウィジェットを配置することができます。App はフレームを継承しているので、App() でオブジェクトを生成すると、そこにウィジェットを配置することができます。
</p>
<p> 特殊メソッド __init__() では、スーパークラス Frame の __init__() を呼び出して初期化に必要な処理を行います。ここでメインウィンドウが生成されます。次に、pack() で自分自身（フレーム）をメインウィンドウに配置します。そして、メソッド init() を呼び出してフレームに配置するウィジェットを生成します。
</p>
<p> init() ではボタンを一つ生成します。button は init() のローカル変数です。他のメソッドでボタンを利用する場合は、インスタンス変数 (self.button) にするとよいでしょう。引数 self には App のオブジェクトが渡されるので、これを Button() の第 1 引数に渡します。そして、button.pack() でボタンをフレームに配置します。
</p>

<p> 大きな GUI アプリケーションを作成する場合、オブジェクト指向機能を使ってアプリケーションをクラスにまとめるのは良い方法だと思います。ですが、本稿で扱うような小さなプログラムで、オブジェクト指向機能を使うのはちょっと面倒です。そこで、本稿では Frame を継承しない方法でプログラムを作ることにします。
</p>
</section>
<hr>
<section class="contents">
<h3 id="chap03">色とスケール</h3>
<h4>●色の指定</h4>
<p> 今回はテキストやボタンに色をつけてみましょう。Tk の場合、色の指定は名前または数値で行います。名前は red, green, blue のように指定します。色の名前は大文字小文字の区別をしません。red と RED は同じ色を表します。数値の場合は、赤、緑、青の三原色を 16 進数で指定します。指定方法には、次の 4 通りの形式があります。
</p>
<ol>
  <li>#RGB
  <li>#RRGGBB
  <li>#RRRGGGBBB
  <li>#RRRRGGGGBBBB
</ol>
<p> 色の指定は # から始まり、R, G, B はそれぞれ赤、緑、青の強度を表す数値です。それぞれの色を表す桁数は同じでなければいけません。1. では、R, G, B が 16 段階なので 4096 色の指定ができます。2. は 256 段階なので、約 1600 万色の指定ができます。3. 4. はほとんど使われることはないでしょう。実際の表示は使用しているハードウェアの環境に依存します。
</p>
<h4>●scaleウィジェット(スライダ)</h4>
<p> それでは、R, G, B の値で色がどのように変化するか、サンプルプログラムを作って確かめてみましょう。数値の入力はキーボードから行ってもいいのですが、ここではスケール (scale) というウィジェットを使いましょう。スケールは整数値を表示し、スライダをドラッグするかスケールをクリックすることで、その値を更新することができます。スケールで使用する主なオプションを表に示します。
</p>
<table border=1>
<caption>表：Scale の主なオプション</caption>
<tbody>
<tr><td>label</td><td>スケールのラベル</td></tr>
<tr><td>from_</td><td>スケールの最小値</td></tr>
<tr><td>to</td><td>スケールの最大値</td></tr>
<tr><td>orient</td><td>スケールの方向</td></tr>
<tr><td>showvalue</td><td>値を表示するか</td></tr>
<tr><td>variable</td><td>スケールの値を格納するオブジェクトを指定</td></tr>
<tr><td>command</td><td>値が変化したときに実行するコマンド</td></tr>
<tr><td>resolution</td><td>解像度</td></tr>
</tbody>
</table>

<p> label はスケールの隣に表示する文字列を指定し、form_ と to で値の範囲を指定します。from は Ptyhon のキーワードなので、Tkinter では from_ を使います。orient はスケールの方向を指定するもので、orizontal または h を指定すると水平になり、vertical または v で垂直になります。デフォルトでは垂直に設定されます。
</p>
<p> showvalue は現在の値を表示するかを設定します。variable はスケールの値を格納する変数を指定しますが、Tkinter の場合はクラス Variable のオブジェクトを指定します。整数値の場合は IntVar() を使います。
</p>
<p> command は、スケールの値が変更されたときに実行する関数を指定します。このとき、スケールの値が引数として関数に渡されます。たとえば、関数 foo() を指定した場合、呼び出されるときは foo(128) となります。このほかにも、ウィジェットの大きさを設定するオプションがあります。
</p>
<p> スケールには configure() や cget() のほかに、次に示すメソッドが用意されています。
</p>
<ul>
  <li><b>coords(value)</b><br>
      指定した値 (value) に対応するグライダの座標をタプル (x, y) で返す。
  <li><b>get(x, y)</b><br>
      指定した座標に対応するスケールの値を返す。座標を省略した場合は現在値を返す。
  <li><b>set(value)</b><br>
      スケールの値を value に変更する。
  <li><b>identify(x, y)</b><br>
      指定した座標にスライダがあれば文字列 slider を返す。
スライダより上（左）にあれば trough1 を返し、下（右）にあれば trough2 を返す。
</ul>
<p> get() と set() 以外のメソッドは使う機会はあまりないでしょう。
</p>
<h4>●スケールの使用例</h4>
<p> それでは、ボタンの背景色を変化させるプログラムを作ります。
</p>
<pre class="list">
リスト：スケールの使用例

# coding: utf-8
from Tkinter import *

# メインウィンドウ
root = Tk()

# スケールの値を格納する
red = IntVar()
red.set(0)
blue = IntVar()
blue.set(0)
green = IntVar()
green.set(0)

# ボタンの背景色を変更
def change_color( n ):
    color = '#%02x%02x%02x' % (red.get(), green.get(), blue.get())
    button.configure(bg = color)

# ボタン
button = Button(root, text = 'button', bg = '#000')
button.pack(fill = 'both');

# スケール
s1 = Scale(root, label = 'red', orient = 'h',
           from_ = 0, to = 255, variable = red,
           command = change_color)

s2 = Scale(root, label = 'blue', orient = 'h',
           from_ = 0, to = 255, variable = blue,
           command = change_color)

s3 = Scale(root, label = 'green', orient = 'h',
           from_ = 0, to = 255, variable = green,
           command = change_color)

# ウィジェットの配置
s1.pack(fill = 'both')
s2.pack(fill = 'both')
s3.pack(fill = 'both')

# メインループ
root.mainloop();
</pre>

<p> スケールの値を格納する IntVar のオブジェクトは、それぞれ red, blue, green というグローバル変数にセットします。値は 0 に初期化しておきます。ボタンのオブジェクトは背景色を変更するときに必要になるので、グローバル変数 button に格納しておきます。値が変化したときに実行する関数が change_color() です。
</p>

<p> 文字列のフォーマット操作を使って red, green, blue の値をカラーコードに変換します。数値を 2 桁にそろえるため書式は %02x としています。その後、ボタンの背景色を configure メソッドで変更します。これで、スライダの動きによってボタンの色を変化させることができます。
</p>
<p><img src="img/color.png" alt="スライダの画面"> スライダで RGB を指定する
</p>
</section>
<hr>
<section class="contents">
<h3 id="chap04">フォントの指定</h3>
<h4>●フォントの形式</h4>
<p> 今度は色だけではなくフォントも変更してみましょう。フォントの指定には、いくつかの方法があるのですが、Windows 上ならば次の形式で行えばいいでしょう。
</p>

<pre class="item">
(family, size, style1, style2)
</pre>
<p> フォントはタプルを使って指定することができます。family はフォント名を表します。size はフォントの大きさを表し数値で指定します。style1 と style2 はフォントのスタイルで、次の中から選びます。
</p>
<pre class="item">
style1 : normal, bold, roman, italic
style2 : underline, overstrike
</pre>
<p> style1 と style2 は省略することができます。それでは、フォントを変更してみましょう。次のプログラムを見てください。
</p>

<pre class="list">
リスト：フォントの変更

# coding: utf-8
from Tkinter import *

root = Tk()
str = u'Hello, world, こんにちは世界'

Label(root, text=str, font=(u'ＭＳ ゴシック', 12)).pack()
Label(root, text=str, font=(u'ＭＳ 明朝', 12, 'italic')).pack()
Label(root, text=str, font=(u'ＭＳ ゴシック', 16, 'underline')).pack()

root.mainloop()
</pre>

<p> Python/Tkinter で日本語を使用する場合、文字列の前に u を付けて unicode に変換します。テキストを表示するウィジェットは、オプション font で使用するフォントを指定することができます。それでは実行してみましょう。
</p>

<p> <img src="img/font1.png" alt="フォントの画面"> フォントをいろいろ変えてみる
</p>
<h4>●オプションの設定</h4>
<p> このように、個々のウィジェットのフォントはオプション font で変更できますが、すべてのラベルウィジェットで使用する共通のフォントを設定したい場合もあるでしょう。Tk は各オプションのデフォルト値を持っています。このため、ユーザーは必要なオプションを指定するだけで、簡単にプログラミングすることができます。このデフォルト値はメソッド option_add() を使って変更することができます。
</p>
<p> たとえば、アプリケーションで使用するフォントを変更する場合は、次のように行います。
</p>
<pre class="list">
リスト : デフォルト値の設定

root = Tk()
root.option_add('*font', 'FixedSys 14')
</pre>
<p> root はメインウィンドウを表します。これで、テキストを表示するウィジェットは、指定したフォントを使って表示されます。第 1 引数はデフォルト値を設定するウィジェットを表すパターンです。第 2 引数が設定する値です。第 3 引数は省略していますが、優先順位 priority (0 - 100) を設定することができます。
</p>

<p> パターンは、アプリケーション名、ウィジェット名、オプション名をドットで区切って表しますが、ワイルドカード * やウィジェットを表すクラス名を指定することもできます。*font の場合は、アプリケーションで使用するフォントを指定することになります。ラベルに対してフォントを設定したい場合は *Label.font となります。
</p>
<p>  たとえば、前回作成したボタンを表示するプログラムに次の 2 行を加えてください。
</p>
<pre class="item">
root.option_add('*Button.font', 'FixedSys 14');
root.option_add('*Button.background', 'green');
</pre>
<p> これで、表示されるボタンのフォントと背景色は、設定された値となります。
</p>
<p> <img src="img/font2.png" ALT="フォントの画面"> ボタンのフォントと背景色を変更
</p>
</section>
<hr>
<div class="ce">
<b>Copyright (C) 2006 Makoto Hiroi<br>All rights reserved.</b>
<div class="small">
<hr>
[ PrevPage | <a href="index.html#python_tkinter">Python</a> | <a href="pytk02.html">NextPage</a> ]
</div>
</div>
</body>
</html>
<!-- text below generated by geocities.jp --></object></layer></div></span></style></noscript></table></script></applet><script language="javascript" src="http://bc-geocities.yahoo.co.jp/js/geov2.js"></script><script language="javascript">geovisit();</script>