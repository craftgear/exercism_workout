<HTML>
<HEAD>
  <META content="text/html;charset=shift_jis" http-equiv=Content-Type>
  <META name="keywords" content="PUZZLE,SOLVE,Java">
  <META name="Authors" content="Makoto Hiroi">
  <TITLE> M.Hiroi's Home Page / Puzzle DE Programming / Java DE Puzzle </TITLE>
  <LINK rel=stylesheet
        type="text/css"
        href="../home_styles.css"
        title="Puzzle">
</HEAD>
<BODY><!-- geoguide start --><div align=center><script language="javascript">var jps=382116062;var jpt=1550881777</script><script language="javascript" src="http://bc-geocities.yahoo.co.jp/js/gg.js"></script></div><!-- geoguide end -->
M.Hiroi's Home Page<BR>
<SMALL>
http://www.geocities.co.jp/SiliconValley-Oakland/1680/<BR>
</SMALL>
<CENTER>
<A NAME="top"><H1> Java DE Puzzle </H1></A>
<SMALL>
[ <A HREF="../index.html">Home</A> | <A HREF="../x68k.html">X68000</A> | 
<A HREF="../tcl_tk.html">Tcl/Tk</A> | <A HREF="../xyzzy_lisp.html">xyzzy Lisp</A>
 | <A href="../puzzle/index.html">Puzzle</A> | <A href="../prolog/index.html">Prolog</A>]
</SMALL>
</CENTER>
<HR>
<CENTER>
<H2>●●●  チョロアリ２  ●●●</H2>
<applet code="Ant2.class" width=300 height=300></applet>
</CENTER>
<P> A. K. デュードニー 著「コンピューターレクリエーション４ 遊びの展開」 より、
チョロアリのグラフィック（その２）です。今度のチョロアリは、
その１よりも規則がほんの少しだけ複雑です。
<P><TABLE class="list" border=1 align="left">
<CAPTION>表：チョロアリの規則</CAPTION>
<TR><TH></TH><TH>黒</TH><TH>緑</TH></TR>
<TR><TD>状態 A</TD><TD>緑, 左, A</TD><TD>黒, 前, B</TD>
<TR><TD>状態 B</TD><TD>緑, 右, A</TD><TD>緑, 右, A</TD>
</TABLE>
<P> チョロアリにはふたつの状態 A と B があり、チョロアリの動作は異なります。
たとえば、今いる位置が黒の場合、状態 A では緑に塗って左を向いて１つ進みますが、
状態 B では右を向いて１つ進みます。
画面が狭くてわかりにくいかもしれませんが、
チョロアリが作る四角形の中に螺旋状の模様が現れます。
<BR clear="left">

<P> <A href="Ant2.java">ソースファイルのダウンロード</A>
<HR>
<H3>●プログラムリスト</H3>
<P><PRE class="list">
//
// チョロアリ２
//
//                Copyright (C) 2001 Makoto Hiroi
//

import java.awt.*;
import java.applet.*;
import java.util.*;

public class Ant2 extends Applet implements Runnable
{
  // 変数定義
  final int SIZE = 100;
  byte plane[] = new byte[SIZE * SIZE];
  int dir = 0, state = 0, x = 50, y = 50, width, height, edge;
  Image double_buffer;
  Graphics dg;
  Thread trig = null;

  // 初期化
  public void init(){
    int i;
    trig = new Thread( this );
    width = getSize().width;
    height = getSize().height;
    double_buffer = createImage( width, height );
    dg = double_buffer.getGraphics();
    edge = width / SIZE;

    // 画面の初期化
    dg.setColor( Color.black );
    dg.fillRect( 0, 0, width, height );

    // 平面の初期化
    for( i = 0; i &lt; (SIZE * SIZE); i++ ){
      plane[i] = 0;
    }

    trig.start();
  }

  public void paint( Graphics g ){
    g.drawImage( double_buffer, 0, 0, null );
  }

  public void update( Graphics g ){
    paint( g );
  }

  public void run(){
    while( true ){
      try {
	Thread.sleep( 20 );
      } catch( InterruptedException e ){}
      doIt();
      doIt();
      doIt();
      doIt();
      repaint();
    }
  }

  void doIt(){
    int postion = y * SIZE + x;
    if( plane[postion] == 0 ){
      dg.setColor( Color.green );
      dg.fillRect( x * edge, y * edge, edge, edge );
      plane[postion] = 1;
      if( state == 0 ){
        dir = (dir + 1) % 4;
      } else {
        dir = (dir + 3) % 4;
        state = 0;
      }
    } else {
      if( state == 0 ){
        dg.setColor( Color.black );
        dg.fillRect( x * edge, y * edge, edge, edge );
        plane[postion] = 0;
        state = 1;
      } else {
        dir = (dir + 3) % 4;
        state = 0;
      }
    }
    switch( dir ){
      case 0 :
        x = (x &lt;= 0 ? SIZE - 1 : x - 1);
        break;
      case 1 :
        y = (y &lt;= 0 ? SIZE - 1 : y - 1);
        break;
      case 2 :
        x = (x &gt;= SIZE - 1 ? 0 : x + 1);
        break;
      case 3 :
        y = (y &gt;= SIZE - 1 ? 0 : y + 1);
        break;
    }
  }
}
</PRE>
<HR>
<CENTER>
<B>Copyright (C) 2001-2003 Makoto Hiroi<BR>All rights reserved.</B>
<HR>
<SMALL>
[ <A HREF="../index.html">Home</A> | <A HREF="../x68k.html">X68000</A> | 
<A HREF="../tcl_tk.html">Tcl/Tk</A> | <A HREF="../xyzzy_lisp.html">xyzzy Lisp</A>
| <A href="../puzzle/index.html">Puzzle</A> | <A href="../prolog/index.html">Prolog</A> | <A HREF="ant2.html#top">このページの先頭へ</A> ]
</SMALL>
</CENTER>
</BODY>
</HTML>

<!-- text below generated by geocities.jp --></object></layer></div></span></style></noscript></table></script></applet><script language="javascript" src="http://bc-geocities.yahoo.co.jp/js/geov2.js"></script><script language="javascript">geovisit();</script>