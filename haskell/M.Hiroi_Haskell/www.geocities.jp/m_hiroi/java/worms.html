<HTML>
<HEAD>
  <META content="text/html;charset=shift_jis" http-equiv=Content-Type>
  <META name="keywords" content="PUZZLE,SOLVE,Java">
  <META name="Authors" content="Makoto Hiroi">
  <TITLE> M.Hiroi's Home Page / Puzzle DE Programming / Java DE Puzzle </TITLE>
  <LINK rel=stylesheet
        type="text/css"
        href="../home_styles.css"
        title="Puzzle">
</HEAD>
<BODY><!-- geoguide start --><div align=center><script language="javascript">var jps=382116062;var jpt=1550881776</script><script language="javascript" src="http://bc-geocities.yahoo.co.jp/js/gg.js"></script></div><!-- geoguide end -->
M.Hiroi's Home Page<BR>
<SMALL>
http://www.geocities.co.jp/SiliconValley-Oakland/1680/<BR>
</SMALL>
<CENTER>
<A NAME="top"><H1> Java DE Puzzle </H1></A>
<SMALL>
[ <A HREF="../index.html">Home</A> | <A HREF="../x68k.html">X68000</A> | 
<A HREF="../tcl_tk.html">Tcl/Tk</A> | <A HREF="../xyzzy_lisp.html">xyzzy Lisp</A>
 | <A href="../puzzle/index.html">Puzzle</A> | <A href="../prolog/index.html">Prolog</A>]
</SMALL>
</CENTER>
<HR>
<CENTER>
<H2>●●●  ワーム  ●●●</H2>
<applet code="worms.class" width=240 height=240></applet>
</CENTER>
<P> A. K. デュードニー 著「コンピューターレクリエーション３ 遊びの発見」 より、
ワーム（ミミズ）のグラフィックです。本では１匹のミミズしか登場しませんが、
このプログラムではミミズを４匹に増やしました。
ミミズは円を連結しているだけの簡単なグラフィックなので、
すぐに飽きると思います。
ミミズの数を増やすとか色や形を変えるなど、プログラムを改造して遊んでみてください。
<P> <A href="worms.java">ソースファイルのダウンロード</A>
<HR>
<H3>●プログラムリスト</H3>
<P><PRE class="list">
//
//   worms.java : ワーム（ミミズ）のグラフィック
//
//                Copyright (C) 2001 by M.Hiroi
//
import java.awt.*;
import java.applet.*;
import java.util.*;

// ミミズ本体
class worm {
  int    body_size = 25, tail, width, height;
  double body_x[] = new double [body_size];
  double body_y[] = new double [body_size];
  double x, y, dir;
  Color  color;

  // コンストラクタ
  worm( int w, int h, Color c ){
    width  = w;
    height = h;
    color  = c;
    // ミミズの初期化
    for( int i = 0; i &lt; body_size; i++ ){
      body_x[i] = body_y[i] = -1.0;
    }
    dir  = 0.0;
    tail = 0;
    x = width / 2;
    y = height / 2;
  }

  // 移動
  void move_worm( Graphics g, Random rand ){
    tail = (tail + 1) % body_size;
    delete_body( g, tail );
    if( rand.nextInt() &gt; 0 ){
      dir += 0.18;
    } else {
      dir -= 0.18;
    }
    x += Math.sin( dir ) * 4.0;
    if( x &lt 0.0 ){
      x += width;
    } else if( x &gt;= width ){
      x -= width;
    }
    y += Math.cos( dir ) * 4.0;
    if( y &lt; 0.0 ){
      y += height;
    } else if( y &gt;= height ){
      y -= height;
    }
    body_x[tail] = x;
    body_y[tail] = y;
    draw_body( g, tail );
  }

  // body を消す
  void delete_body( Graphics g, int pos ){
    int x1 = (int)body_x[pos];
    int y1 = (int)body_y[pos];
    if( x1 &gt;= 0 ){
      g.setColor( Color.black );
      g.drawOval( x1, y1, 10, 10 );
    }
  }

  // body を描く
  void draw_body( Graphics g, int pos ){
    int x1 = (int)body_x[pos];
    int y1 = (int)body_y[pos];
    if( x1 &gt;= 0 ){
      g.setColor( color );
      g.drawOval( x1, y1, 10, 10 );
    }
  }
}

public class worms extends Applet implements Runnable
{
  // 変数定義
  final int N = 4;
  Image double_buffer;
  Graphics g;
  Thread trig = null;
  Random rand;
  worm ww[] = new worm[N];
  
  // 初期化
  public void init(){
    int height, width;
    rand = new Random();
    trig = new Thread( this );
    width  = getSize().width;
    height = getSize().height;
    double_buffer = createImage( width, height );
    g = double_buffer.getGraphics();

    // ミミズの初期化
    ww[0] = new worm( width, height, Color.cyan );
    ww[1] = new worm( width, height, Color.red );
    ww[2] = new worm( width, height, Color.yellow );
    ww[3] = new worm( width, height, Color.white );

    // 画面の初期化
    g.setColor( Color.black );
    g.fillRect( 0, 0, width, height );

    trig.start();
  }

  public void paint( Graphics g ){
    g.drawImage( double_buffer, 0, 0, null );
  }

  public void update( Graphics g ){
    paint( g );
  }

  public void run(){
    while( true ){
      try {
	Thread.sleep( 20 );
      } catch( InterruptedException e ){}
      // ミミズの移動
      for( int i = 0; i &lt; N; i++ ){
        ww[i].move_worm( g, rand );
      }
      repaint();
    }
  }
}
</PRE>
<HR>
<CENTER>
<B>Copyright (C) 2001-2003 Makoto Hiroi<BR>All rights reserved.</B>
<HR>
<SMALL>
[ <A HREF="../index.html">Home</A> | <A HREF="../x68k.html">X68000</A> | 
<A HREF="../tcl_tk.html">Tcl/Tk</A> | <A HREF="../xyzzy_lisp.html">xyzzy Lisp</A>
| <A href="../puzzle/index.html">Puzzle</A> | <A href="../prolog/index.html">Prolog</A> | <A HREF="worms.html#top">このページの先頭へ</A> ]
</SMALL>
</CENTER>
</BODY>
</HTML>
<!-- text below generated by geocities.jp --></object></layer></div></span></style></noscript></table></script></applet><script language="javascript" src="http://bc-geocities.yahoo.co.jp/js/geov2.js"></script><script language="javascript">geovisit();</script>